[Info]
Version=3.20
CheckChange=0ac2daed
//
//   ***********************************************************************
//   *                                                                     *
//   *                SPS-PROGRAMM FÜR DIE PC-MILL 155                     *
//   *                                                                     *
//   *               EIN/AUSGÄNGE FÜR ACC UND AC95                         *
//   *                                                                     *
//   *      Designed by Friedrich Schörghofer          16.12.2002          *
//   *                                                                     *
//   ***********************************************************************
//   INHALTSVERZEICHNIS:
//      FC 0    WERKZEUGWENDER
//      FC 1    SCHMIERMITTEL
//      FC 2    STÜCKZÄHLER
//      FC 10   HA STEUERUNG
//      FC 11   ACHSEN LEISTUNG
//      FC 12   JOG ACHSEN
//      FC 13   REF ACHSEN
//      FC 14   AUX-ON
//      FC 15   NC-STARTVERR. UND BETRIEBSARTEN
//      FC 16   RESET
//      FC 17   NC_START_UND_NC_STOP_VON_M0_ODER_M1
//      FC 18   PLC-NC ÜBERGABE UND EFG,AFG,SFG
//      FC 19   SONDERBETRIEB
//      FC 20   INITIALISIERUNGEN UND ÜBERWACHUNGEN
//      FC 21   FUSZTASTER FÜR PNEUMATISCHES SPANNMITTEL
//      FC 22   AUTOMATISCH IN BA REF UMSCHALTEN
//      FC 23   INC ACHSEN
//      FC 24   HA LEISTUNG
//      FC 25   BEI_PROGRAMM_ENDE_RESET_ODER_NEUSTART
//      FC 26   KÜHLMITTEL (M8/M9)
//      FC 27   SPINDEL HALT/START
//      FC 28   VORSCHUB HALT/START
//      FC 29   EINZELSTÜCK
//      FC 30   PNEUM. SCHRAUBSTOCK
//      FC 31   AUSBLASEINRICHTUNG
//      FC 32   TÜRAUTOMATIK
//      FC 34   ZUWEISEN DER EINGÄNGE AC95 - ACC
//      FC 35   ZUWEISEN DER AUSGÄNGE AC95 - ACC
//      FC 36   TEILAPPARAT
//      FC 37   RUNDACHSE WALTER
//      FC 38   RUNDACHSE 4.5.RIES
//      FC 40   ROBOTIK-INTERFACE
//      FC 50   STEUERUNG ZUM REFERENZIEREN DES WERKZEUGWENDERS
//      FC 51   STEUERUNG ZUM SCHWENKEN DES WERKZEUGWENDERS
//      FC 52   WERKZEUGWENDER FREIFAHREN
//      FC 53   WERKZEUGWENDER REFERENZIEREN UND SCHWENKEN
//      FC 55   WERKZEUGWENDER EINSTELLARBEITEN
//      FC 61   AUSWERTUNG DER ZWEIKANALIGEN TÜRSTEUERUNG UND TÜRÜBERWACHUNG
//      FC 62   LED ANSTEUERUNG
//      FC 63   WARNLEUCHTE
//      FC 65   HANDRAD
//      OB 1    ORGANISATIONSBAUSTEIN
//
//
//    SET = VKE SETZEN
//    CLR = VKE LÖSCHEN
//
//
//   Änderungen:
//
//      Alte SPS-SW zu neuer AC95-CAN SPS-SW V 00.00
//        1. Alarmausgang 0.3 immer aktiv (Bit DB10 0.1 muß nicht mehr gesetzt werden)
//
//
//   Änderungen:
//
//
//
//
//   SET; = 1
//   CLR; = 0
//
//   TIMER:
//   SI = IMPULS
//        DIE MAXIMALE IMPULSLÄNGE ENTSPRICHT DER PROGRAMMIERTEN ZEIT
//        DIE MINIMALE IMPULSLÄNGE ENTSPRICHT DER LÄNGE DES EINGANGSSIGNALES
//
//   SV = IMPULS (VERLÄNGERT)
//        DIE IMPULSLÄNGE ENTSPRICHT DER PROGRAMMIERTEN ZEIT
//        DIE DAUER DES EINGANGSSIGNALES HAT KEINEN EINFLUSS
//
//   SE = EINSCHALTVERZÖGERUNG
//        DIE VERZÖGERUNGSDAUER ENTSPRICHT DER PROGRAMMIERTEN ZEIT
//        DAS EINGANGSSIGNAL MUSS MINDESTENS SOLANGE ANLIEGEN
//
//   SS = EINSCHALTVERZÖGERUNG (SPEICHERND)
//        DIE VERZÖGERUNGSDAUER ENTSPRICHT DER PROGRAMMIERTEN ZEIT
//        DIE DAUER DES EINGANGSSIGNALES HAT KEINEN EINFLUSS
//
//   SA = AUSSCHALTIMPULS
//        DIE IMPULSLÄNGE ENTSPRICHT DER PROGRAMMIERTEN ZEIT
//        DER TIMER WECHSELT VON "0"AUF "1" UND DIE ZEIT WIRD GESTARTET
//            WENN DAS EINGANGSSIGNAL VON "1" AUF "0" GEHT.
//
// ZEITBASIS     BELEGUNG DES ZEITWORTES
//               16......8  7.......0
//    0,01 S     0000 0000  0000 0000
//    0,1  S     0001 0000  0000 0000
//    1    S     0010 0000  0000 0000
//   10    S     0011 0000  0000 0000
//                     H     Z     E   = ZEITWERT IM BCD-FORMAT
//                 00                  = BINÄRCODE FÜR ZEITBASIS
//
//
//
//  ÄNDERUNGEN ODER PROBLEME BEI 8**********
//  TESTMERKER AB M 200.0
//
//
//
//   ÄNDERUNGEN :
//        SCHMIERMITTEL-Baustein von PCT125 übernommen
//        AUX ON-Baustein von PCT125 übernommen (mit kleine Änderungen!!)
//        STÜCKZAHLER-Baustein von PCT125 übernommen
//        RESET-Baustein von PCT125 übernommen
//        INITIALISIERUNGS-Baustein von PCT125 übernommen
//        Alte SPS-SW zu neuer AC95-CAN SPS-SW V 00.00
//        1. Alarmausgang 0.3 immer aktiv (Bit DB10 0.1 muß nicht mehr gesetzt werden)
//   1.MINIMALKÜHLUNG  AUF A  4.3 EINGEBAUT (M7 EIN M9 AUS)
//   2.WERKZEUGWENDER ÜBERARBEITET (FREIFAHREN)
//   3.FUSZTASTER FÜR PNEUMATISCHES SPANNMITTEL EINGEBAUT
//
//
//
//
//
//  1.Axiscontroller
//
//  1.1. Eingangsbelegung auf der AC-Steckerplatine Y4A091000:
//  X113.1  +24V
//  X113.2  GND
//  X113.3  E 0.0    Referenzschalter Achse 0 (*X)
//
//  X115.1  +24V
//  X115.2  GND
//  X115.3  E 0.1    Referenzschalter Achse 1 (*Y)
//
//  X117.1  +24V
//  X117.2  GND
//  X117.3  E 0.2    Referenzschalter Achse 2 (*Z)
//
//          E 0.3    Referenzpunkt Achse 3 (HA)
//
//  X114.3  +24V     Bero (X)
//  X114.3  GND      Bero (X)
//  X114.3  E? 2.4    Sync Achse 0 (*X) Bero
//
//  X116.3  +24V     Bero (Y)
//  X116.3  GND      Bero (Y)
//  X116.3  E 2.5    Sync Achse 1 (*Y) Bero
//
//  X118.3  +24V     Bero (Z)
//  X118.3  GND      Bero (Z)
//  X118.3  E 2.6    Sync Achse 2 (*Z) Bero
//
//  X109.1  +5V
//  X109.2  GND
//  X109.3  frei
//  X109.4  E 0.7    Sync Hauptspindel Drehgeber
//  X109.5           Strobe Hauptspindel Drehgeber
//
//  Flachbandstecker 16pol. :
//  X104.1  E 1.0 // E 0.0 = M 50.4 // ** X-ACHSE SERVO-READY  (X)
//  X104.6  E 1.1 // E 0.1 = M 50.5 // ** Y-ACHSE SERVO-READY  (Y)
//  X104.14 E 1.2 // E 0.2 = M 50.6 // ** Z-ACHSE/SERVO-READY  (Z)
//
//  X1070.1          Drehfrequenz Steller analog
//  X1070.2 GND
//  X1070.3          Sollwert Hauptantrieb
//  X1070.6 +24V
//  X1070.7 E 1.3 // E 0.3 = M 50.7 // ** LENZE STELLER SERVO-READY
//
//  X111.1  E 1.5 // E 2.0 = M 50.0 // ** TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
//  X111.2  GND
//  X111.3  E 1.6 // E 2.1 = M 50.1  // ** SCHLÜSSELSCHALTER AUF SONDERBETRIEB
//  X111.4  E 1.7 // E 2.3 = M 50.3  // ** FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
//
//  X110.1  E 1.4 // E 2.2 = M 50.2  // ** NICHT NOT-AUS
//  X110.2  GND
//  X110.3  E 2.0    Reserveeingang
//  X110.4  TOR +    Dieser Eingang wird über ein Flachbkabel an die SM-Karten geleitet
//                   (Torsignal+).Bei stromführendem Signaleingang werden anliegende
//                   Impulse gesperrt.
//
//  X101.1  +5V
//  X101.2  GND
//  X101.3  E 2.1    5V Reserveeingang
//
//  X102.1  +5V
//  X102.2  GND
//  X102.3  E 2.2    5V Reserveeingang
//
//  X103.1  +24V
//  X103.2  GND
//  X103.3  E 2.3 // E2.4 = M 51.1 // ** HAUPTANTRIEB LÄUFT (AUSGANG BEDIENMODUL X1:9)
//                   +24V Signal von Bedienmodul Y4A045 X1:9 wenn sich die Hauptspindel
//                   dreht und beide n=0 Überwachungsrelais (K10 und K4) abgefallen sind.
//                   (Wird zurzeit nur für das Signal Hauptantrieb läuft verwendet,
//                   also keine Überwachungsfunktion)8***********
//  X105.1  +24V
//  X105.2  GND
//  X105.3  E 2.4 // E 2.5 = M 51.2 // ** ZUSTIMMTASTE GEDRÜCKT
//
//      E 2.5    Sync X (für Monitoranzeige zum Einstellen der Refpkt.Schalter)
//      E 2.6    Sync Y (für Monitoranzeige zum Einstellen der Refpkt.Schalter)
//      E 2.7    Sync Z (für Monitoranzeige zum Einstellen der Refpkt.Schalter)
//
//  1.2. Ausgangsbelegung auf der AC-Steckerplatine Y4A081000:
//  X107.2  A 0.0 // A 0.3 = M 54.0    // ** REGLERFREIGABE FÜR LENZESTELLER
//  X107.6
//  X107.
//  X107.7  GND
//
//  X121.1  +24V
//  X121.2  GND
//  X121.3  A 0.1 // A 11.5 = M 54.1   // ** PARAMETERUMSCHALTUNG FUER LENZESERVO BEIM
//
//  X120.1  +24V
//  X120.2  GND
//  X120.3  A 0.2
//
//  X123.1  +24V
//  X123.2  GND
//  X123.3  A 0.3 // A 3.3 = M 54.3 // ** ALARMAUSGANGANG
//
//  X122.1  +24V
//  X122.2  GND
//  X122.3  A 0.4 // M 54.4  // ** TOR-SIGNAL ACHSANTRIEBE 8**** nur für AC95 Maschinen!
//
//
//
//
//  2.Axiscontroller
//
//  2.1. Eingangsbelegung auf der 2.AC-Steckerplatine Y4A091000:
//
//  X1070.1           DREHFELDFREQUENZ RUNDACHSE
//  X1070.2           GND
//  X1070.3           SOLLWERT RUNDACHSE +/-10V
//  X1070.6           +24V
//  X1070.7 E 21.3 // E 0.4 = M 51.3 // **SERVO READY RUNDACHSE
//
//  X111.1  E 21.5
//  X111.2  GND
//  X111.3  E 21.6
//  X111.4  E 21.7
//
//  X110.1  E 21.4
//  X110.2  GND
//  X110.3  E 22.0
//  X110.4  TOR +
//
//  X101.1  +5V
//  X101.2  GND
//  X101.3  E 22.1
//
//  X102.1  +5V
//  X102.2  GND
//  X102.3  E 22.2
//
//  X103.1  +24V
//  X103.2  GND
//  X103.3  E 22.3 // E 4.4 = M 51.4 // **DRUCKSCHALTER KLEMMUNG RUNDACHSE
//
//  X105.1  +24V
//  X105.2  GND
//  X105.3  E 22.4
//
//
//  2.2. Ausgangsbelegung auf der 2.AC-Steckerplatine Y4A081000:
//
//  X107.2  A 20.0 // A 0.4  = M 54.5 // **REGLERFREIGABE FÜR LENZE RUNDACHSE
//  X107.6
//  X107.
//  X107.7  GND
//
//  X121.1  +24V
//  X121.2  GND
//  X121.3  A 20.1 // A 10.0 = M 54.6 // **RUNDACHSE KLEMMEN (OPTION)
//
//  X120.1  +24V
//  X120.2  GND
//  X120.3  A 20.2 // A 10.1 = M 54.7 // **RUNDACHSE FREIGEBEN (OPTION)
//
//  X123.1  +24V
//  X123.2  GND
//  X123.3  A 20.3
//
//  X122.1  +24V
//  X122.2  GND
//  X122.3  A 20.4
//
//
//
//  3. Ein/Ausgangsbelegung auf der 1.CANBUS I/O Platine Y4A029000:
//  Eingangsbyte 4:
//  X201.1  E 4.0  // E 4.0  // *WERKZEUGWENDER POSITIONSBERO
//  X201.2  E 4.1  // E 4.1  // *BERO/TA TEILEN FERTIG (OPTION)
//  X201.3  E 4.2  // E 4.2  // *ÜBERTEMPERATUR BREMSMODUl
//  X201.4  E 4.3  // E 4.3  // *WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
//  X201.5  E 4.4
//  X201.6  E 4.5
//  X201.7  E 4.6  // E 4.6  // *DRUCKSCHALTER SCHMIERMITTEL
//  X201.8  E 4.7  // E 4.7  // *RÜCKMELDEKETTE VERSORGUNGSSCHÜTZE ABGEFALLEN
//  *Überwachung ob die Versorgungsschütze vom HA UND SM abgefallen sind
//  *(Nur nach dem Einschalten und nach NOT AUS muss ein 1 Signal anstehen.)
//  X201.9  +24V      Versorgung
//  X201.10 GND       Versorgung
//
//  Eingangsbyte 5:
//  X301.1  E 5.0  // E 5.0  // *TÜRAUTOMATIK ENDSCH. TÜR OFFEN
//  X301.2  E 5.1  // E 5.1  // *DRUCKSCHALTER SCHRAUBSTOCK
//  X301.3  E 5.2  // E 5.2  // *CYCLE-START TASTE VON BEDIENPULT
//  X301.4  E 5.3
//  X301.5  E 5.4
//  X301.6  E 5.5
//  X301.7  E 5.6
//  X301.8  E 5.7
//  X301.9  +24V     Versorgung
//  X301.10 GND      Versorgung
//
//
//  Ausgangsbyte 4  24V Versorgung von  NOT-AUS Taster:
//  X501.1  A 4.0 // A 9.0  = M 55.0   // **LEISTUNG LENZE FREQUENZUMRICHTER
//  X501.2  A 4.1 // A 9.1  = M 55.1   // **LEISTUNG ACHSANTRIEBE
//  X501.3  A 4.2 // A 9.2  = M 55.2   // **LEISTUNG ACHSEN/SANFTANLAUF
//  X501.4  A 4.3 // A 10.4 = M 55.3   // **MINIMALKÜHLUNG
//  X501.5  A 4.4 // A 9.4             //   FREI
//  X501.6  A 4.5 // A 9.5  = M 55.5   // **AUSBLASMAGNETVENTIL FÜR SPANNMITTEL (OPTION)
//  X501.7  A 4.6 // A 9.6  = M 55.6   // **FREIGABESIGNAL FÜR SONDERBETRIEB BEI OFFENER T
//                                          Y4A045 X1:8 (max.60 s für Einstellbetrieb).
//  X501.8  A 4.7 // A 9.7  = M 55.7   // **FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
//                                          Signal für Bedienmodul Y4A045 X1:10 n=0 von SPS(Freigabesignal für Türmagnet)
//  X501.9  +24V     Versorgung von Notaustaster
//  X501.10 GND      Versorgung
//
//
//
//  Ausgangsbyte 5
//  X502.1  A 5.0 // A 3.5  = M 56.0   // **MAGNETVENTIL TÜR SCHLIESSEN       (OPTION)
//  X502.2  A 5.1 // A 3.4  = M 56.1   // **MAGNETVENTIL TÜR ÖFFNEN           (OPTION)
//  X502.3  A 5.2 // A 10.7 = M 56.2   // **TÜRVERRIEGELUNGSMAGNET   (OPTION)
//  X502.4  A 5.3 // A 10.5 = M 56.3   // **PNEUM.SCHRAUBSTOCK SCHLIESSEN (OPTION)
//  X502.5  A 5.4 // A 10.6 = M 56.4   // **PNEUM.SCHRAUBSTOCK ÖFFNEN (OPTION)
//  X502.6  A 5.5 // A 9.3  = M 56.5   // **WZW-AUSBLASMAGNETVENTIL
//  X502.7  A 5.6 // A 10.2 = M 56.6   // **KÜHLMITTEL
//  X502.8  A 5.7 // A 10.3 = M 56.7   // **SCHMIERMITTEL
//  X502.9  +24V
//  X502.10 GND Versorgung
//
//
//  4. Ein/Ausgangsbelegung auf der 2.CANBUS I/O Platine Y4A029000: (OPTION)
//  Eingangsbyte 6,7
//  X201.1  E 6.0 // E 5.3  = M 52.0   // **ROBOTIK TÜR SCHLIESSEN VON EXTERN (OPTION)
//  X201.2  E 6.1
//  X201.3  E 6.2 // E 5.5  = M 52.2   // **ROBOTIK AUX-ON
//  X201.4  E 6.3 // E 5.6  = M 52.3   // **ROBOTIK AUTOMATIK/REFERENZBETRIEB UMSCHALTEN
//  X201.5  E 6.4 // E 5.7  = M 52.4   // **ROBOTIK REFERENZPUNKT ANFAHREN STARTEN
//  X201.6  E 6.5 // E 6.0  = M 52.5   // **ROBOTIK PROGRAMM START
//  X201.7  E 6.6 // E 6.1  = M 52.6   // **ROBOTIK VORSCHUB-STOP
//  X201.8  E 6.7
//  X201.9  +24V    Versorgung
//  X201.10 GND     Versorgung
//  X301.1  E 7.0 // E 6.2  = M 53.0   // **ROBOTIK SPANNMITTEL SCHLIESSEN
//  X301.2  E 7.1 // E 6.3  = M 53.1   // **ROBOTIK SPANNMITTEL ÖFFNEN
//  X301.3  E 7.2
//  X301.4  E 7.3
//  X301.5  E 7.4
//  X301.6  E 7.5 // E 6.4  = M 53.5   // **ROBOTIK MASCHINENTÜR ÖFFNEN
//  X301.7  E 7.6
//  X301.8  E 7.7   nicht mehr verwendet!!! FREIGABE VON SCHUTZZAUN AKTIV
//  X301.9  +24V     Versorgung
//  X301.10 GND      Versorgung
//  Ausgangsbyte 6,7
//
//  X501.1  A 6.0 // A 5.3  = M 59.0  // ROBOTIK TÜR SCHLIESSEN VON EXTERN (OPTION)
//  X501.2  A 6.1
//  X501.3  A 6.2
//  X501.4  A 6.3 // A 4.0  = M 59.3  // *ROBOTIK NICHT NOT-AUS
//  X501.5  A 6.4 // A 4.1  = M 59.4  // *ROBOTIK MASCHINE BETRIEBSBEREIT
//  X501.6  A 6.5 // A 4.2  = M 59.5  // *ROBOTIK MASCHINE IM REFERENZMODE
//  X501.7  A 6.6 // A 4.3  = M 59.6  // *ROBOTIK M0,M1,M2,ODER M30 AKTIV
//  X501.8  A 6.7 // A 5.0  = M 59.7 //  *ROBOTIK ACHSEN STEHEN AUF REF.PKT.
//  X501.9  +24V     Versorgung
//  X501.10 GND      Versorgung
//  X502.1  A 7.0 // A 4.4  = M 60.0  // *ROBOTIK SCHRAUBSTOCK GESPANNT
//  X502.2  A 7.1 // A 4.5  = M 60.1  // *ROBOTIK SCHRAUBSTOCK ENTSPANNT
//  X502.3  A 7.2
//  X502.4  A 7.3
//  X502.5  A 7.4
//  X502.6  A 7.5
//  X502.7  A 7.6 // A 4.6  = M 60.6  // *ROBOTIK MASCHINENTÜR GESCHLOSSEN
//  X502.8  A 7.7 // A 4.7  = M 60.7  // *ROBOTIK MASCHINENTÜR OFFEN
//  X502.9  +24V     Versorgung
//  X502.10 GND      Versorgung
//
;  BITNUMMERN DER PC-UND MASCHINENSTEUERTAFEL TASTEN:
;  BITNR.:        PC:     MSTT:      MSTT:
;DB1.DBX 1374.0   -----     1        ----------
;DB1.DBX 1374.1   -----     2        | 1| 2| 3|
;DB1.DBX 1374.7   -----     3        ----------
;DB1.DBX 1374.6   -----     6        | 4| 5| 6|
;DB20.DBX 294.7   -----    11        ----------
;DB20.DBX 295.0   -----    12        | 7| 8| 9|
;DB20.DBX 294.2   CTRL ^    5        ----------
;DB20.DBX 294.5   CTRL 1    9        |10|11|12|
;DB20.DBX 294.6   CTRL 2   10        ----------
;DB20.DBX 294.1   CTRL 3    4        |13|  |14|
;DB20.DBX 295.1   CTRL 4    -        ----------
;DB20.DBX 295.2   CTRL 5    -
;DB20.DBX 295.3   CTRL 6    -
;DB20.DBX 295.4   CTRL 7    -
;DB1.DBX 1374.4   CTRL 8   14
;DB20.DBX 294.4   CTRL 9    8
;DB20.DBX 294.3   CTRL 0    7
;DB1.DBX 1374.3   CTRL ß   13
;DB1.DBX 1374.2   CTRL `    -
;DB20.DBX 295.7    // TASTE EILGANGSÜBERLAGERUNG
FUNCTION FC 38 : VOID
NAME: RUNDACHSE 4.5.RIES
BEGIN
NETWORK  1
TITLE = ENABLE SM MODUL B
UN  M 50.3;         // * FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
S   M 91.1;
U   M 50.3;         // * FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
=   A 3.1;          // ENABLE SM MODUL B
U   A 3.1;          // ENABLE SM MODUL B
UN  E 0.5;          // Servo Ready  Achse 4, =  A-ACHSE)
UN  E 0.4;          // Servo Ready  Achse 5, =  B-ACHSE)
U   M 50.3;         // * FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
L   S5TIME#400MS;   // 400MS
SE  T 55;           // STARTEN T55 ALS EINSCHALTVERZ.
U   T 55;           // STARTEN T55 ALS EINSCHALTVERZ.
R   M 91.1;
NETWORK  2
TITLE = A,B-ACHSE REFERENZIEREN
U   M 120.6;        // FREIGABE REFERENZIEREN
U   M 120.7;        // FM REFERENZPUNKT Z-ACHSE AKTIV
SPBN   M001;
=   DB20.DBX 9.2;   // REFERENZIEREN VON KANALACHSE A
=   DB20.DBX 9.3;   // REFERENZIEREN VON KANALACHSE B
=   DB20.DBX 1.1;   // REFERENZPKT.ANFAHREN (UMLENKUNG)
M001:     NOP 0;
U   A 3.1;          // ENABLE SM MODUL B
UN  M 51.2;         // ZUSTIMMTASTE GEDRÜCKT
L   S5TIME#3S;      // 3S
SE  T 56;           // STARTEN T55 ALS EINSCHALTVERZ.
NETWORK  3
TITLE = ALARM ANTRIEB A,B-ACHSE DEFEKT
U   E 0.5;          // Servo Ready  Achse 4, =  A-ACHSE)
U   T 56;           // ÜBERWACHUNG ACHSEN SCHARF
S   DB2.DBX 10.7;   // 6087 ANTRIEB A-ACHSE N. BEREIT
U   E 0.4;          // Servo Ready  Achse 5, =  B-ACHSE)
U   T 56;           // ÜBERWACHUNG ACHSEN SCHARF
S   DB2.DBX 11.1;   // 6089 ANTRIEB B-ACHSE N. BEREIT
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   DB2.DBX 10.7;   // 6087 ANTRIEB A-ACHSE N. BEREIT
R   DB2.DBX 11.1;   // 6089 ANTRIEB B-ACHSE N. BEREIT
NETWORK  4
TITLE = JOG 4.5. RIESACHSE UMSCHALTUNG
UN  DB20.DBX 295.7  // TASTE EILGANGSÜBERLAGERUNG
UN  DB20.DBX 11.2   // JOG in pos. Richtung für Kanalachse A
UN  DB20.DBX 13.2   // JOG in neg. Richtung für Kanalachse A
R   M 5.0
R   M 5.1
U   DB20.DBX 295.7  // TASTE EILGANGSÜBERLAGERUNG
U   DB20.DBX 11.2   // JOG in pos. Richtung für Kanalachse A
S   M 5.0
R   M 5.1
U   DB20.DBX 295.7  // TASTE EILGANGSÜBERLAGERUNG
U   DB20.DBX 13.2   // JOG in neg. Richtung für Kanalachse A
S   M 5.1
R   M 5.0
U   DB20.DBX 11.2   // JOG in pos. Richtung für Kanalachse A
U   DB20.DBX 295.7  // TASTE EILGANGSÜBERLAGERUNG
U   M 5.0
=   DB20.DBX 11.3   // JOG in pos. Richtung für Kanalachse B
R   DB20.DBX 11.2   // JOG in pos. Richtung für Kanalachse A
U   DB20.DBX 13.2   // JOG in neg. Richtung für Kanalachse A
U   DB20.DBX 295.7  // TASTE EILGANGSÜBERLAGERUNG
U   M 5.1
=   DB20.DBX 13.3   // JOG in neg. Richtung für Kanalachse B
R   DB20.DBX 13.2   // JOG in neg. Richtung für Kanalachse A
U   DB20.DBX 11.2   // JOG in pos. Richtung für Kanalachse A
UN  M 5.0
UN  M 5.1
=   DB20.DBX 11.2   // JOG in pos. Richtung für Kanalachse A
U   DB20.DBX 13.2   // JOG in neg. Richtung für Kanalachse A
UN  M 5.0
UN  M 5.1
=   DB20.DBX 13.2   // JOG in neg. Richtung für Kanalachse A
NETWORK  5
TITLE = INC 4.5. RIESACHSE UMSCHALTUNG
L DB20.DBW14
L 10
==I
U   DB20.DBX 295.7  // TASTE EILGANGSÜBERLAGERUNG
SPBN M002
L 11
T DB20.DBW14
M002:     NOP 0;
END_FUNCTION
FUNCTION FC 65 : VOID
NAME: HANDRAD
BEGIN
NETWORK
TITLE = AFG/EFG
UN    M 146.7;151.7 (turn155) // FREIGABE VON SICHERHEITSEINRICHTUNGEN
=     M 90.3;
NETWORK
TITLE = Handradachse löschen
O     M 89.6;             // Handrad-BA
FN    M 89.4;             // Neg. FM Handrad-BA aus
U     M 89.4;             // Neg. FM Handrad-BA aus
SPBN M001;
=     DB20.DBX 348.5;      // Aktuelle Handradachse löschen
M001:  NOP 0;
NETWORK
TITLE = Funktionen für Handrad
O     DB20.DBX 326.5;     // BA INC1 von Kern
O     DB20.DBX 326.6;     // BA INC10 von Kern
O     DB20.DBX 326.7;     // BA INC100 von Kern
O     DB20.DBX 327.0;     // BA INC1000 von Kern
=     M 89.6;             // Handrad-BA
U(    ;
O(    ;
U     M 89.6;             // Handrad-BA
UN    M 89.7;             // HM Handrad aktiv
)     ;
O     M 89.0;             // Fl. Anwahl INC1
O     M 89.1;             // Fl. Anwahl INC10
O     M 89.2;             // Fl. Anwahl INC100
O     M 89.3;             // Fl. Anwahl INC1000
)     ;
=     DB1.DBX 1440.2;     // Handrad Anwahl
ON    M 89.6;             // Handrad-BA
U     M 89.7;             // HM Handrad aktiv
=     DB1.DBX 1440.3;     // Handrad Abwahl
U     DB1.DBX 1440.2;     // Handrad Anwahl
S     M 89.7;             // HM Handrad aktiv
U     DB1.DBX 1440.3;     // Handrad Abwahl
R     M 89.7;             // HM Handrad aktiv
// INC-Schrittweite bei BA-Wechsel mitführen
U     DB20.DBX 326.5;     // BA INC1 von Kern
FP    M 89.0;             // Fl. Anwahl INC1
UN    M 89.0;
SPB   INC1;
L     +1.0E-06;
T     DB20.DBD 16;        // INC Schrittweite
INC1: NOP   0;
U     DB20.DBX 326.6;     // BA INC10 von Kern
FP    M 89.1;             // Fl. Anwahl INC10
UN    M 89.1;
SPB   INC2;
L     +1.0E-05;
T     DB20.DBD 16;        // INC Schrittweite
INC2: NOP   0;
U     DB20.DBX 326.7;     // BA INC100 von Kern
FP    M 89.2;             // Fl. Anwahl INC100
UN    M 89.2;
SPB   INC3;
L     +1.0E-04;
T     DB20.DBD 16;        // INC Schrittweite
INC3: NOP   0;
U     DB20.DBX 327.0;     // BA INC1000 von Kern
FP    M 89.3;             // Fl. Anwahl INC1000
UN    M 89.3;
SPB   INC4;
L     +1.0E-03;
T     DB20.DBD 16;        // INC Schrittweite
INC4: NOP   0;
END_FUNCTION
FUNCTION FC 34 : VOID
NAME: ZUWEISEN DER EINGÄNGE AC 95 - ACC
BEGIN
NETWORK
TITLE = TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1 ZUWEISUNG
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 2.0           // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 1.5           // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
=   M 50.0;         // * TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
NETWORK
TITLE = SCHLÜSSELSCHALTER AUF SONDERBETRIEB ZUWEISUNG
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 2.1           // SCHLÜSSELSCHALTER AUF SONDERBETRIEB
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 1.6           // SCHLÜSSELSCHALTER AUF SONDERBETRIEB
=   M 50.1;         // * SCHLÜSSELSCHALTER AUF SONDERBETRIEB
NETWORK
TITLE = NICHT NOT-AUS ZUWEISUNG
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 2.2           // NICHT NOT-AUS
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 1.4           // NICHT NOT-AUS
=   M 50.2;         // * NICHT NOT-AUS
NETWORK
TITLE = FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET ZUWEISUNG
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 2.3           // FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 1.7           // FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
=   M 50.3;         // * FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
NETWORK
TITLE = SERVO-READY ZUWEISUNG
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 0.0;          // X-ACHSE SERVO-READY  (X)
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 1.0           // X-ACHSE SERVO-READY  (X)
=   M 50.4;         // * X-ACHSE SERVO-READY  (X)
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 0.1           // Y-ACHSE SERVO-READY  (Y)
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 1.1           // Y-ACHSE SERVO-READY  (Y)
=   M 50.5;         // * Y-ACHSE SERVO-READY  (Y)
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 0.2;          // Z-ACHSE/SERVO-READY  (Z)
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 1.2           // Z-ACHSE/SERVO-READY  (Z)
=   M 50.6;         // * Z-ACHSE/SERVO-READY  (Z)
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 0.3;          // LENZE STELLER SERVO-READY
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 1.3           // LENZE STELLER SERVO-READY
=   M 50.7;         // * LENZE STELLER SERVO-READY
NETWORK
TITLE = HAUPTANTRIEB LÄUFT (AUSGANG BEDIENMODUL X1:9)
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 2.4;          // HAUPTANTRIEB LÄUFT (AUSGANG BEDIENMODUL X1:9)
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 2.3           // HAUPTANTRIEB LÄUFT (AUSGANG BEDIENMODUL X1:9)
=   M 51.1;         // * HAUPTANTRIEB LÄUFT (AUSGANG BEDIENMODUL X1:9)
NETWORK
TITLE = ZUSTIMMTASTE GEDRÜCKT
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 2.5;          // ZUSTIMMTASTE GEDRÜCKT
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 2.4           // ZUSTIMMTASTE GEDRÜCKT
=   M 51.2;         // * ZUSTIMMTASTE GEDRÜCKT
NETWORK
TITLE = SERVO READY RUNDACHSE
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 0.4;          // SERVO READY RUNDACHSE
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 21.3          // SERVO READY RUNDACHSE
=   M 51.3;         // * SERVO READY RUNDACHSE
NETWORK
TITLE = DRUCKSCHALTER KLEMMUNG RUNDACHSE
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 4.4;          // DRUCKSCHALTER KLEMMUNG RUNDACHSE
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 22.3          // DRUCKSCHALTER KLEMMUNG RUNDACHSE
=   M 51.4;         // * DRUCKSCHALTER KLEMMUNG RUNDACHSE
NETWORK
TITLE = ROBOTIK TÜR SCHLIESSEN VON EXTERN (OPTION)
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 5.3;          // ROBOTIK TÜR SCHLIESSEN VON EXTERN (OPTION)
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 6.0           // ROBOTIK TÜR SCHLIESSEN VON EXTERN (OPTION)
=   M 52.0;         // * ROBOTIK TÜR SCHLIESSEN VON EXTERN (OPTION)
NETWORK
TITLE = ROBOTIK AUX-ON
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 5.5;          // ROBOTIK AUX-ON
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 6.2           // ROBOTIK AUX-ON
=   M 52.2;         // * ROBOTIK AUX-ON
NETWORK
TITLE = ROBOTIK AUTOMATIK/REFERENZBETRIEB UMSCHALTEN
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 5.6;          // ROBOTIK AUTOMATIK/REFERENZBETRIEB UMSCHALTEN
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 6.3;          // ROBOTIK AUTOMATIK/REFERENZBETRIEB UMSCHALTEN
=   M 52.3;         // * ROBOTIK AUTOMATIK/REFERENZBETRIEB UMSCHALTEN
NETWORK
TITLE = ROBOTIK REFERENZPUNKT ANFAHREN STARTEN
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 5.7;          // ROBOTIK REFERENZPUNKT ANFAHREN STARTEN
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 6.4           // ROBOTIK REFERENZPUNKT ANFAHREN STARTEN
=   M 52.4;         // * ROBOTIK REFERENZPUNKT ANFAHREN STARTEN
NETWORK
TITLE = ROBOTIK PROGRAMM START
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 6.0;          // ROBOTIK PROGRAMM START
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 6.5;          // ROBOTIK PROGRAMM START
=   M 52.5;         // * ROBOTIK PROGRAMM START
NETWORK
TITLE = ROBOTIK VORSCHUB-STOP
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 6.1;          // ROBOTIK VORSCHUB-STOP
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 6.6           // ROBOTIK VORSCHUB-STOP
=   M 52.6;         // * ROBOTIK VORSCHUB-STOP
NETWORK
TITLE = ROBOTIK SPANNMITTEL SCHLIESSEN
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 6.2;          // ROBOTIK SPANNMITTEL SCHLIESSEN
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 7.0           // ROBOTIK SPANNMITTEL SCHLIESSEN
=   M 53.0;         // * ROBOTIK SPANNMITTEL SCHLIESSEN
NETWORK
TITLE = ROBOTIK SPANNMITTEL ÖFFNEN
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 6.3;          // ROBOTIK SPANNMITTEL ÖFFNEN
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 7.1           // ROBOTIK SPANNMITTEL ÖFFNEN
=   M 53.1;         // * ROBOTIK SPANNMITTEL ÖFFNEN
NETWORK
TITLE = ROBOTIK MASCHINENTÜR ÖFFNEN
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 6.4;          // ROBOTIK MASCHINENTÜR ÖFFNEN
O
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
U   E 7.5           // ROBOTIK MASCHINENTÜR ÖFFNEN
=   M 53.5;         // * ROBOTIK MASCHINENTÜR ÖFFNEN
END_FUNCTION
FUNCTION FC 35 : VOID
NAME: ZUWEISEN DER AUSGÄNGE AC95 - ACC
BEGIN
//************************     ACC     *********************************************
UN   E 3.0;          // KENNUNG UMBAU AC95 auf ACC (A131-X6:8)
U   DB10.DBX 2.0;   // ACC  AKTIVIEREN
SPBN   M001;
// ACC  REGLERFREIGABE FÜR LENZESTELLER ZUWEISEN
U   M 54.0          // AUSGANGSMERKER REGLERFREIGABE FÜR LENZESTELLER
=   A 0.3           // * REGLERFREIGABE FÜR LENZESTELLER
// ACC  DCTRL1-PAR 2/4 PARAMETERSATZUMSCHALTUNG FÜR AWZ-MOTOR  E 3
U   M 54.1          // AUSGANGSMERKER PARAMETERUMSCHALTUNG LENZESERVO BEIM WERKZEUGWENDEN
=   A 11.5          // * PARAMETERUMSCHALTUNG FUER LENZESERVO BEIM WERKZEUGWENDEN
// ACC  ALARMAUSGANGANG
U   M 54.3          // AUSGANGSMERKER ALARMAUSGANGANG
=   A 3.3           // * ALARMAUSGANGANG
// ACC  REGLERFREIGABE FÜR LENZE RUNDACHSE (OPTION)
U   M 54.5;         // AUSGANGSMERKER REGLERFREIGABE FÜR LENZE RUNDACHSE
=   A 0.4           // * REGLERFREIGABE FÜR LENZE RUNDACHSE
// ACC  RUNDACHSE KLEMMEN (OPTION)
U   M 54.6;         // AUSGANGSMERKER RUNDACHSE KLEMMEN (OPTION)
=   A 10.0          // * RUNDACHSE KLEMMEN (OPTION)
// ACC  RUNDACHSE FREIGEBEN (OPTION)
U   M 54.7;         // AUSGANGSMERKER RUNDACHSE FREIGEBEN (OPTION)
=   A 10.1          // * RUNDACHSE FREIGEBEN (OPTION)
// ACC  LEISTUNG LENZE FREQUENZUMRICHTER
U   M 55.0          // AUSGANGSMERKER LEISTUNG LENZE FREQUENZUMRICHTER
=   A 9.0           // * LEISTUNG LENZE FREQUENZUMRICHTER
// ACC  LEISTUNG ACHSANTRIEBE
U   M 55.1          // AUSGANGSMERKER LEISTUNG ACHSANTRIEBE
=   A 9.1           // * LEISTUNG ACHSANTRIEBE
// ACC  LEISTUNG ACHSEN/SANFTANLAUF
U   M 55.2          // AUSGANGSMERKER LEISTUNG ACHSEN/SANFTANLAUF
=   A 9.2           // * LEISTUNG ACHSEN/SANFTANLAUF
// ACC  MINIMALKÜHLUNG
U   M 55.3          // AUSGANGSMERKER MINIMALKÜHLUNG
=   A 10.4          // * MINIMALKÜHLUNG
// ACC  AUSBLASMAGNETVENTIL FÜR SPANNMITTEL (OPTION)
U   M 55.5          // AUSGANGSMERKER AUSBLASMAGNETVENTIL FÜR SPANNMITTEL (OPTION)
=   A 9.5           // * AUSBLASMAGNETVENTIL FÜR SPANNMITTEL (OPTION)
// ACC  SONDERBETRIEB EIN VON SPS
U   M 55.6          // AUSGANGSMERKER FREIGABESIGNAL FÜR SONDERBETRIEB BEI OFFENER
=   A 9.6           // * FREIGABESIGNAL FÜR SONDERBETRIEB BEI OFFENER TÜR
// ACC  HAUPTANTRIEB N=0 VON NC
U   M 55.7          // AUSGANGSMERKER FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
=   A 9.7           // * FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
// ACC  MAGNETVENTIL TÜR SCHLIESSEN
U   M 56.0          // AUSGANGSMERKER MAGNETVENTIL TÜR SCHLIESSEN
=   A 3.5           // * MAGNETVENTIL TÜR SCHLIESSEN
// ACC  MAGNETVENTIL TÜR ÖFFNEN
U   M 56.1          // AUSGANGSMERKER MAGNETVENTIL TÜR ÖFFNEN
=   A 3.4           // * MAGNETVENTIL TÜR ÖFFNEN
// ACC  TÜRVERRIEGELUNGSMAGNET
U   M 56.2          // AUSGANGSMERKER TÜRVERRIEGELUNGSMAGNET
=   A 10.7          // * TÜRVERRIEGELUNGSMAGNET
// ACC  PNEUM.SCHRAUBSTOCK SCHLIESSEN (OPTION)
U   M 56.3          // AUSGANGSMERKER PNEUM.SCHRAUBSTOCK SCHLIESSEN (OPTION)
=   A 10.5          // * PNEUM.SCHRAUBSTOCK SCHLIESSEN (OPTION)
// ACC  PNEUM.SCHRAUBSTOCK ÖFFNEN (OPTION)
U   M 56.4          // AUSGANGSMERKER PNEUM.SCHRAUBSTOCK ÖFFNEN (OPTION)
=   A 10.6          // * PNEUM.SCHRAUBSTOCK ÖFFNEN (OPTION)
// ACC  WZW-AUSBLASMAGNETVENTIL
U   M 56.5          // AUSGANGSMERKER WZW-AUSBLASMAGNETVENTIL
=   A 9.3           // * WZW-AUSBLASMAGNETVENTIL
// ACC  LEISTUNG KÜHLMITTEL
U   M 56.6          // AUSGANGSMERKER KÜHLMITTEL LEISTUNG
=   A 10.2          // * KÜHLMITTEL LEISTUNG
// ACC  LEISTUNG SCHMIERMITTEL
U   M 56.7          // AUSGANGSMERKER LEISTUNG SCHMIERMITTEL
=   A 10.3          // * LEISTUNG SCHMIERMITTEL
//    ROBOTIK:
// ACC  ROBOTIK FREQUENZAUSGANG ZUM TÜR SCHLIESSEN
U   M 59.0          // AUSGANGSMERKER ROBOTIK FREQUENZAUSGANG ZUM TÜR SCHLIESSEN
=   A 5.3           // * ROBOTIK FREQUENZAUSGANG ZUM TÜR SCHLIESSEN
// ACC  ROBOTIK NICHT NOT-AUS
U   M 59.3          // AUSGANGSMERKER ROBOTIK NICHT NOT-AUS
=   A 4.0           // * ROBOTIK NICHT NOT-AUS
// ACC  ROBOTIK MASCHINE BETRIEBSBEREIT
U   M 59.4          // AUSGANGSMERKER ROBOTIK MASCHINE BETRIEBSBEREIT
=   A 4.1           // * ROBOTIK MASCHINE BETRIEBSBEREIT
// ACC  ROBOTIK BETRIEBSART REFERENZ
U   M 59.5          // AUSGANGSMERKER ROBOTIK BETRIEBSART REFERENZ
=   A 4.2           // * ROBOTIK BETRIEBSART REFERENZ
// ACC  ROBOTIK M0,M1,M2,ODER M30 AKTIV
U   M 59.6          // AUSGANGSMERKER ROBOTIK M0,M1,M2,ODER M30 AKTIV
=   A 4.3           // * ROBOTIK M0,M1,M2,ODER M30 AKTIV
// ACC ROBOTIK ACHSEN STEHEN AUF REF.PKT.
U   M 59.7         // ROBOTIK ACHSEN STEHEN AUF REF.PKT.
=   A 5.0          // ROBOTIK ACHSEN STEHEN AUF REF.PKT.
// ACC  ROBOTIK SPANNMITTEL GESPANNT
U   M 60.0          // AUSGANGSMERKER ROBOTIK SPANNMITTEL GESPANNT
=   A 4.4           // * ROBOTIK SPANNMITTEL GESPANNT
// ACC  ROBOTIK SPANNMITTEL OFFEN
U   M 60.1          // AUSGANGSMERKER ROBOTIK SPANNMITTEL OFFEN
=   A 4.5           // * ROBOTIK SPANNMITTEL OFFEN
// ACC  ROBOTIK MASCHINENTÜR GESCHLOSSEN
U   M 60.6          // AUSGANGSMERKER ROBOTIK MASCHINENTÜR GESCHLOSSEN
=   A 4.6           // * ROBOTIK MASCHINENTÜR GESCHLOSSEN
// ACC  ROBOTIK MASCHINENTÜR OFFEN
U   M 60.7          // AUSGANGSMERKER ROBOTIK MASCHINENTÜR OFFEN
=   A 4.7           // * ROBOTIK MASCHINENTÜR OFFEN
M001:  NOP 0
// AUSGÄNGE:
//************************     AC95    *********************************************
;       UN  E 3.0;          // KENNUNG UMBAU AC95 AUF ACC (A131-X6:8)
UN  DB10.DBX 2.0;   // ACC  AKTIVIEREN
SPBN   M002;
// AC95 REGLERFREIGABE FÜR LENZESTELLER ZUWEISEN
U   M 54.0          // AUSGANGSMERKER REGLERFREIGABE FÜR LENZESTELLER
=   A 0.0;          // * REGLERFREIGABE FÜR LENZESTELLER
// AC95 DCTRL1-PAR 2/4 PARAMETERSATZUMSCHALTUNG FÜR AWZ-MOTOR  E 3
U   M 54.1          // AUSGANGSMERKER PARAMETERUMSCHALTUNG FUER LENZESERVO BEIM WE
=   A 0.1;          // * PARAMETERUMSCHALTUNG FUER LENZESERVO BEIM WERKZEUGWENDEN
// AC95 ALARMAUSGANGANG
U   M 54.3          // AUSGANGSMERKER ALARMAUSGANGANG
=   A 0.3;          // * ALARMAUSGANGANG
// AC95 TOR-SIGNAL ACHSANTRIEBE
U   M 54.4          // AUSGANGSMERKER TOR-SIGNAL ACHSANTRIEBE
=   A 0.4;          // * TOR-SIGNAL ACHSANTRIEBE
// AC95 REGLERFREIGABE FÜR LENZE RUNDACHSE (OPTION)
U   M 54.5;         // AUSGANGSMERKER REGLERFREIGABE FÜR LENZE RUNDACHSE
=   A 20.0;         // * REGLERFREIGABE FÜR LENZE RUNDACHSE
// AC95 RUNDACHSE KLEMMEN (OPTION)
U   M 54.6;         // AUSGANGSMERKER RUNDACHSE KLEMMEN (OPTION)
=   A 20.1;         // * RUNDACHSE KLEMMEN (OPTION)
// AC95 RUNDACHSE FREIGEBEN (OPTION)
U   M 54.7;         // AUSGANGSMERKER RUNDACHSE FREIGEBEN (OPTION)
=   A 20.2;         // * RUNDACHSE FREIGEBEN (OPTION)
// AC95 LEISTUNG LENZE FREQUENZUMRICHTER
U   M 55.0          // AUSGANGSMERKER LEISTUNG LENZE FREQUENZUMRICHTER
=   A 4.0;          // * LEISTUNG LENZE FREQUENZUMRICHTER
// AC95 LEISTUNG ACHSANTRIEBE
U   M 55.1          // AUSGANGSMERKER LEISTUNG ACHSANTRIEBE
=   A 4.1;          // * LEISTUNG ACHSANTRIEBE
// AC95 LEISTUNG ACHSEN/SANFTANLAUF
U   M 55.2          // AUSGANGSMERKER LEISTUNG ACHSEN/SANFTANLAUF
=   A 4.2;          // * LEISTUNG ACHSEN/SANFTANLAUF
// AC95 MINIMALKÜHLUNG
U   M 55.3          // AUSGANGSMERKER MINIMALKÜHLUNG
=   A 4.3;          // * MINIMALKÜHLUNG
// AC95 AUSBLASMAGNETVENTIL FÜR SPANNMITTEL (OPTION)
U   M 55.5          // AUSGANGSMERKER AUSBLASMAGNETVENTIL FÜR SPANNMITTEL (OPTION)
=   A 4.5;          // * AUSBLASMAGNETVENTIL FÜR SPANNMITTEL (OPTION)
// AC95 SONDERBETRIEB EIN VON SPS
U   M 55.6          // AUSGANGSMERKER FREIGABESIGNAL FÜR SONDERBETRIEB BEI OFFENER
=   A 4.6;          // * FREIGABESIGNAL FÜR SONDERBETRIEB BEI OFFENER TÜR
// AC95 HAUPTANTRIEB N=0 VON NC
U   M 55.7          // AUSGANGSMERKER FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
=   A 4.7;          // * FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
// AC95 MAGNETVENTIL TÜR SCHLIESSEN
U   M 56.0          // AUSGANGSMERKER MAGNETVENTIL TÜR SCHLIESSEN
=   A 5.0           // * MAGNETVENTIL TÜR SCHLIESSEN
// AC95 MAGNETVENTIL TÜR ÖFFNEN
U   M 56.1          // AUSGANGSMERKER MAGNETVENTIL TÜR ÖFFNEN
=   A 5.1           // * MAGNETVENTIL TÜR ÖFFNEN
// AC95 TÜRVERRIEGELUNGSMAGNET
U   M 56.2          // AUSGANGSMERKER TÜRVERRIEGELUNGSMAGNET
=   A 5.2           // * TÜRVERRIEGELUNGSMAGNET
// AC95 PNEUM.SCHRAUBSTOCK SCHLIESSEN (OPTION)
U   M 56.3          // AUSGANGSMERKER PNEUM.SCHRAUBSTOCK SCHLIESSEN (OPTION)
=   A 5.3;          // * PNEUM.SCHRAUBSTOCK SCHLIESSEN (OPTION)
// AC95 PNEUM.SCHRAUBSTOCK ÖFFNEN (OPTION)
U   M 56.4          // AUSGANGSMERKER PNEUM.SCHRAUBSTOCK ÖFFNEN (OPTION)
=   A 5.4;          // * PNEUM.SCHRAUBSTOCK ÖFFNEN (OPTION)
// AC95 WZW-AUSBLASMAGNETVENTIL
U   M 56.5          // AUSGANGSMERKER WZW-AUSBLASMAGNETVENTIL
=   A 5.5;          // * WZW-AUSBLASMAGNETVENTIL
// AC95 LEISTUNG KÜHLMITTEL
U   M 56.6          // AUSGANGSMERKER KÜHLMITTEL LEISTUNG
=   A 5.6;          // * KÜHLMITTEL LEISTUNG
// AC95 LEISTUNG SCHMIERMITTEL
U   M 56.7          // AUSGANGSMERKER LEISTUNG SCHMIERMITTEL
=   A 5.7;          // * LEISTUNG SCHMIERMITTEL
//    ROBOTIK:
// AC95 ROBOTIK FREQUENZAUSGANG ZUM TÜR SCHLIESSEN
U   M 59.0          // AUSGANGSMERKER ROBOTIK FREQUENZAUSGANG ZUM TÜR SCHLIESSEN
=   A 6.0;          // * ROBOTIK FREQUENZAUSGANG ZUM TÜR SCHLIESSEN
// AC95 ROBOTIK NICHT NOT-AUS
U   M 59.3          // AUSGANGSMERKER ROBOTIK NICHT NOT-AUS
=   A 6.3;          // * ROBOTIK NICHT NOT-AUS
// AC95 ROBOTIK MASCHINE BETRIEBSBEREIT
U   M 59.4          // AUSGANGSMERKER ROBOTIK MASCHINE BETRIEBSBEREIT
=   A 6.4;          // * ROBOTIK MASCHINE BETRIEBSBEREIT
// AC95 ROBOTIK BETRIEBSART REFERENZ
U   M 59.5          // AUSGANGSMERKER ROBOTIK BETRIEBSART REFERENZ
=   A 6.5;          // * ROBOTIK BETRIEBSART REFERENZ
// AC95 ROBOTIK M0,M1,M2,ODER M30 AKTIV
U   M 59.6          // AUSGANGSMERKER ROBOTIK M0,M1,M2,ODER M30 AKTIV
=   A 6.6;          // * ROBOTIK M0,M1,M2,ODER M30 AKTIV
// AC95 ROBOTIK ACHSEN STEHEN AUF REF.PKT.
U   M 59.7         // ROBOTIK ACHSEN STEHEN AUF REF.PKT.
=   A 6.7;         // ROBOTIK ACHSEN STEHEN AUF REF.PKT.
// AC95 ROBOTIK SPANNMITTEL GESPANNT
U   M 60.0          // AUSGANGSMERKER ROBOTIK SPANNMITTEL GESPANNT
=   A 7.0;          // * ROBOTIK SPANNMITTEL GESPANNT
// AC95 ROBOTIK SPANNMITTEL OFFEN
U   M 60.1          // AUSGANGSMERKER ROBOTIK SPANNMITTEL OFFEN
=   A 7.1;          // * ROBOTIK SPANNMITTEL OFFEN
// AC95 ROBOTIK MASCHINENTÜR GESCHLOSSEN
U   M 60.6          // AUSGANGSMERKER ROBOTIK MASCHINENTÜR GESCHLOSSEN
=   A 7.6;          // * ROBOTIK MASCHINENTÜR GESCHLOSSEN
// AC95 ROBOTIK MASCHINENTÜR OFFEN
U   M 60.7          // AUSGANGSMERKER ROBOTIK MASCHINENTÜR OFFEN
=   A 7.7;          // * ROBOTIK MASCHINENTÜR OFFEN
M002:  NOP 0
//*************************UMBAU AC95 AUF ACC****************************
U   E 3.0;          // KENNUNG UMBAU AC95 auf ACC (A131-X6:8)
U   DB10.DBX 2.0;   // ACC  AKTIVIEREN
SPBN   M003;
// ACC UMBAU REGLERFREIGABE FÜR LENZESTELLER ZUWEISEN
U   M 54.0          // AUSGANGSMERKER REGLERFREIGABE FÜR LENZESTELLER
=   A 0.3           // * REGLERFREIGABE FÜR LENZESTELLER
// ACC UMBAU DCTRL1-PAR 2/4 PARAMETERSATZUMSCHALTUNG FÜR AWZ-MOTOR  E 3
U   M 54.1          // AUSGANGSMERKER PARAMETERUMSCHALTUNG LENZESERVO BEIM WERKZEUGWENDEN
=   A 11.5          // * PARAMETERUMSCHALTUNG FUER LENZESERVO BEIM WERKZEUGWENDEN
// ACC UMBAU ALARMAUSGANGANG
U   M 54.3          // AUSGANGSMERKER ALARMAUSGANGANG
=   A 3.3           // * ALARMAUSGANGANG
// ACC UMBAU REGLERFREIGABE FÜR LENZE RUNDACHSE (OPTION)
U   M 54.5;         // AUSGANGSMERKER REGLERFREIGABE FÜR LENZE RUNDACHSE
=   A 0.4           // * REGLERFREIGABE FÜR LENZE RUNDACHSE
// ACC UMBAU RUNDACHSE KLEMMEN (OPTION)
U   M 54.6;         // AUSGANGSMERKER RUNDACHSE KLEMMEN (OPTION)
=   A 10.0          // * RUNDACHSE KLEMMEN (OPTION)
// ACC UMBAU RUNDACHSE FREIGEBEN (OPTION)
U   M 54.7;         // AUSGANGSMERKER RUNDACHSE FREIGEBEN (OPTION)
=   A 10.1          // * RUNDACHSE FREIGEBEN (OPTION)
// ACC UMBAU LEISTUNG LENZE FREQUENZUMRICHTER
U   M 55.0          // AUSGANGSMERKER LEISTUNG LENZE FREQUENZUMRICHTER
=   A 9.0           // * LEISTUNG LENZE FREQUENZUMRICHTER
// ACC UMBAU LEISTUNG ACHSANTRIEBE
U   M 55.1          // AUSGANGSMERKER LEISTUNG ACHSANTRIEBE
=   A 9.1           // * LEISTUNG ACHSANTRIEBE
// ACC UMBAU LEISTUNG ACHSEN/SANFTANLAUF
U   M 55.2          // AUSGANGSMERKER LEISTUNG ACHSEN/SANFTANLAUF
=   A 9.2           // * LEISTUNG ACHSEN/SANFTANLAUF
;// ACC UMBAU MINIMALKÜHLUNG
;
;       U   M 55.3          // AUSGANGSMERKER MINIMALKÜHLUNG
;       =   A 10.4          // * MINIMALKÜHLUNG
// ACC UMBAU AUSBLASMAGNETVENTIL FÜR SPANNMITTEL (OPTION)
U   M 55.5          // AUSGANGSMERKER AUSBLASMAGNETVENTIL FÜR SPANNMITTEL (OPTION)
=   A 9.5           // * AUSBLASMAGNETVENTIL FÜR SPANNMITTEL (OPTION)
// ACC UMBAU SONDERBETRIEB EIN VON SPS
U   M 55.6          // AUSGANGSMERKER FREIGABESIGNAL FÜR SONDERBETRIEB BEI OFFENER
=   A 9.6           // * FREIGABESIGNAL FÜR SONDERBETRIEB BEI OFFENER TÜR
// ACC UMBAU HAUPTANTRIEB N=0 VON NC
U   M 55.7          // AUSGANGSMERKER FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
=   A 9.7           // * FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
;// ACC UMBAU MAGNETVENTIL TÜR SCHLIESSEN
;
;       U   M 56.0          // AUSGANGSMERKER MAGNETVENTIL TÜR SCHLIESSEN
;       =   A 10.0           // * MAGNETVENTIL TÜR SCHLIESSEN
;// ACC UMBAU MAGNETVENTIL TÜR ÖFFNEN
;
;       U   M 56.1          // AUSGANGSMERKER MAGNETVENTIL TÜR ÖFFNEN
;       =   A 10.1           // * MAGNETVENTIL TÜR ÖFFNEN
// ACC UMBAU TÜRVERRIEGELUNGSMAGNET
U   M 56.2          // AUSGANGSMERKER TÜRVERRIEGELUNGSMAGNET
=   A 10.2          // * TÜRVERRIEGELUNGSMAGNET
// ACC UMBAU PNEUM.SCHRAUBSTOCK SCHLIESSEN (OPTION)
U   M 56.3          // AUSGANGSMERKER PNEUM.SCHRAUBSTOCK SCHLIESSEN (OPTION)
=   A 10.3          // * PNEUM.SCHRAUBSTOCK SCHLIESSEN (OPTION)
// ACC UMBAU PNEUM.SCHRAUBSTOCK ÖFFNEN (OPTION)
U   M 56.4          // AUSGANGSMERKER PNEUM.SCHRAUBSTOCK ÖFFNEN (OPTION)
=   A 10.4          // * PNEUM.SCHRAUBSTOCK ÖFFNEN (OPTION)
// ACC UMBAU WZW-AUSBLASMAGNETVENTIL
U   M 56.5          // AUSGANGSMERKER WZW-AUSBLASMAGNETVENTIL
=   A 10.5           // * WZW-AUSBLASMAGNETVENTIL
// ACC UMBAU LEISTUNG KÜHLMITTEL
U   M 56.6          // AUSGANGSMERKER KÜHLMITTEL LEISTUNG
=   A 10.6          // * KÜHLMITTEL LEISTUNG
// ACC UMBAU LEISTUNG SCHMIERMITTEL
U   M 56.7          // AUSGANGSMERKER LEISTUNG SCHMIERMITTEL
=   A 10.7          // * LEISTUNG SCHMIERMITTEL
//    ROBOTIK:
// ACC UMBAU ROBOTIK FREQUENZAUSGANG ZUM TÜR SCHLIESSEN
U   M 59.0          // AUSGANGSMERKER ROBOTIK FREQUENZAUSGANG ZUM TÜR SCHLIESSEN
=   A 4.0           // * ROBOTIK FREQUENZAUSGANG ZUM TÜR SCHLIESSEN
// ACC UMBAU ROBOTIK NICHT NOT-AUS
U   M 59.3          // AUSGANGSMERKER ROBOTIK NICHT NOT-AUS
=   A 4.4           // * ROBOTIK NICHT NOT-AUS
// ACC UMBAU ROBOTIK MASCHINE BETRIEBSBEREIT
U   M 59.4          // AUSGANGSMERKER ROBOTIK MASCHINE BETRIEBSBEREIT
=   A 4.4           // * ROBOTIK MASCHINE BETRIEBSBEREIT
// ACC UMBAU ROBOTIK BETRIEBSART REFERENZ
U   M 59.5          // AUSGANGSMERKER ROBOTIK BETRIEBSART REFERENZ
=   A 4.5           // * ROBOTIK BETRIEBSART REFERENZ
// ACC UMBAU ROBOTIK M0,M1,M2,ODER M30 AKTIV
U   M 59.6          // AUSGANGSMERKER ROBOTIK M0,M1,M2,ODER M30 AKTIV
=   A 4.6           // * ROBOTIK M0,M1,M2,ODER M30 AKTIV
// ACC ROBOTIK ACHSEN STEHEN AUF REF.PKT.
U   M 59.7         // ROBOTIK ACHSEN STEHEN AUF REF.PKT.
=   A 5.7          // ROBOTIK ACHSEN STEHEN AUF REF.PKT.
// ACC UMBAU ROBOTIK SPANNMITTEL GESPANNT
U   M 60.0          // AUSGANGSMERKER ROBOTIK SPANNMITTEL GESPANNT
=   A 5.0           // * ROBOTIK SPANNMITTEL GESPANNT
// ACC UMBAU ROBOTIK SPANNMITTEL OFFEN
U   M 60.1          // AUSGANGSMERKER ROBOTIK SPANNMITTEL OFFEN
=   A 5.1           // * ROBOTIK SPANNMITTEL OFFEN
// ACC UMBAU ROBOTIK MASCHINENTÜR GESCHLOSSEN
U   M 60.6          // AUSGANGSMERKER ROBOTIK MASCHINENTÜR GESCHLOSSEN
=   A 5.6           // * ROBOTIK MASCHINENTÜR GESCHLOSSEN
// ACC UMBAU ROBOTIK MASCHINENTÜR OFFEN
U   M 60.7          // AUSGANGSMERKER ROBOTIK MASCHINENTÜR OFFEN
=   A 5.7           // * ROBOTIK MASCHINENTÜR OFFEN
M003:  NOP 0
END_FUNCTION
FUNCTION FC 61: VOID
NAME: AUSWERTUNG DER ZWEIKANALIGEN TÜRSTEUERUNG UND TÜRÜBERWACHUNG
BEGIN
NETWORK
TITLE = IMPULSDAUER
UN  T 52;            // PAUSENDAUER
L   S5T#500MS;1S;          //
SV  T 51;            // STARTEN ALS VERLÄNGERTER IMPULS
NETWORK
TITLE = PAUSENDAUER
UN  T 51;            // IMPULSDAUER
L   S5T#500MS;1S;          //
SV  T 52;            // STARTEN ALS VERLÄNGERTER IMPULS
U   T 51;            // IMPULSDAUER
=   M 59.0
U   M 52.0;
FP  M 25.0
U   M 52.0;
FN  M 25.1
U   M 59.0;            // IMPULSDAUER
L   S5T#800MS;1S500MS;     //
SV  T 53
U   M 25.0
R   T 53
S   M 26.0
UN  M 59.0;            // IMPULSDAUER
L   S5T#800MS;1S500MS;     //
SV  T 54
U   M 25.1
R   T 54
S   M 26.1
U   M 26.0
U   M 26.1
S   M 26.7           // HM TÜR ZU VON EXTERN
U   T 53
U   T 54
R   M 26.7           // HM TÜR ZU VON EXTERN
R   M 26.0
R   M 26.1
NETWORK
TITLE = ÜBERWACHUNG
END_FUNCTION
FUNCTION FC 0 : VOID
NAME: WERKZEUGWENDER
BEGIN
; BIT BESCHREIBUNG FÜR WZW :
; WERKZEUGWENDER SCHWENKEN :
;      M 149.1  SCHRITT 3.1  Z-ACHSE AUF REF.PKT.FAHREN
;      M 149.2  SCHRITT 3.2  Z-ACHSE 30MM ÜBER REF.PKT.FAHREN
;      M 149.3  SCHRITT 3.3  Z-ACHSE AUF WERKZEUGWENDEPOSITION FAHREN
;      M 149.4  SCHRITT 5.1  Z-ACHSE 30MM ÜBER REF.PKT.FAHREN
;      M 149.5  SCHRITT 5.2  Z-ACHSE AUF REF.PKT.FAHREN
;      M 149.6
;
;   BYTE 150 WIRD NACH SCHRITT 6 GELÖSCHT
;      M 150.1  SCHRITT 1 SPINDEL IN POSITIONIERBETRIEB SCHALTEN
;      M 150.2  SCHRITT 2 SPINDEL REFERENZIEREN
;      M 150.3  SCHRITT 3 Z-ACHSE AUF WERKZEUGWENDEPOSITION FAHREN
;      M 150.4  SCHRITT 4 WZW AUF GÜLTIGE POSITION SCHWENKEN
;      M 150.5  SCHRITT 5 Z-ACHSE AUF AUSGANGSPOSITION FAHREN
;      M 150.6  SCHRITT 6 WERKZEUGWENDE-MODE VERLASSEN
;      M 151.0  WERKZEUGWENDER IST REFERENZIERT
;      M 151.1  WERKZEUGWENDER FREIGABE
;      M 151.2  T-WORT IST GÜLTIG
;      M 151.3  WERKZEUGWENDER STARTEN VON GÜLTIGEN T-WORT
;      M 151.4  WERKZEUGWENDER START VON WZW-TASTE
;      M 151.5  FM WZW TASTE
;      M 151.6  FM WERKZEUGWENDER POSITIONSBERO
;      M 152.0  WERKZEUGWENDEN AKTIV
;      M 152.1  WERKZEUGWENDEN ODER FREIFAHREN AKTIV
;      M 152.2  WERKZEUGWENDER POSITIONSBERO ÜBERWACHUNG
;      M 152.3  WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
;      M 152.6  ANFORDERUNG WERKZEUGWENDER IM SCHRITT 4 WEITERSCHWENKEN
;      M 152.7  WERKZEUGWENDER IM SCHRITT 4 WEITERSCHWENKEN
;      M 153.0  WZW ABBRUCH MERKER AUS DEN SETTINGDATEN ZAHNRAD IM EINGRIFF
;      M 153.1  WZW ABBRUCH MERKER 1 (NOT AUS UND ZAHNRAD IM EINGRIFF)
;      M 153.3  WZW ABBRUCH MERKER FÜR REFERENZPUNKTANFAHREN
;      M 153.7  OFFSET VON HAUPTANTRIEB EINSTELLEN
;   BYTE 154 WIRD NACH SCHRITT 6 GELÖSCHT
;      M 154.2  WZW ABBRUCH MERKER 2 (NOT AUS UND ZAHNRAD NICHT IM EINGRIFF)
;      M 154.3  WZW ABBRUCH MERKER 3 (RESET ODER TÜR AUF IM SCHRITT S1 ODER S2)
;      M 154.4  WZW ABBRUCH MERKER 4 (NOT-AUS,TÜR AUF,RESET IM SCHRITT S3,ODER S5)
;      M 154.5  - NEUE WZW-TROMMEL POSITION IST IN MINUSRICHTUNG
;      M 154.6  + NEUE WZW-TROMMEL POSITION IST IN PLUSRICHTUNG
;      M 155.0  T-WORT GRÖSSER 10
;      M 155.1  T-WORT KLEINER 1
;      M 155.2  T-WORT UNGLEICH ISTZÄHLER
;      M 155.3  SOLLZÄHLER VORWÄRTS ZÄHLEN
;      M 155.4  SOLLZÄHLER RÜCKWÄRTS ZÄHLEN
;      M 155.5  SOLLZÄHLER UNGLEICH ISTZÄHLER
;      M 155.6  NEUES T-WORT GESPEICHERT FÜR MELDUNG 7001
;      M 155.7  REGLERFREIGABE FUER HA BEIM WERKZEUGWENDEN
;      MD 156    DOPPELWORT MIT SCHWENKPOSITION IN GRAD FÜR HAUPTSPINDEL (FLOATWWERT)
; WERKZEUGWENDER FREIFAHREN :
;      M 160.1  SCHRITT F1  SPINDEL IN POSITIONIERBETRIEB SCHALTEN
;      M 160.2  SCHRITT F2  SPINDEL REFERENZIEREN
;      M 160.3  SCHRITT F3  WZW POSITIONSBERO SUCHEN
;      M 160.4  SCHRITT F4  WZW EINE POSITION WEITERSCHWENKEN
;      M 160.5  SCHRITT F5.2 WERKZEUGWENDER FREIFAHRMODE VERLASSEN
;      M 161.0  HM WZW-AUSBLASMAGNETVENTIL SCHALTEN
;      M 161.4  FM SONDERAUSLÖSUNG SCHRITT F3
;      M 161.5  FM SONDERAUSLÖSUNG SCHRITT F3
;      M 161.7  VERDREHSICHERUNG IM EINGRIFF
;      M 162.0  WERKZEUGWENDER FREIFAHREN AKTIV
;      M 162.1  VON FREIFAHRBAUSTEIN AUF REF.POS. FAHREN
;      M 162.2  SONDERSCHRITTKETTE WERKZEUGWENDER FREIFAHREN AKTIV
;      M 162.6  FM WERKZEUGWENDEN SOFORT ABBRECHEN BEI /NOT AUS,/TÜR AUF,/AUXON
;      M 162.7  FM WERKZEUGWENDEN SOFORT ABBRECHEN BEI RESET, /NOT AUS,/TÜR AUF,/AUXON
;      M 163.0  ABBRUCHMERKER VERRIEGELUNGSÜBERWACHUNG
;      M 163.1  SCHRITT 3.3.A VERRIEGELUNGSÜBERWACHUNG
;      M 163.2  FM WERKZEUGWENDEN ODER FREIFAHREN AKTIV
;      Z 3      WZW ISTPOSITIONSZÄHLER
;      Z 4      ZÄHLER FÜR MAXIMAL 8 HAUPTSPINDELUMDREHUNGEN WENN DAS WZW-POSITIONSBERO
;               DEN SIGNALZUSTAND NICHT ÄNDERT. (= ZÄHNE NICHT IM EINGRIFF,DANACH FÄHRT
;               DIE Z-ACHSE AUF DEN REF.PKT. HERUNTER.
;      Z 5      WZW SOLLPOSITIONSZÄHLER
;      T 13
;      T 14
;      T 15
NETWORK
TITLE = VON RUNDACHSE AUF SPINDEL UMSCHALTEN
O   DB15.DBX 20.4   // SCHRITT 4 IN DEN SETTINGDATEN SPEICHERN
O   DB15.DBX 20.5;  // SCHRITT 5.1 IN DEN SETTINGDATEN SPEICHERN
O   DB15.DBX 20.0;  // SCHRITT 3.3 IN DEN SETTINGDATEN SPEICHERN
U   M 151.6;        // FM WERKZEUGWENDER POSITIONSBERO
UN  M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
SPBN   M1006
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 549.3; // HA VON POSITIONIERBETRIEB AUF SPINDEL
R   M 155.7         // REGLERFREIGABE FUER HA BEIM WERKZEUGWENDEN
M1006:  NOP 0
NETWORK
TITLE =
O   M 115.0;        // SPINDEL IM RUNDACHSBETRIEB
O   M 155.7         // REGLERFREIGABE FUER HA BEIM WERKZEUGWENDEN
=   M 54.1;         // PARAMETERUMSCHALTUNG FUER LENZESERVO BEIM WERKZEUGWENDEN
NETWORK
TITLE = WZW-ABBRUCHMERKER IN DEN SETTINGDATEN LOESCHEN
U   M 151.5;        // FM WZW-TASTE
U   DB1.DBX 1374.4; // TASTE AUX-ON (PC)
SPBN   M001;
L   0;
T   DB15.DBB 25;    // WERKZEUGPOSITION IN DEN SETTINGDATEN
T   DB15.DBB 20;    // SCHRITT 4 IN DEN SETTINGDATEN LOESCHEN
T   MB 120;         //
T   MB 149;         //
T   MB 150;         //
T   MB 151;         //
T   MB 152;         //
T   MB 153;         //
T   MB 154;         //
T   MB 163;         //
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
R   DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
M001:  NOP 0;
NETWORK
TITLE = WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
U   M 163.2;        // FM WERKZEUGWENDEN ODER FREIFAHREN AKTIV
U   DB1.DBX 134.2;  // REFERENZPUNKT Z-ACHSE AKTIV
S   M 152.3;        // WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
UN  M 152.1;        // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
U   M 152.3;        // WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
U   E 4.3;          // BERO WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
R   M 152.3;        // WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
R   M 90.7;         // ACHSFREIGABE    K0
R   M 94.4;         // SPINDELFREIGABE
R   M 163.0         // ABBRUCHMERKER VERRIEGELUNGSÜBERWACHUNG
UN  M 152.1;        // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
U   M 152.3;        // WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
UN  E 4.3;          // BERO WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
O
U   M 120.7;        // FM REFERENZPUNKT Z-ACHSE AKTIV
UN  E 4.3;          // BERO WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
S   DB2.DBX 5.0;    // 6040 STAT.VERRIEGELUNGSÜBERW.
S   M 94.4;         // SPINDELFREIGABE
S   M 163.0         // ABBRUCHMERKER VERRIEGELUNGSÜBERWACHUNG
O   DB1.DBX 1370.2; // QUITTIERT. GEDRÜCKT (MSTT/PC)
O   DB1.DBX 1370.3; // RESET-TASTE GEDRUECKT
R   DB2.DBX 5.0;    // 6040 STAT.VERRIEGELUNGSÜBERW.
R   M 90.7;         // ACHSFREIGABE    K0
R   M 152.3;        // WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
NETWORK
TITLE = FM WERKZEUGWENDER POSITIONSBERO
U   E 4.0;          // WERKZEUGWENDER POSITIONSBERO
FP  M 151.6;        // FM WERKZEUGWENDER POSITIONSBERO
NETWORK
TITLE = FM WZW-TASTE  (MSTT/PC)
U   DB20.DBX 294.5; // WZW-TASTE  (MSTT/PC)
FP  M 151.5;        // FM WZW-TASTE
NETWORK
TITLE = WERKZEUGWENDEN SOFORT ABBRECHEN BEI /NOT AUS,/TÜR AUF,/AUXON
ON  M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
ON  M 50.2;         // NICHT NOT-AUS
ON  M 110.0;        // AUX-ON
FP  M 162.6     // FM WERKZEUGWENDEN SOFORT ABBRECHEN BEI /NOT AUS,/TÜR AUF,/AUXON
;       R   M 155.7         // REGLERFREIGABE FUER HA BEIM WERKZEUGWENDEN
R   M 152.3;        // WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
U   M 162.6     // FM WERKZEUGWENDEN SOFORT ABBRECHEN BEI /NOT AUS,/TÜR AUF,/AUXON
U   M 152.1         // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
SPBN M002;
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 3.3;   // C-ACHSPOSITIONIERUNG SOFORT STOPPEN
M002:  NOP 0;
NETWORK
TITLE = WERKZEUGWENDEN SOFORT ABBRECHEN BEI  RESET
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
O   DB1.DBX 1440.0; // RESET AUGELÖST
O   DB2.DBX 5.4;    // 6044  WZW POSITIONSÜBERWACHUNG
U   M 152.1         // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
R   M 152.3;        // WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
SPBN M003;
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 348.4; // REFERENZPUNKT DER RUNDACHSEN DEAKTIVIEREN
M003:  NOP 0;
NETWORK
TITLE = WERKZEUGWENDEN SOFORT ABBRECHEN BEI RESET, /NOT AUS,/TÜR AUF,/AUXON
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
O   DB1.DBX 1440.0; // RESET AUGELÖST
ON  M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
ON  M 50.2;         // NICHT NOT-AUS
ON  M 110.0;        // AUX-ON
O   M 152.2;        // WERKZEUGWENDER POSITIONSBERO ÜBERWACHUNG
FP  M 162.7 // FM WERKZEUGWENDEN SOFORT ABBRECHEN BEI RESET, /NOT AUS,/TÜR AUF,/AUXON
U   M 162.7 // FM WERKZEUGWENDEN SOFORT ABBRECHEN BEI RESET, /NOT AUS,/TÜR AUF,/AUXON
U   M 152.1         // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
SPBN M004
R   M 56.5;         // WZW-AUSBLASMAGNETVENTIL
R   M 152.6         // ANFORDERUNG WERKZEUGWENDER IM SCHRITT 4 WEITERSCHWENKEN
R   M 151.3;        // WERKZEUGWENDER STARTEN VON GÜLTIGEN T-WORT
R   M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
R   M 152.3;        // WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
R   Z 3;            // ISTZÄHLER LÖSCHEN
R   Z 5;            // SOLLZÄHLER LÖSCHEN
R   Z 4;
L   0
T   DB15.DBB 25     // WERKZEUGPOSITION IN DEN SETTINGDATEN
T   MB 160;         // SCHRITTKETTE LÖSCHEN
T   MB 161;         // SONDERSCHRITTKETTE
T   MW 165;         //
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
M004:  NOP 0
NETWORK
TITLE = WERKZEUGWENDEN ABBRECHEN BEI RESET, /NOT AUS,/TÜR AUF,/AUXON UND S1 ODER S2
O   M 150.1;        // SCHRITT 1 SPINDEL IN POSITIONIERBETRIEB SCHALTEN
O   M 150.2;        // SCHRITT 2 SPINDEL REFERENZIEREN
U   M 162.7 // FM WERKZEUGWENDEN SOFORT ABBRECHEN BEI RESET, /NOT AUS,/TÜR AUF,/AUXON
L   S5TIME#50MS;    //
SS  T 13
R   M 150.1;        // SCHRITT 1 SPINDEL IN POSITIONIERBETRIEB SCHALTEN
R   M 150.2;        // SCHRITT 2 SPINDEL REFERENZIEREN
R   M 152.3;        // WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
SPBN   M005
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 348.4; // REFERENZPUNKT DER RUNDACHSEN DEAKTIVIEREN
M005:  NOP 0
U   T 13
L   S5TIME#50MS;    //
SS  T 14
SPBN   M006
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 549.3; // HA VON POSITIONIERBETRIEB AUF SPINDEL
R   M 155.7         // REGLERFREIGABE FUER HA BEIM WERKZEUGWENDEN
R   T 13
M006:  NOP 0
U   T 14
R   M 94.7;         // SPINDELFREIGABE VON KANAL 0 SPERREN
R   M 90.7;         // ACHSFREIGABE    K0
R   T 14
NETWORK
TITLE = WZW ABBRUCH MERKER AUS DEN SETTINGDATEN SETZEN  FREIFAHREN!!
U   DB1.DBX 1370.0; // 1.SPS SCHLEIFENDURCHLAUF
U   DB15.DBX 20.4   // SCHRITT 4 IN DEN SETTINGDATEN SPEICHERN
S   M 153.0;        // WZW ABBRUCH MERKER AUS DEN SETTINGDATEN ZAHNRAD IM EINGRIFF
S   M 120.5         // WERKZEUGWENDEN IM SCHRITT4 ABGEBROCHEN
NETWORK
TITLE = WZW ABBRUCH MERKER AUS DEN SETTINGDATEN SETZEN  FREIFAHREN!!
O   DB15.DBX 20.5;  // SCHRITT 5.1 IN DEN SETTINGDATEN SPEICHERN
O   DB15.DBX 20.0;  // SCHRITT 3.3 IN DEN SETTINGDATEN SPEICHERN
U   DB1.DBX 1370.0; // 1.SPS SCHLEIFENDURCHLAUF
UN  E 4.3;          // BERO WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
S   M 153.0;        // WZW ABBRUCH MERKER AUS DEN SETTINGDATEN ZAHNRAD IM EINGRIFF
S   M 120.5         // WERKZEUGWENDEN IM SCHRITT4 ABGEBROCHEN
NETWORK
TITLE = WZW ABBRUCH MERKER AUS DEN SETTINGDATEN SETZEN  FREIFAHREN!!
U   DB15.DBX 20.1   // SCHRITT 3.2 IN DEN SETTINGDATEN SPEICHERN 8++++++++++
S   M 161.7         // VERDREHSICHERUNG IM EINGRIFF
;  NETWORK    8**********
;  TITLE = WERKZEUGPOSITION AUS DEN SETTINGDATEN SETZEN
;
;       U   DB1.DBX 1370.0; // 1.SPS SCHLEIFENDURCHLAUF
;       UN  M 153.0;        // WZW ABBRUCH MERKER AUS DEN SETTINGDATEN ZAHNRAD IM EINGRIFF
;    SPBN   M007
;       L   DB15.DBB 25;    // WERKZEUGPOSITION IN DEN SETTINGDATEN
;       L   0;
;       <>I;
;    SPBN   M007
;       L   DB15.DBB 25;    // WERKZEUGPOSITION IN DEN SETTINGDATEN
;       S   Z 3;
;       S   Z 5;
;       S   M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
;M007:  NOP 0
NETWORK
TITLE = WERKZEUGWENDEN ABBRECHEN MIT NOT AUS,TÜR AUF,RESET UND SCHRITT 4 AKTIV  FREIFAHREN!!
O   M 149.3;        // SCHRITT 3.3
O   M 150.4;        // SCHRITT 4 WZW AUF GÜLTIGE POSITION SCHWENKEN
O   M 149.4         // SCHRITT 5.1  Z-ACHSE 30MM ÜBER REF.PKT.FAHREN
U   M 162.7         // FM WERKZEUGWENDEN SOFORT ABBRECHEN BEI RESET, /NOT AUS,/TÜR AUF,/AUXON
S   M 153.1;        // WZW ABBRUCH MERKER 1 (NOT AUS ODER TÜR AUF UND ZAHNRAD IM EINGRIFF)
R   M 149.3;        // SCHRITT 3.3
R   M 150.4;        // SCHRITT 4 WZW AUF GÜLTIGE POSITION SCHWENKEN
R   M 149.4         // SCHRITT 5.1  Z-ACHSE 30MM ÜBER REF.PKT.FAHREN
R   M 152.3;        // WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
R   M 150.3;        // SCHRITT 3 Z-ACHSE AUF WERKZEUGWENDEPOSITION FAHREN
R   M 150.5;        // SCHRITT 5 Z-ACHSE AUF AUSGANGSPOSITION FAHREN
NETWORK
TITLE = WERKZEUGWENDEN ABBRECHEN VON NOT-AUS,TÜR AUF,RESET,AUX ON IN S3 ODER S5  FREIFAHREN!!
O   M 150.3;        // SCHRITT 3 Z-ACHSE AUF WERKZEUGWENDEPOSITION FAHREN
O   M 150.5;        // SCHRITT 5 Z-ACHSE AUF AUSGANGSPOSITION FAHREN
UN  M 153.1;        // WZW ABBRUCH MERKER 1 (NOT AUS ODER TÜR AUF UND ZAHNRAD IM EINGRIFF)
U   M 162.7         // FM WERKZEUGWENDEN SOFORT ABBRECHEN BEI RESET, /NOT AUS,/TÜR AUF,/AUXON
S   M 154.4;        // WZW ABBRUCH MERKER 4 (NOT-AUS,TÜR AUF,RESET IM SCHRITT S3,ODER S5)
R   M 150.3;        // SCHRITT 3 Z-ACHSE AUF WERKZEUGWENDEPOSITION FAHREN
R   M 149.1;        // SCHRITT 3.1 Z-ACHSE AUF WERKZEUGWENDEPOSITION FAHREN
R   M 149.2;        // SCHRITT 3.2 Z-ACHSE AUF WERKZEUGWENDEPOSITION FAHREN
R   M 149.3;        // SCHRITT 3.3 Z-ACHSE AUF WERKZEUGWENDEPOSITION FAHREN
R   M 150.5;        // SCHRITT 5 Z-ACHSE AUF AUSGANGSPOSITION FAHREN
R   M 152.3;        // WERKZEUGWENDER VERRIEGELUNGSÜBERWACHUNG
NETWORK
TITLE = WZW ABBRECHEN VON NOT-AUS,TÜR AUF,RESET,AUX ON IN S3 ODER S5 UND REFPKT NICHT AKTIV
U   M 154.4;        // WZW ABBRUCH MERKER 4 (NOT-AUS,TÜR AUF,RESET IM SCHRITT S3,ODER S5)
UN  DB20.DBX 324.4; // REFERENZPUNKT AKTIV
R   M 154.4;        // WZW ABBRUCH MERKER 4 (NOT-AUS,TÜR AUF,RESET IM SCHRITT S3,ODER S5)
R   DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
R   Z 3;            // ISTZÄHLER LÖSCHEN
R   Z 5;           // SOLLZÄHLER LÖSCHEN
R   M 90.7;         // ACHSFREIGABE    K0
NETWORK
TITLE = WERKZEUGWENDER POSITIONSBERO ÜBERWACHUNG
U   M 151.6;        // FM WERKZEUGWENDER POSITIONSBERO
S   M 148.5;        // HM FM WERKZEUGWENDER POSITIONSBERO
UN  E 4.0;          // WERKZEUGWENDER POSITIONSBERO
R   M 148.5;        // HM FM WERKZEUGWENDER POSITIONSBERO
UN  M 160.2;        // SCHRITT F2  SPINDEL REFERENZIEREN
UN  M 160.3;        // SCHRITT F3  WZW POSITIONSBERO SUCHEN
UN  M 160.4;        // SCHRITT F4  WZW EINE POSITION WEITERSCHWENKEN
UN  M 150.3;        // SCHRITT 3 Z-ACHSE AUF WERKZEUGWENDEPOSITION FAHREN
UN  M 150.4;        // SCHRITT 4 WZW AUF GÜLTIGE POSITION SCHWENKEN
UN  M 150.5;        // SCHRITT 5 Z-ACHSE AUF AUSGANGSPOSITION FAHREN
UN  M 153.0;        // WZW ABBRUCH MERKER AUS DEN SETTINGDATEN ZAHNRAD IM EINGRIFF
UN  M 153.1;        // WZW ABBRUCH MERKER 1 (NOT AUS ODER TÜR AUF UND ZAHNRAD IM EINGRIFF)
UN  M 154.4;        // WZW ABBRUCH MERKER 4 (NOT-AUS,TÜR AUF,RESET IM SCHRITT S3,ODER S5)
UN  M 120.0         // ZUERST HS DANN Z-ACHSE REFERENZIEREN
U   M 148.5;        // HM FM WERKZEUGWENDER POSITIONSBERO
L   S5T#0S300MS;    // 200 MS
SE  T 30;           // STARTEN T30 ALS EINSCHALTVERZ.
U   T 30;           // STARTEN T30 ALS EINSCHALTVERZ.
S   DB2.DBX 5.4;    // 6044  WZW POSITIONSÜBERWACHUNG
NETWORK
TITLE = WERKZEUGWENDER POSITIONSBERO ÜBERWACHUNG
O   DB2.DBX 5.3;    // 6043  WZW POSITIONSÜBERWACHUNG
O   DB2.DBX 5.4;    // 6044  WZW POSITIONSÜBERWACHUNG
O   DB2.DBX 5.5;    // 6045  WZW POSITIONSÜBERWACHUNG
O   DB2.DBX 5.6;    // 6046  WZW POSITIONSÜBERWACHUNG
=   M 152.2;        // WERKZEUGWENDER POSITIONSBERO ÜBERWACHUNG
SPBN   M008;
L   0;
T   DB15.DBB 25;    // WERKZEUGPOSITION IN DEN SETTINGDATEN
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
R   M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
M008:  NOP 0
NETWORK
TITLE = WZW-BERO ÜBERWACHUNG RESETIEREN
O   DB1.DBX 1370.0; // 1.SPS SCHLEIFENDURCHLAUF
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT (MSTT)
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   M 148.5;        // HM FM WERKZEUGWENDER POSITIONSBERO
R   DB2.DBX 5.3;    // 6043  WZW POSITIONSÜBERWACHUNG
R   DB2.DBX 5.4;    // 6044  WZW POSITIONSÜBERWACHUNG
R   DB2.DBX 5.5;    // 6045  WZW POSITIONSÜBERWACHUNG
R   DB2.DBX 5.6;    // 6046  WZW POSITIONSÜBERWACHUNG
NETWORK
TITLE = WZW FREIGABE
UN  M 94.0;         // AUX-ON  SFG
U   M 131.0;        // HA BETRIEBSBEREIT
UN  M 113.0;        // SONDERBETRIEB AKTIV
UN  DB3.DBX 0.1;    // 7001  KEIN M6 PROGRAMMIERT
UN  M 120.0         // ZUERST HS DANN Z-ACHSE REFERENZIEREN
=   M 151.1;        // WZW FREIGABE
NETWORK
TITLE = WZW/SCHWENKEN VON WZW-TASTE
O   M 151.5;        // FM WZW-TASTE
;8***********8       UN  M 100.2;          // VORSCHUBSCHALTER AUF 0%
UN  DB20.DBX 326.1; // BETRIEBSART EDIT
UN  DB20.DBX 326.2; // BETRIEBSART MDI
UN  DB20.DBX 326.4; // BETRIEBSART AUTOMATIK
UN  DB20.DBX 327.2; // BETRIEBSART REFERENZ
O   DB20.DBX 302.0; // DNC/WZW SCHWENKEN
U   M 114.3;        // HA ISTDREHZAHL KLEINER 20U/MIN
UN  M 152.0;        // WERKZEUGWENDEN AKTIV
UN  DB20.DBX 324.0; // PROGRAMM LÄUFT
=   M 151.4         // WERKZEUGWENDER START VON WZW-TASTE
NETWORK
TITLE = MIT DER WZW-TASTE DEN POSITIONSWERT FÜR HAUPSPINDEL ÜBERGEBEN
U   M 151.4;        // WERKZEUGWENDER START VON WZW-TASTE
U   M 151.1;        // WZW FREIGABE
SPBN   M009;
S   M 155.3;        // SOLLZÄHLER VORWÄRTS ZÄHLEN
L   DB10.DBD 26;    // POSITIONS-WERT AUS MSD-FILE(720 = 2 HAUPTSPINDELUMDR.)
T   MD 156;         // DOPPELWORT MIT SCHWENKPOSITION IN GRAD FÜR HAUPTSPINDEL (FLOATWWERT)
U   DB20.DBX 295.0  // TASTE 12
U   M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
SPBN   M009;
S   M 155.4;        // SOLLZÄHLER RÜCKWÄRTS ZÄHLEN
R   M 155.3;        // SOLLZÄHLER VORWÄRTS ZÄHLEN
L   MD 156;         // DOPPELWORT MIT SCHWENKPOSITION IN GRAD FÜR HAUPTSPINDEL (FLOATWWERT)
L   -1E+00;         // WZW-SCHWENKRICHTUNG UMKEHREN
*R;
T   MD 156;         // DOPPELWORT MIT SCHWENKPOSITION IN GRAD FÜR HAUPTSPINDEL (FLOATWWERT)
M009:  NOP 0;
NETWORK
TITLE = SOLLZÄHLER VON WZW-TASTE SETZEN
U   M 155.3;        // SOLLZÄHLER VORWÄRTS ZÄHLEN
ZV  Z 5;
R   M 155.3;        // SOLLZÄHLER VORWÄRTS ZÄHLEN
L   Z 5;
L   11;
>=I;
L   Z#1;
S   Z 5;
U   M 155.4;        // SOLLZÄHLER RÜCKWÄRTS ZÄHLEN
ZR  Z 5;
R   M 155.4;        // SOLLZÄHLER RÜCKWÄRTS ZÄHLEN
L   Z 5;
L   0;
==I;
L   Z#10;
S   Z 5;
NETWORK
TITLE = 7000  FALSCHES T-WORT PROGRAMMIERT
L   DB20.DBW 184;   // LADE T-WORT
L   10;             // LADE KONSTANTE DEZ 10
>I;                 // VERGLEICH AUF GRÖSSER
=   M 155.0         // T-WORT GRÖSSER 10
L   DB20.DBW 184;   // LADE T-WORT
L   1;              // LADE KONSTANTE DEZ 1
<I;                 // VERGLEICH AUF KLEINER
=   M 155.1         // T-WORT KLEINER 1
O   M 155.0         // T-WORT GRÖSSER 10
O   M 155.1         // T-WORT KLEINER 1
U   DB20.DBX 182.0  // NEUES T-WORT (WERKZEUG)
S   DB3.DBX 0.0;    // 7000  FALSCHES T-WORT
U   DB3.DBX 0.0;    // 7000  FALSCHES T-WORT
=   M 90.2;         // ACHSFREIGABE    K0
=   M 94.5;         // SPINDELFREIGABE VON KANAL 0 SPERREN
U   DB1.DBX 1370.3; // TASTE RESET GEDRÜCKT (MSTT)
R   DB3.DBX 0.0;    // 7000  FALSCHES T-WORT
NETWORK
TITLE = T-WORT IST GÜLTIG
L   DB20.DBW 184;   // T-WORT
L   Z 3;            // ISTZÄHLER
<>I;                // VERGLEICH AUF UNGLEICH
=   M 155.2         // T-WORT UNGLEICH ISTZÄHLER
NETWORK
TITLE = SOLLZÄHLER SETZEN ZUM ÜBERWACHEN OB M6 PROGRAMMIERT WIRD (NUR AUTOMATIKBETRIEB)
U   M 155.2         // T-WORT UNGLEICH ISTZÄHLER
U   DB20.DBX 182.0  // NEUES T-WORT (WERKZEUG)
U   M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
UN  DB3.DBX 0.0;    // 7000  FALSCHES T-WORT
S   M 155.6         // NEUES T-WORT GESPEICHERT FÜR MELDUNG 7001
SPBN M111
L   DB20.DBW 184;   // T-WORT
S   Z 5;            // SOLLZÄHLER
M111:  NOP 0
NETWORK
TITLE = T-WORT IST GÜLTIG HAUPTSPINDEL STOPPEN
O   M 155.2         // T-WORT UNGLEICH ISTZÄHLER
U   M 151.1;        // WZW FREIGABE
UN  DB3.DBX 0.0;    // 7000  FALSCHES T-WORT
U(
O   DB20.DBX 192.6; // M6 DYN.
O(
U   DB20.DBX 182.0  // NEUES T-WORT (WERKZEUG)
U   DB1.DBX 1402.2; // EMCOTRONIC TM02 OBERFLÄCHE AKTIV
)
)
S   M 94.7;         // SPINDELFREIGABE VON KANAL 0 SPERREN
S   M 90.7;         // ACHSFREIGABE    K0
S   M 151.2;        // T-WORT IST GÜLTIG
R   M 155.6         // NEUES T-WORT GESPEICHERT FÜR MELDUNG 7001
SPBN M211
L   DB20.DBW 184;   // T-WORT
S   Z 5;            // SOLLZÄHLER
M211:  NOP 0
NETWORK
TITLE = 7001  KEIN M6 PROGRAMMIERT
L   Z 3;            // ISTZÄHLER
L   Z 5;            // SOLLZÄHLER
<>I;                // VERGLEICH AUF UNGLEICH
=   M 155.5         // SOLLZÄHLER UNGLEICH ISTZÄHLER
O   DB20.DBX 544.0  // GERADENBEWEGUNG AKTIV
O   DB20.DBX 544.1  // GERADE MIT EILGANG AKTIV
O   DB20.DBX 544.2  // KREISBEWEGUNG AKTIV
O   DB20.DBX 544.3  // HELIX AKTIV
O   DB20.DBX 544.4  // GEWINDE AKTIV
O   DB20.DBX 544.5  // C-ACHS-BETRIEB
U   M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
UN  DB20.DBX 324.1; // STOP-ZUSTAND
UN  DB20.DBX 324.3; // SATZVORLAUF
U   M 155.5         // SOLLZÄHLER UNGLEICH ISTZÄHLER
U   M 155.6         // NEUES T-WORT GESPEICHERT FÜR MELDUNG 7001
S   DB3.DBX 0.1;    // 7001  KEIN M6 PROGRAMMIERT
R   M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
R   Z50
R   Z52
U   DB3.DBX 0.1;    // 7001  KEIN M6 PROGRAMMIERT
=   M 90.4;         // ACHSFREIGABE    K0
=   M 94.6;         // SPINDELFREIGABE VON KANAL 0 SPERREN
U   DB1.DBX 1370.3; // TASTE RESET GEDRÜCKT (MSTT)
R   DB3.DBX 0.1;    // 7001  KEIN M6 PROGRAMMIERT
R   M 155.6         // NEUES T-WORT GESPEICHERT FÜR MELDUNG 7001
NETWORK
TITLE = WZW-SCHWENKEN VON T-WORT
U   M 151.2;        // T-WORT IST GÜLTIG
U   M 114.3;        // HA ISTDREHZAHL KLEINER 20U/MIN
UN  DB20.DBX 340.5; // SPINDELFREIGABE
S   M 151.3;        // WERKZEUGWENDER STARTEN VON GÜLTIGEN T-WORT
R   M 151.2;        // T-WORT IST GÜLTIG
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
O   DB1.DBX 1440.0; // RESET AUGELÖST
U   M 151.2;        // T-WORT IST GÜLTIG
UN  M 151.3;        // WERKZEUGWENDER STARTEN VON GÜLTIGEN T-WORT
R   M 94.7;         // SPINDELFREIGABE VON KANAL 0 SPERREN
R   M 90.7;         // ACHSFREIGABE    K0
R   M 151.2;        // T-WORT IST GÜLTIG
NETWORK
TITLE = WEITERSCHWENKEN WENN DER WZW NICHT REFERENZIERT IST
U   M 151.3;        // WERKZEUGWENDER STARTEN VON GÜLTIGEN T-WORT
UN  M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
S   M 152.6;        // ANFORDERUNG WERKZEUGWENDER IM SCHRITT 4 WEITERSCHWENKEN
NETWORK
TITLE = 7022 MELDUNG WERKZEUGWENDER INITIALISIEREN
O   M 153.0;        // WZW ABBRUCH MERKER AUS DEN SETTINGDATEN ZAHNRAD IM EINGRIFF
O   M 153.1;        // WZW ABBRUCH MERKER 1 (NOT AUS)
O   M 154.4;        // WZW ABBRUCH MERKER 4 (NOT-AUS,TÜR AUF,RESET IM SCHRITT S3,ODER S5)
O   DB2.DBX 5.0;    // 6040 STAT.VERRIEGELUNGSÜBERW.
UN  DB3.DBX 5.2;    // 7042  MASCHINENTÜR INIT.
UN  DB3.DBX 2.4;    // 7020  SONDERBETRIEB AKTIV
UN  DB3.DBX 5.0;    // 7040  MASCHINENTÜR OFFEN
UN  DB3.DBX 2.0;    // 7016  HILFSANTRIEBE EINSCHALTEN
UN  DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
U   M 110.0;        // AUX-ON
S   DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
O   DB3.DBX 2.0;    // 7016  HILFSANTRIEBE EINSCHALTEN
O   DB3.DBX 5.0;    // 7040  MASCHINENTÜR OFFEN
R   DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
NETWORK
TITLE = WERKZEUGWENDEN ODER FREIFAHREN AKTIV
O   M 152.0;        // WERKZEUGWENDEN AKTIV
O   M 162.0;        // WERKZEUGWENDER FREIFAHREN AKTIV
O   M 162.2;        // SONDERSCHRITTKETTE WERKZEUGWENDER FREIFAHREN AKTIV
=   M 152.1;        // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
FP  M 163.2;        // FM WERKZEUGWENDEN ODER FREIFAHREN AKTIV
NETWORK
TITLE = WERKZEUGPOSITIONEN VORWAERTS ZÄHLEN
U   M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
U   M 150.4;        // SCHRITT 4 WZW AUF GÜLTIGE POSITION SCHWENKEN
U   M 151.6;        // FM WERKZEUGWENDER POSITIONSBERO
U   M 154.5;        // - NEUE WZW-TROMMEL POSITION IST IN MINUSRICHTUNG
ZV  Z 3;
SPBN M010;
CLR;
S   Z 3;
L   Z 3;
L   25;
>=I;
L   Z#1;
S   Z 3;
L   Z 3;
L   11;
>=I;
L   Z#25;
S   Z 3;
M010:  NOP 0;
NETWORK
TITLE = WERKZEUGPOSITIONEN RÜCKWAERTS ZÄHLEN
U   M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
U   M 150.4;        // SCHRITT 4 WZW AUF GÜLTIGE POSITION SCHWENKEN
U   M 151.6;        // FM WERKZEUGWENDER POSITIONSBERO
U   M 154.6;        // + NEUE WZW-TROMMEL POSITION IST IN PLUSRICHTUNG
ZR  Z 3;
SPBN M011;
CLR;
S   Z 3;
L   Z 3;
L   18;
>=I;
L   Z#10;
S   Z 3;
L   Z 3;
L   0;
==I;
L   Z#19;
S   Z 3;
M011:  NOP 0;
NETWORK
TITLE = WERKZEUGPOSITION IN DEN SETTINGDATEN SPEICHERN
U   M 150.4;        // SCHRITT 4 WZW AUF GÜLTIGE POSITION SCHWENKEN
U   M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
U   DB25.DBX 332.0; // NC-SATZ FERTIG
SPBN M012;
L   Z 3;           // LADE ISTZÄHLER
T   DB20.DBW 356;   // AKTIVES WERKZEUG IN DB20
T   DB15.DBB 25;    // WERKZEUGPOSITION IN DEN SETTINGDATEN
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
M012:  NOP 0;
NETWORK
TITLE = STEUERUNG ZUM REFERENZIEREN DES WERKZEUGWENDERS
UN  M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
UN  M 153.0;        // WZW ABBRUCH MERKER AUS DEN SETTINGDATEN ZAHNRAD IM EINGRIFF
UN  M 153.1;        // WZW ABBRUCH MERKER 1 (NOT AUS UND ZAHNRAD IM EINGRIFF)
UN  M 154.4;        // WZW ABBRUCH MERKER 4 (NOT-AUS,TÜR AUF,RESET IM SCHRITT S3,ODER S5)
CC    FC 50;          // STEUERUNG ZUM REFERENZIEREN DES WERKZEUGWENDERS
NETWORK
TITLE = STEUERUNG ZUM SCHWENKEN DES WERKZEUGWENDERS
U   M 151.3;        // WERKZEUGWENDER STARTEN VON GÜLTIGEN T-WORT
U   M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
U   DB25.DBX 332.0; // NC-SATZ FERTIG
U(
O   M 150.3         // SCHRITT 3 Z-ACHSE AUF WERKZEUGWENDEPOSITION FAHREN
O   M 152.6         // ANFORDERUNG WERKZEUGWENDER IM SCHRITT 4 WEITERSCHWENKEN
)
UN  M 153.0;        // WZW ABBRUCH MERKER AUS DEN SETTINGDATEN ZAHNRAD IM EINGRIFF
UN  M 153.1;        // WZW ABBRUCH MERKER 1 (NOT AUS UND ZAHNRAD IM EINGRIFF)
UN  M 154.4;        // WZW ABBRUCH MERKER 4 (NOT-AUS,TÜR AUF,RESET IM SCHRITT S3,ODER S5)
CC    FC 51;          // STEUERUNG ZUM SCHWENKEN DES WERKZEUGWENDERS
NETWORK
TITLE = WERKZEUGWENDER FREIFAHREN
O   M 153.0;        // WZW ABBRUCH MERKER AUS DEN SETTINGDATEN ZAHNRAD IM EINGRIFF
O   M 153.1;        // WZW ABBRUCH MERKER 1 (NOT AUS UND ZAHNRAD IM EINGRIFF)
O   M 154.4;        // WZW ABBRUCH MERKER 4 (NOT-AUS,TÜR AUF,RESET IM SCHRITT S3,ODER S5)
UN  M 152.0;        // WERKZEUGWENDEN AKTIV
CC    FC 52;          // WERKZEUGWENDER FREIFAHREN
NETWORK
TITLE = WERKZEUGWENDER REFERENZIEREN UND SCHWENKEN
UN  M 153.0;        // WZW ABBRUCH MERKER AUS DEN SETTINGDATEN ZAHNRAD IM EINGRIFF
UN  M 153.1;        // WZW ABBRUCH MERKER 1 (NOT AUS UND ZAHNRAD IM EINGRIFF)
UN  M 154.4;        // WZW ABBRUCH MERKER 4 (NOT-AUS,TÜR AUF,RESET IM SCHRITT S3,ODER S5)
O   M 152.0;        // WERKZEUGWENDEN AKTIV
CC    FC 53;          // WERKZEUGWENDER REFERENZIEREN UND SCHWENKEN
END_FUNCTION
FUNCTION FC 51 : VOID
NAME: STEUERUNG ZUM SCHWENKEN DES WERKZEUGWENDERS
BEGIN
NETWORK
TITLE = DIFFERENZ T-WORT/ISTZÄHLER
L   DB20.DBW 184;   // LADE T-WORT
L   Z 3;           // LADE ISTZÄHLER
-I;                 // SUBTRAKTION
T   MW 156;         // TRANSFERIERE MW156
NETWORK
TITLE = ZÄHLERDIFFERENZ < 0
L   MW 156;         // LADE MW 156
L   0;              // LADE KONSTANTE DEZ 0
>=I;                // VERGLEICH AUF GRÖSSER GLEICH
SPB M001;
L   MW 156;         // LADE MW 156
L   10;             // LADE KONSTANTE DEZ 10
+I;                 // ADDITION
T   MW 156;         // TRANSFERIERE IN MW 156
M001: NOP 0;
NETWORK
TITLE = ZÄHLERDIFFERENZ > 5
L   MW 156;         // LADE MW 156
L   5;              // LADE KONSTANTE DEZ 5
<=I;                // VERGLEICH AUF KLEINER GLEICH
SPB M002;
L   MW 156;         // LADE MW 156
L   10;             // LADE KONSTANTE DEZ 10
-I;                 // SUBTRAKTION
T   MW 156;         // TRANSFERIERE IN MW 156
M002: NOP 0;
NETWORK
TITLE = AUSGEBEN EINER NEUEN POSITION FÜR HAUPTSPINDEL
L   MW 156;         // LADE MW 156
ITD                 // VON 16 BIT GANZZAHL AUF 32 BIT GANZZAHL UMWANDELN
T   MD 156;
L   MD 156;         // LADE MD 156
DTR                 // VON 16 BIT GANZZAHL AUF 32 BIT FLOATWERT UMWANDELN
T   MD 156;
L   DB10.DBD 26;    // POSITIONS-WERT AUS MSD-FILE(720 = 2 HAUPTSPINDELUMDR.)
L   MD 156;         // LADE MD 156
*R
T   MD 156;         // DOPPELWORT MIT SCHWENKPOSITION IN GRAD FÜR HAUPTSPINDEL (FLOATWWERT)
SET;
R   M 152.6;        // ANFORDERUNG WERKZEUGWENDER IM SCHRITT 4 WEITERSCHWENKEN
END_FUNCTION
FUNCTION FC 50 : VOID
NAME: STEUERUNG ZUM REFERENZIEREN DES WERKZEUGWENDERS
BEGIN
NETWORK
TITLE = WERKZEUGWENDER REFERENZIEREN
U   M 150.4;        // SCHRITT 4 WZW AUF GÜLTIGE POSITION SCHWENKEN
U   M 151.6;        // FM WERKZEUGWENDER POSITIONSBERO
ZV  Z 3;           // IST-ZÄHLWER VORWÄRTZ ZÄHLEN
L   Z 3;           // IST-ZÄHLER
L   2;              // LADE 2
==I;                // VERGLEICH AUF GLEICH
S   M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
L   1;              // LADE 1
S   Z 3;           // ISTZÄHLER AUF 1 SETZEN
U   M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
UN  M 151.3;        // WERKZEUGWENDER STARTEN VON GÜLTIGEN T-WORT
L   1;              // LADE 1
S   Z 5;            // SOLLZÄHLER AUF 1 SETZEN
U   M 150.4;        // SCHRITT 4 WZW AUF GÜLTIGE POSITION SCHWENKEN
U   DB25.DBX 332.0; // NC-SATZ FERTIG
UN  M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
R   Z 3;           // ISTZÄHLER LÖSCHEN
U   M 152.6;        // ANFORDERUNG WERKZEUGWENDER IM SCHRITT 4 WEITERSCHWENKEN
=   M 152.7;        // WERKZEUGWENDER IM SCHRITT 4 WEITERSCHWENKEN
SPBN M001
L   DB10.DBD 26;    // POSITIONS-WERT AUS MSD-FILE(720 = 2 HAUPTSPINDELUMDR.)
T   MD 156;         // DOPPELWORT MIT SCHWENKPOSITION IN GRAD FÜR HAUPTSPINDEL (FLOATWWERT)
M001:  NOP 0
END_FUNCTION
FUNCTION FC 55
NAME: WERKZEUGWENDER EINSTELLARBEITEN
BEGIN
NETWORK
TITLE = OFFSET VON HAUPTANTRIEB EINSTELLEN
O   DB20.DBX 198.1; // M49 DYN.    8****************
S   M 153.7         // OFFSET VON HAUPTANTRIEB EINSTELLEN
O   DB20.DBX 198.2; // M50 DYN.    8****************
R   M 153.7         // OFFSET VON HAUPTANTRIEB EINSTELLEN
NETWORK
TITLE = SPINDEL IN POSITIONIERBETRIEB SCHALTEN
U   DB20.DBX 198.3; // M51 DYN.
U   M 151.1;        // WZW FREIGABE
SPBN M101;
;8(((((       S   M 94.3;         // SPINDELFREIGABE K0
S   DB25.DBX 340.3; // EINLESEFREIGABE K1
S   DB25.DBX 340.4; // ACHSFREIGABE    K1
S   M 155.7         // REGLERFREIGABE FUER HA BEIM WERKZEUGWENDEN
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 549.2; // SPINDEL in den Positionierbetrieb
M101:  NOP 0;
NETWORK
TITLE = SPINDEL IN SPIDELBETRIEB SCHALTEN
U   DB20.DBX 198.4; // M52 DYN.
SPBN M106;
R   DB25.DBX 340.4; // ACHSFREIGABE    K1
R   M 155.7         // REGLERFREIGABE FUER HA BEIM WERKZEUGWENDEN
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 549.3; // HA VON POSITIONIERBETRIEB AUF SPINDEL
O   DB25.DBX 332.0; // NC-SATZ FERTIG
R   DB25.DBX 340.3; // EINLESEFREIGABE K1
R   M 94.3;         // SPINDELFREIGABE K0
M106:  NOP 0
NETWORK
TITLE = SPINDEL REFERENZIEREN UND AUF 90GRAD EINSTELLEN
U   DB20.DBX 198.5; // M53 DYN. & H-WORT
SPBN M102;
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 548.5; // GENAUHALTMODUS SETZEN
=   DB25.DBX 549.0; // G1 WIRD AUSGELÖST
=   DB25.DBX 549.4; // VORSCHUB IN GRAD/S WERT IN DBD556
L   +2.88E+03;
T   DB25.DBD 556;   // F-WERT IN M/S ODER M/U
S   DB25.DBX 21.4;  // POSITIONSANFORDERUNG FÜR KANALACHSE C
L   DB20.DBD 606    // Daten für H-Code als Float Wert
T   DB25.DBD 70;    // POSITIONSWERT FÜR KANALACHSE C
M102:  NOP 0;
END_FUNCTION
FUNCTION FC 53 : VOID
NAME: WERKZEUGWENDER REFERENZIEREN UND SCHWENKEN
BEGIN
NETWORK
TITLE = SCHRITT 1  SPINDEL IN POSITIONIERBETRIEB SCHALTEN
O   M 151.3;        // WERKZEUGWENDER STARTEN VON GÜLTIGEN T-WORT
O   M 151.4;        // WERKZEUGWENDER START VON WZW-TASTE
U(
ON  DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
O   M 163.0         // ABBRUCHMERKER VERRIEGELUNGSÜBERWACHUNG
)
UN  M 152.0;        // WERKZEUGWENDEN AKTIV
U   M 151.1;        // WZW FREIGABE
U   DB1.DBX 134.2;  // REFERENZPUNKT Z-ACHSE AKTIV
S   M 150.1;        // SCHRITT 1
SPBN M101;
S   M 94.7;         // SPINDELFREIGABE K0
S   M 90.7;         // ACHSFREIGABE    K0
S   DB25.DBX 340.3; // EINLESEFREIGABE K1
S   DB25.DBX 340.4; // ACHSFREIGABE    K1
S   M 155.7         // REGLERFREIGABE FUER HA BEIM WERKZEUGWENDEN
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 549.2; // SPINDEL in den Positionierbetrieb
M101:  NOP 0;
NETWORK
TITLE = SCHRITT 2  SPINDEL REFERENZIEREN
U   M 150.1;        // SCHRITT 1
U   DB25.DBX 332.0; // NC-SATZ FERTIG
UN  M 163.0         // ABBRUCHMERKER VERRIEGELUNGSÜBERWACHUNG
R   M 150.1;        // SCHRITT 1
S   M 150.2;        // SCHRITT 2
R   DB25.DBX 332.0; // NC-SATZ FERTIG
SPBN M102;
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 548.5; // GENAUHALTMODUS SETZEN
=   DB25.DBX 549.0; // G1 WIRD AUSGELÖST
=   DB25.DBX 549.4; // VORSCHUB IN GRAD/S WERT IN DBD556
L   +2.88E+03;
T   DB25.DBD 556;   // F-WERT IN M/S ODER M/U
S   DB25.DBX 21.4;  // POSITIONSANFORDERUNG FÜR KANALACHSE C
L   DB10.DBD 18;    // POSITIONS-OFFSETWERT AUS MSD-FILE
T   DB25.DBD 70;    // POSITIONSWERT FÜR KANALACHSE C
M102:  NOP 0;
NETWORK
TITLE = SCHRITT 3.1  Z-ACHSE AUF REF.PKT.FAHREN
U   M 150.2;        // SCHRITT 2
U   DB25.DBX 332.0; // NC-SATZ FERTIG
R   M 150.2;        // SCHRITT 2
R   DB25.DBX 332.0; // NC-SATZ FERTIG
S   M 150.3;        // SCHRITT 3
S   M 149.1;        // SCHRITT 3.1
SPBN M103;
S   DB15.DBX 20.3   // SCHRITT 3 IN DEN SETTINGDATEN SPEICHERN
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 548.6; // BLOCKUEBERGANG
=   DB25.DBX 549.0; // G1 WIRD AUSGELÖST
=   DB25.DBX 548.2; // VORSCHUB IN METER/SEKUNDE WERT IN DBD556
L   DB10.DBD 38;    // Z-EILGANG AUS MSD
T   DB25.DBD 556;   // F-WERT IN M/S ODER M/U
=   DB25.DBX 20.2;  // POSITIONSANFORDERUNG FÜR Z-ACHSE
L   DB1.DBD 78      // REF.POSITION FÜR Z-ACHSE FLOATWERT IN M
T   DB25.DBD 30;    // POSITIONSWERT FÜR Z-ACHSE
M103:  NOP 0;
NETWORK
TITLE = SCHRITT 3.2  Z-ACHSE 30MM ÜBER REF.PKT.FAHREN
U   M 150.3;        // SCHRITT 3
U   M 149.1;        // SCHRITT 3.1
O(
U   M 163.0         // ABBRUCHMERKER VERRIEGELUNGSÜBERWACHUNG
U   M 150.1;        // SCHRITT 1
)
U   DB25.DBX 332.0; // NC-SATZ FERTIG
R   M 150.1;        // SCHRITT 1
R   M 149.1;        // SCHRITT 3.1
R   DB25.DBX 332.0; // NC-SATZ FERTIG
S   M 150.3;        // SCHRITT 3
S   M 149.2;        // SCHRITT 3.2
S   M 161.7         // VERDREHSICHERUNG IM EINGRIFF
SPBN M104;
;       S   DB15.DBX 20.3   // SCHRITT 3 IN DEN SETTINGDATEN SPEICHERN
S   DB15.DBX 20.1   // SCHRITT 3.2 IN DEN SETTINGDATEN SPEICHERN 8++++++++++
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 548.6; // BLOCKUEBERGANG
=   DB25.DBX 549.0; // G1 WIRD AUSGELÖST
=   DB25.DBX 548.2; // VORSCHUB IN METER/SEKUNDE WERT IN DBD556
L   DB10.DBD 42;    // Z-SCHLEICHGANG FÜR WERKZEUGAUSSTOSS
T   DB25.DBD 556;   // F-WERT IN M/S ODER M/U
=   DB25.DBX 20.2;  // POSITIONSANFORDERUNG FÜR Z-ACHSE
L   DB1.DBD 78;     // REF.POSITION FÜR Z-ACHSE FLOATWERT IN M
L   +0.04;
;8**********       L   DB10.DBD 46;    // Z-WERT SCHLEICHWEG IN M FÜR WERKZEUGAUSSTOSS
+R
T   DB25.DBD 30;    // POSITIONSWERT FÜR Z-ACHSE
M104:  NOP 0;
NETWORK
TITLE = SCHRITT 3.3.A  SPINDEL REFERENZIEREN WENN VERRIEGELUNGSÜBERWACHUNG AUSGELÖST
U   M 163.0         // ABBRUCHMERKER VERRIEGELUNGSÜBERWACHUNG
U   M 149.2;        // SCHRITT 3.2
U   DB25.DBX 332.0; // NC-SATZ FERTIG
UN  M 163.1         // SCHRITT 3.3.A VERRIEGELUNGSÜBERWACHUNG
R   DB25.DBX 332.0; // NC-SATZ FERTIG
S   M 163.1         // SCHRITT 3.3.A VERRIEGELUNGSÜBERWACHUNG
SPBN M2102;
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 548.5; // GENAUHALTMODUS SETZEN
=   DB25.DBX 549.0; // G1 WIRD AUSGELÖST
=   DB25.DBX 549.4; // VORSCHUB IN GRAD/S WERT IN DBD556
L   +2.88E+03;
T   DB25.DBD 556;   // F-WERT IN M/S ODER M/U
S   DB25.DBX 21.4;  // POSITIONSANFORDERUNG FÜR KANALACHSE C
L   DB10.DBD 18;    // POSITIONS-OFFSETWERT AUS MSD-FILE
T   DB25.DBD 70;    // POSITIONSWERT FÜR KANALACHSE C
M2102:  NOP 0;
NETWORK
TITLE = SCHRITT 3.3.B  Z-ACHSE AUF WERKZEUGWENDEPOSITION FAHREN
U   M 150.3;        // SCHRITT 3
U   M 149.2;        // SCHRITT 3.2
U   DB25.DBX 332.0; // NC-SATZ FERTIG
R   M 149.2;        // SCHRITT 3.2
R   DB25.DBX 332.0; // NC-SATZ FERTIG
R   M 163.1         // SCHRITT 3.3.A VERRIEGELUNGSÜBERWACHUNG
S   M 149.3;        // SCHRITT 3.3
SPBN M105;
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 548.5; // GENAUHALTMODUS SETZEN
=   DB25.DBX 549.0; // G1 WIRD AUSGELÖST
=   DB25.DBX 548.2; // VORSCHUB IN METER/SEKUNDE WERT IN DBD556
S   DB15.DBX 20.0;  // SCHRITT 3.3 IN DEN SETTINGDATEN SPEICHERN
R   DB15.DBX 20.1   // SCHRITT 3.2 IN DEN SETTINGDATEN SPEICHERN   8++++++
R   M 161.7         // VERDREHSICHERUNG IM EINGRIFF 8+++++
S   M 120.5         // WERKZEUGWENDEN IM SCHRITT4 ABGEBROCHEN
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
L   DB10.DBD 38;    // Z-EILGANG AUS MSD
T   DB25.DBD 556;   // F-WERT IN M/S ODER M/U
=   DB25.DBX 20.2;  // POSITIONSANFORDERUNG FÜR Z-ACHSE
L   DB10.DBD 22;    // POSITIONSWERT FÜR Z-ACHSE AUS MSD-FILE
T   DB25.DBD 30;    // POSITIONSWERT FÜR Z-ACHSE
M105:  NOP 0;
NETWORK
TITLE = WZW-BERO ÜBERWACHUNG BEIM HOCHFAHREN
U   M 150.3;        // SCHRITT 3
U   M 149.3;        // SCHRITT 3.3
U   DB25.DBX 332.0; // NC-SATZ FERTIG
UN  E 4.0;          // WERKZEUGWENDER POSITIONSBERO
R   DB25.DBX 332.0; // NC-SATZ FERTIG
S   DB2.DBX 5.5;    // 6045  WZW POSITIONSÜBERWACHUNG
NETWORK
TITLE = SCHRITT 4  WZW AUF GÜLTIGE POSITION SCHWENKEN
U   M 149.3;        // SCHRITT 3.3
U   M 150.3;        // SCHRITT 3
U   DB25.DBX 332.0; // NC-SATZ FERTIG
O;
U   DB25.DBX 332.0; // NC-SATZ FERTIG
U   M 152.7;        // WERKZEUGWENDER IN SCHRITT 4 WEITERSCHWENKEN
U   M 150.4;        // SCHRITT 4
R   M 150.3;        // SCHRITT 3
R   M 149.3;        // SCHRITT 3.3
S   M 150.4;        // SCHRITT 4
R   DB25.DBX 332.0; // NC-SATZ FERTIG
SPBN M106;
R   M 152.7;        // WERKZEUGWENDER IN SCHRITT 4 WEITERSCHWENKEN
L   0;              // WERKZEUGPOSITION IN DEN SETTINGDATEN LÖSCHEN
T   DB15.DBB 25;    // GÜLTIGE WERKZEUGPOSITION IN DEN SETTINGDATEN
R   DB15.DBX 20.3;  // SCHRITT 3 IN DEN SETTINGDATEN LÖSCHEN
R   DB15.DBX 20.0;  // SCHRITT 3.3 IN DEN SETTINGDATEN SPEICHERN
S   M 120.5         // WERKZEUGWENDEN IM SCHRITT4 ABGEBROCHEN
S   DB15.DBX 20.4;  // SCHRITT 4 IN DEN SETTINGDATEN SPEICHERN
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
R   M 154.5;        // - NEUE WZW-TROMMEL POSITION IST IN MINUSRICHTUNG
R   M 154.6;        // + NEUE WZW-TROMMEL POSITION IST IN PLUSRICHTUNG
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 548.5; // GENAUHALTMODUS SETZEN
=   DB25.DBX 549.0; // G1 WIRD AUSGELÖST
=   DB25.DBX 549.4; // VORSCHUB IN GRAD/S WERT IN DBD556
L   DB10.DBD 34;    // VORSCHUBWERT IN GRAD/SEKUNDEN
T   DB25.DBD 556;   // F-WERT IN M/S ODER M/U
S   DB25.DBX 21.4;  // POSITIONSANFORDERUNG FÜR KANALACHSE C
L   DB25.DBD 70;    // POSITIONSWERT FÜR KANALACHSE C
L   MD 156;         // DOPPELWORT MIT SCHWENKPOSITION IN GRAD FÜR HAUPTSPINDEL (FLOATWWERT)
+R;
T   DB25.DBD 70;    // POSITIONSWERT FÜR KANALACHSE C
L   MD 156;         // DOPPELWORT MIT SCHWENKPOSITION IN GRAD FÜR HAUPTSPINDEL (FLOATWWERT)
L   0;
<R;
S   M 154.5;        // - NEUE WZW-TROMMEL POSITION IST IN MINUSRICHTUNG
L   MD 156;         // DOPPELWORT MIT SCHWENKPOSITION IN GRAD FÜR HAUPTSPINDEL (FLOATWWERT)
L   0;
>R;
S   M 154.6;        // + NEUE WZW-TROMMEL POSITION IST IN PLUSRICHTUNG
L   0;              // ALTEN POSITIONSWERT LÖSCHEN
T   MD 156;         // DOPPELWORT MIT SCHWENKPOSITION IN GRAD FÜR HAUPTSPINDEL (FLOATWWERT)
M106:  NOP 0;
NETWORK
TITLE = WERKZEUGPOSITION ÜBERPRÜFEN
U   M 150.4;        // SCHRITT 4 WZW AUF GÜLTIGE POSITION SCHWENKEN
UN  M 152.7;        // WERKZEUGWENDER IN SCHRITT 4 WEITERSCHWENKEN
U   M 151.0;        // WERKZEUGWENDER IST REFERENZIERT
U   DB25.DBX 332.0; // NC-SATZ FERTIG
SPBN   M107;
L   Z 3;
L   Z 5
<>I;
R   DB25.DBX 332.0; // NC-SATZ FERTIG
S   DB2.DBX 5.6;    // 6046  WZW POSITIONSÜBERWACHUNG
M107:  NOP 0;
NETWORK
TITLE = WZW-BERO ÜBERWACHUNG VOR DEM RUNTERFAHREN
UN  M 152.7;        // WERKZEUGWENDER IN SCHRITT 4 WEITERSCHWENKEN
U   M 150.4;        // SCHRITT 4
U   DB25.DBX 332.0; // NC-SATZ FERTIG
UN  E 4.0;          // WERKZEUGWENDER POSITIONSBERO
R   DB25.DBX 332.0; // NC-SATZ FERTIG
S   DB2.DBX 5.3;    // 6043  WZW POSITIONSÜBERWACHUNG
NETWORK
TITLE = SCHRITT 5.1  Z-ACHSE AUF REFPKT.+ÜBERNAHMEWEG FAHREN
UN  M 152.7;        // WERKZEUGWENDER IN SCHRITT 4 WEITERSCHWENKEN
U   M 150.4;        // SCHRITT 4
U   DB25.DBX 332.0; // NC-SATZ FERTIG
U   E 4.0;          // WERKZEUGWENDER POSITIONSBERO
R   M 150.4;        // SCHRITT 4
R   DB25.DBX 332.0; // NC-SATZ FERTIG
S   M 150.5;        // SCHRITT 5
S   M 149.4         // SCHRITT 5.1  Z-ACHSE 30MM ÜBER REF.PKT.FAHREN
SPBN M108;
S   DB15.DBX 20.5   // SCHRITT 5.1 IN DEN SETTINGDATEN SPEICHERN
S   M 120.5         // WERKZEUGWENDEN IM SCHRITT4 ABGEBROCHEN
R   DB15.DBX 20.4   // SCHRITT 4 IN DEN SETTINGDATEN LÖSCHEN
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 548.6; // BLOCKUEBERGANG
=   DB25.DBX 549.0; // G1 WIRD AUSGELÖST
=   DB25.DBX 548.2; // VORSCHUB IN METER/SEKUNDE WERT IN DBD556
S   M 56.5;         // WZW-AUSBLASMAGNETVENTIL
L   DB10.DBD 38;    // VORSCHUBWERT IN METER/MINUTE
T   DB25.DBD 556;   // F-WERT IN M/S ODER M/U
=   DB25.DBX 20.2;  // POSITIONSANFORDERUNG FÜR Z-ACHSE
L   DB1.DBD 78;     // REF.POSITION FÜR Z-ACHSE FLOATWERT IN M
L   +0.04;
;8*******       L   DB10.DBD 46;    // Z-WERT SCHLEICHWEG IN M FÜR WERKZEUGAUSSTOSS
+R
T   DB25.DBD 30;    // POSITIONSWERT FÜR Z-ACHSE
M108:  NOP 0;
NETWORK
TITLE = SCHRITT 5.2  Z-ACHSE AUF REFERENZPUNK FAHREN
UN  M 152.7;        // WERKZEUGWENDER IN SCHRITT 4 WEITERSCHWENKEN
U   M 150.5;        // SCHRITT 5
U   M 149.4         // SCHRITT 5.1  Z-ACHSE 30MM ÜBER REF.PKT.FAHREN
U   DB25.DBX 332.0; // NC-SATZ FERTIG
U   E 4.0;          // WERKZEUGWENDER POSITIONSBERO
O   M 162.1         // VON FREIFAHRBAUSTEIN AUF REF.POS. FAHREN
S   M 150.5;        // SCHRITT 5
S   M 149.5         // SCHRITT 5.2  Z-ACHSE AUF REF.PKT.FAHREN
R   M 149.4         // SCHRITT 5.1  Z-ACHSE 30MM ÜBER REF.PKT.FAHREN
R   DB25.DBX 332.0; // NC-SATZ FERTIG
R   M 162.1         // VON FREIFAHRBAUSTEIN AUF REF.POS. FAHREN
SPBN M109;
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 548.6; // BLOCKUEBERGANG
=   DB25.DBX 549.0; // G1 WIRD AUSGELÖST
=   DB25.DBX 548.2; // VORSCHUB IN METER/SEKUNDE WERT IN DBD556
L   DB10.DBD 42;    // Z-SCHLEICHGANG FÜR WERKZEUGAUSSTOSS
T   DB25.DBD 556;   // F-WERT IN M/S ODER M/U
=   DB25.DBX 20.2;  // POSITIONSANFORDERUNG FÜR Z-ACHSE
L   DB1.DBD 78;     // REFERENZPOSITION Z-ACHSE
T   DB25.DBD 30;    // POSITIONSWERT FÜR Z-ACHSE
R   M 56.5;         // WZW-AUSBLASMAGNETVENTIL
R   DB15.DBX 20.4   // SCHRITT 4 IN DEN SETTINGDATEN LÖSCHEN
R   DB15.DBX 20.5   // SCHRITT 5.1 IN DEN SETTINGDATEN SPEICHERN
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
M109:  NOP 0;
NETWORK
TITLE = SCHRITT 6 WERKZEUGWENDE-MODE VERLASSEN
U   M 150.5;        // SCHRITT 5
U   M 149.5         // SCHRITT 5.1  Z-ACHSE 30MM ÜBER REF.PKT.FAHREN
U   DB25.DBX 332.0; // NC-SATZ FERTIG
S   M 150.6;        // SCHRITT 6
R   M 150.5;        // SCHRITT 5
R   M 149.5         // SCHRITT 5.2  Z-ACHSE AUF REF.PKT.FAHREN
R   DB25.DBX 332.0; // NC-SATZ FERTIG
SPBN M111;
R   M 155.7         // REGLERFREIGABE FUER HA BEIM WERKZEUGWENDEN
R   M 120.5         // WERKZEUGWENDEN IM SCHRITT4 ABGEBROCHEN
R   DB15.DBX 20.0;  // SCHRITT 3.3 IN DEN SETTINGDATEN SPEICHERN
R   DB15.DBX 20.3   // SCHRITT 3 IN DEN SETTINGDATEN SPEICHERN
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
R   DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 549.3; // HA VON POSITIONIERBETRIEB AUF SPINDEL
M111:  NOP 0
NETWORK
TITLE = WERKZEUGWENDEN BEENDEN
U   DB25.DBX 332.0; // NC-SATZ FERTIG
U   M 150.6;        // SCHRITT 6
SPBN M112;
L   0;
T   MB 149;         // SCHRITTKETTE LÖSCHEN
T   MB 150;         // SCHRITTKETTE LÖSCHEN
T   MB 154;         // ABBRUCHKETTE LÖSCHEN
T   MD 156;         // DOPPELWORT MIT SCHWENKPOSITION IN GRAD FÜR HAUPTSPINDEL (FLOATWWERT)
R   M 151.3;        // WERKZEUGWENDER STARTEN VON GÜLTIGEN T-WORT
R   DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
R   DB25.DBX 340.3; // EINLESEFREIGABE K1
R   DB25.DBX 340.4; // ACHSFREIGABE    K1
R   M 94.7;         // SPINDELFREIGABE K0
R   Z 4;
M112:  NOP 0
NETWORK
TITLE = WERKZEUGWENDEN AKTIV
L   MB 150;         // SCHRITTKETTE
L   0;
<>I;
=   M 152.0;        // WERKZEUGWENDEN AKTIV
END_FUNCTION
FUNCTION FC 52 : VOID
NAME: WZW TROMMEL FREIFAHREN
BEGIN
NETWORK
TITLE = SCHRITT F1  SPINDEL IN POSITIONIERBETRIEB SCHALTEN
UN  M 154.4;        // WZW ABBRUCH MERKER 4 (NOT-AUS,TÜR AUF,RESET IM SCHRITT S3,ODER S5)
UN  M 162.0;        // WERKZEUGWENDER FREIFAHREN AKTIV
U   M 151.1;        // WZW FREIGABE
U   M 151.4         // WERKZEUGWENDER START VON WZW-TASTE
SPBN M101;
S   M 160.1;        // SCHRITT 1
S   M 94.7;         // SPINDELFREIGABE K0
S   M 90.7;         // ACHSFREIGABE    K0
S   DB25.DBX 340.3; // EINLESEFREIGABE K1
S   DB25.DBX 340.4; // ACHSFREIGABE    K1
S   M 155.7         // REGLERFREIGABE FUER HA BEIM WERKZEUGWENDEN
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 549.2; // SPINDEL in den Positionierbetrieb
M101:  NOP 0;
NETWORK
TITLE = SCHRITT F2  SPINDEL REFERENZIEREN
U   M 160.1;        // SCHRITT 1
U   DB25.DBX 332.0; // NC-SATZ FERTIG
R   M 160.1;        // SCHRITT 1
S   M 160.2;        // SCHRITT 2
R   DB25.DBX 332.0; // NC-SATZ FERTIG
SPBN M102;
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 548.5; // GENAUHALTMODUS SETZEN
=   DB25.DBX 549.0; // G1 WIRD AUSGELÖST
=   DB25.DBX 549.4; // VORSCHUB IN GRAD/S WERT IN DBD556
L   +2.88E+03;
T   DB25.DBD 556;   // F-WERT IN M/S ODER M/U
S   DB25.DBX 21.4;  // POSITIONSANFORDERUNG FÜR KANALACHSE C
L   DB10.DBD 18;    // POSITIONS-OFFSETWERT AUS MSD-FILE
T   DB25.DBD 70;    // POSITIONSWERT FÜR KANALACHSE C
M102:  NOP 0;
NETWORK
TITLE = SCHRITT F3  WZW POSITIONSBERO SUCHEN
U   M 160.2;        // SCHRITT 2
U   DB25.DBX 332.0; // NC-SATZ FERTIG
O   M 161.4;        // FM SONDERAUSLÖSUNG SCHRITT F3
O   M 161.5;        // FM SONDERAUSLÖSUNG SCHRITT F3
R   M 160.2;        // SCHRITT F2
S   M 160.3;        // SCHRITT F3
R   DB25.DBX 332.0; // NC-SATZ FERTIG
SPBN M103;
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 548.5; // GENAUHALTMODUS SETZEN
=   DB25.DBX 549.0; // G1 WIRD AUSGELÖST
=   DB25.DBX 549.4; // VORSCHUB IN GRAD/S WERT IN DBD556
L   DB10.DBD 34;    // VORSCHUBWERT IN GRAD/SEKUNDEN
T   DB25.DBD 556;   // F-WERT IN M/S ODER M/U
S   DB25.DBX 21.4;  // POSITIONSANFORDERUNG FÜR KANALACHSE C
L   DB10.DBD 26;    // POSITIONS-WERT AUS MSD-FILE(720 = 2 HAUPTSPINDELUMDR.)
L +4.0E+00
/R
L   DB25.DBD 70;    // POSITIONSWERT FÜR KANALACHSE C
+R;
T   DB25.DBD 70;    // POSITIONSWERT FÜR KANALACHSE C
M103:  NOP 0;
NETWORK
TITLE = SONDERAUSLÖSUNG VON SCHRITT F3 VON F3
U   M 160.3;        // SCHRITT F3
U   DB25.DBX 332.0; // NC-SATZ FERTIG
UN  E 4.0           // WERKZEUGWENDER POSITIONSBERO
FP  M 161.4;        // FM SONDERAUSLÖSUNG SCHRITT F3 VON F3
R   DB25.DBX 332.0; // NC-SATZ FERTIG
NETWORK
TITLE = SCHRITT F4  WZW EINE POSITION WEITERSCHWENKEN
U   M 160.3;        // SCHRITT F3
U   DB25.DBX 332.0; // NC-SATZ FERTIG
U   E 4.0           // WERKZEUGWENDER POSITIONSBERO
S   M 160.4;        // SCHRITT F4
R   M 160.3;        // SCHRITT F3
R   DB25.DBX 332.0; // NC-SATZ FERTIG
SPBN M105;
R   Z 4;
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 548.5; // GENAUHALTMODUS SETZEN
=   DB25.DBX 549.0; // G1 WIRD AUSGELÖST
=   DB25.DBX 549.4; // VORSCHUB IN GRAD/S WERT IN DBD556
L   DB10.DBD 34;    // VORSCHUBWERT IN GRAD/SEKUNDEN
T   DB25.DBD 556;   // F-WERT IN M/S ODER M/U
S   DB25.DBX 21.4;  // POSITIONSANFORDERUNG FÜR KANALACHSE C
L   DB10.DBD 26;    // POSITIONS-WERT AUS MSD-FILE(720 = 2 HAUPTSPINDELUMDR.)
L   DB25.DBD 70;    // POSITIONSWERT FÜR KANALACHSE C
+R;
T   DB25.DBD 70;    // POSITIONSWERT FÜR KANALACHSE C
M105:  NOP 0;
NETWORK
TITLE = SONDERAUSLÖSUNG VON SCHRITT F3 VON F4
U   M 160.4;        // SCHRITT F4
U   DB25.DBX 332.0; // NC-SATZ FERTIG
UN  E 4.0;          // WERKZEUGWENDER POSITIONSBERO
FP  M 161.5;        // FM SONDERAUSLÖSUNG SCHRITT F3
R   M 160.4;        // SCHRITT F4
R   DB25.DBX 332.0; // NC-SATZ FERTIG
NETWORK
TITLE = ZÄHLER FÜR SONDERAUSLÖSUNG VON SCHRITT F5.1 ODER F5.2
O   M 161.4;        // FM SONDERAUSLÖSUNG SCHRITT F3 VON F3
ZV  Z 4;
L   Z 4;
L   5 ;
>=I;
R   Z 4;
S   M 160.4;        // SCHRITT F4
S   DB25.DBX 332.0; // NC-SATZ FERTIG
NETWORK
TITLE = SCHRITT F5.1 WENN DER REFPKT. AKTIV IST Z-ACHSE HERUNTERFAHREN (SCHRITT4)
U   M 154.4;        // WZW ABBRUCH MERKER 4 (NOT-AUS,TÜR AUF,RESET IM SCHRITT S3,ODER S5)
UN  M 162.0;        // WERKZEUGWENDER FREIFAHREN AKTIV
U   M 151.1;        // WZW FREIGABE
U   M 151.4         // WERKZEUGWENDER START VON WZW-TASTE
U   DB20.DBX 324.4; // REFERENZPUNKT AKTIV
S   M 160.4;        // SCHRITT F4
S   DB25.DBX 332.0; // NC-SATZ FERTIG
U   M 160.4;        // SCHRITT F4
U   DB25.DBX 332.0; // NC-SATZ FERTIG
U   DB20.DBX 324.4; // REFERENZPUNKT AKTIV
S   M 162.1         // VON FREIFAHRBAUSTEIN AUF REF.POS. FAHREN
SPBN M106;
L   0;
T   MB 160;         // SCHRITTKETTE LÖSCHEN
T   MB 161;         // SONDERSCHRITTKETTE
T   MB 153;         // ABBRUCHMERKER LÖSCHEN
T   MB 154;         // ABBRUCHMERKER LÖSCHEN
M106:  NOP 0;
NETWORK
TITLE = WERKZEUGWENDER FREIFAHREN AKTIV
L   MB 161;         // SONDERSCHRITTKETTE
L   0;
<>I;
=   M 162.2;        // SONDERSCHRITTKETTE WERKZEUGWENDER FREIFAHREN AKTIV
NETWORK
TITLE = SCHRITT F5.2 WERKZEUGWENDER FREIFAHRMODE VERLASSEN
U   M 160.4;        // SCHRITT F4
U   DB25.DBX 332.0; // NC-SATZ FERTIG
UN  DB20.DBX 324.4; // REFERENZPUNKT AKTIV
R   M 160.4;        // SCHRITT F4
R   DB25.DBX 332.0; // NC-SATZ FERTIG
SPBN M107;
L   0;
T   MB 160;         // SCHRITTKETTE LÖSCHEN
T   MB 153;         // ABBRUCHMERKER LÖSCHEN
T   MB 154;         // ABBRUCHMERKER LÖSCHEN
T   MD 156;         // DOPPELWORT MIT SCHWENKPOSITION IN GRAD FÜR HAUPTSPINDEL (FLOATWWERT)
S   M 161.0;        // HM WZW-AUSBLASMAGNETVENTIL SCHALTEN
R   M 90.7;         // ACHSFREIGABE    K0   8*****
R   DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
R   DB15.DBX 20.4   // SCHRITT 4 IN DEN SETTINGDATEN SPEICHERN
R   DB15.DBX 20.5;  // SCHRITT 5.1 IN DEN SETTINGDATEN SPEICHERN
R   DB15.DBX 20.0;  // SCHRITT 3.3 IN DEN SETTINGDATEN SPEICHERN
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
M107:  NOP 0;
NETWORK
TITLE = WERKZEUGWENDER FREIFAHREN AKTIV
L   MB 160;         // SCHRITTKETTE
L   0;
<>I;
=   M 162.0;        // WERKZEUGWENDER FREIFAHREN AKTIV
END_FUNCTION
FUNCTION FC 1 : VOID
NAME: SCHMIERMITTEL
BEGIN
NETWORK
TITLE = FM WEGIMPULS X-ACHSE
U   DB1.DBX 1422.0; // WEGIMPULS X-ACHSE
ZV  Z 0;            // ZÄHLE VORWÄRTS Z0
NETWORK
TITLE = FM WEGIMPULS Y-ACHSE
U   DB1.DBX 1422.1; // WEGIMPULS Y-ACHSE
ZV  Z 1;            // ZÄHLE VORWÄRTS Z1
NETWORK
TITLE = FM WEGIMPULS Z-ACHSE
U   DB1.DBX 1422.2; // WEGIMPULS Z-ACHSE
ZV  Z 2;            // ZÄHLE VORWÄRTS Z2
NETWORK
TITLE = WEGINITIALISIERUNG/SCHMIERIMPULS
L   DB10.DBW 10;    // SPS-MSD X-ACHSE ALLE 8 METER EINEN SCHMIERIMPULS
L   Z 0;            // LADE Z0
<=I ;               // VERGLEICH AUF KLEINER/GLEICH
O
L   DB10.DBW 12;    // SPS-MSD Y-ACHSE ALLE 8 METER EINEN SCHMIERIMPULS
L   Z 1;            // LADE Z1
<=I ;               // VERGLEICH AUF KLEINER/GLEICH
O
L   DB10.DBW 14;    // SPS-MSD Z-ACHSE ALLE 8 METER EINEN SCHMIERIMPULS
L   Z 2;            // LADE Z2
<=I ;               // VERGLEICH AUF KLEINER/GLEICH
O   DB1.DBX 1374.4; // TASTE AUX-ON (PC)
UN  M 56.7;         // LEISTUNG SCHMIERMITTEL
UN  T 24;           // PAUSENZEIT SCHMIERMITTEL
SPBN M3;                 // SPRUNG BEI 0
SET;
R   Z 0;            // RÜCKSETZEN Z0
R   Z 1;            // RÜCKSETZEN Z1
R   Z 2;            // RÜCKSETZEN Z2
S   M 56.7;         // LEISTUNG SCHMIERMITTEL
U   E 4.6;          // DRUCKSCHALTER SCHMIERMITTEL
S   DB3.DBX 4.6;    // 7038  DRUCKSCHALTER SCHM. DEFEKT
M3:   NOP  0;
NETWORK
TITLE = DRUCKSCHALTER SCHMIERMITTEL
U   M 56.7;         // LEISTUNG SCHMIERMITTEL
U   E 4.6;          // DRUCKSCHALTER SCHMIERMITTEL
L   S5T#0S800MS;    // 800X0,1S
SE  T 22;           // STARTEN T22 ALS EINSCHALTVERZ.
NETWORK
TITLE = ÜBERWACHUNGSZEIT SCHMIERMITTEL
U   M 56.7;         // LEISTUNG SCHMIERMITTEL
UN  E 4.6;          // DRUCKSCHALTER SCHMIERMITTEL
L   S5T#5S;         // 30X0,1S
SE  T 23;           // STARTEN T23 ALS EINSCHALTVERZ.
NETWORK
TITLE = RÜCKSETZEN SCHMIERMITTEL
O   T 22;           // DRUCKSCHALTER SCHMIERMITTEL
O   T 23;           // ÜBERWACHUNGSZEIT ABGELAUFEN
ON  M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
ON  M 50.2;         // NICHT NOT-AUS
R   M 56.7;         // LEISTUNG SCHMIERMITTEL
NETWORK
TITLE = /FM LEISTUNG SCHMIERMITTEL
U   M 56.7;         // LEISTUNG SCHMIERMITTEL
FN  M 129.1;        // FM LEISTUNG SCHMIERMITTEL
NETWORK
TITLE = PAUSENZEIT SCHMIERMITTEL
U   M 129.1;        // FM LEISTUNG SCHMIERMITTEL
L   S5T#120S;         // 60X0,1S
SV  T 24;           // STARTEN T24 ALS VERL. IMPULS
NETWORK
TITLE = 7039  SCHMIERMITTEL DEFEKT
U   T 23;           // ÜBERWACHUNGSZEIT ABGELAUFEN
S   DB3.DBX 4.7;    // 7039  SCHMIERMITTEL DEFEKT
R   M 56.7;         // LEISTUNG SCHMIERMITTEL
U   T 22;           // DRUCKSCHALTER SCHMIERMITTEL
R   DB3.DBX 4.7;    // 7039  SCHMIERMITTEL DEFEKT
NETWORK
TITLE = MELDG. SCHMIERM./NC-STARTVERR.
L   DB3.DBW 4;      // WORT/MELDUNGEN SCHMIERMITTEL
L   W#16#0;         // LADE KONSTANTE HEX 0
<>I ;               // VERGLEICH AUF UNGLEICH
=   M 97.0;         // MELDG. SCHMIERM./NC-STARTVERR.
NETWORK
TITLE = SPS/OB-->SCHMIERIMPULS AKTIV
U   M 56.7;         // LEISTUNG SCHMIERMITTEL
=   DB20.DBX 311.4; // SPS/RM-->SCHMIERIMPULS AKTIV
NETWORK
TITLE = SCHMIERIMPULSZÄHLER
U   M 129.1;        // FM LEISTUNG SCHMIERMITTEL
SPBN M4;                 // SPRUNG BEI 0
L   DB15.DBD 12;    // SCHMIERIMPULSZÄHLER
L   DW#16#0000_0001;
+D;                 // SCHMIERIMPULSZÄHLER +1
T   DB15.DBD 12;    // SCHMIERIMPULSZÄHLER
M4:   NOP  0;
END_FUNCTION
FUNCTION FC 2 : VOID
NAME: STÜCKZÄHLER
BEGIN
NETWORK
TITLE = STÜCKZÄHLER
UN  DB20.DBX 192.2; // M2 dyn
UN  DB20.DBX 195.6; // M30 dyn
O   DB20.DBX 324.2; // DRYRUN AKTIV
SPB   M214;
SET;
L   DB15.DBD 4;     // Zähler
L   DW#16#000F_423F;// 999999 STÜCK
<>D ;
SPB   M211;
SET;
L   DW#16#0000_0000;
T   DB15.DBD 4;
M211: NOP  0;
L   DB15.DBD 4;
L   DW#16#0000_0001;
+D  ;               // Stückzähler +1 low
T   DB15.DBD 4;
L   DB15.DBD 8;     // CHARGENZÄHLER
L   DW#16#000F_423F;// 999999 STÜCK
<>D ;
SPB   M213;
SET;
L   DW#16#0000_0000;
T   DB15.DBD 8;
M213: NOP  0;
L   DB15.DBD 8;
L   DW#16#0000_0001;
+D  ;               // Stückzähler +1 low
T   DB15.DBD 8;
M214: L    DB15.DBD 0;     // Sollstückz
L   DW#16#0000_0000;
<>D ;
SPB   M202;
SPA   M201;
M202: NOP  0;
L   DB15.DBD 4;     // Stückz.
L   DB15.DBD 0;     // Sollstückz.
<D  ;
SPB   M201;
SET
S   DB3.DBX 5.3;    // 7043  SOLLSTÜCKZAHL ERREICHT
L   DW#16#0;
T   DB15.DBD 4;
M201: NOP  0;
NETWORK
TITLE = NC-STARTVERRIEGELUNG
U   DB3.DBX 5.3;    // Meldung Sollstückzahl erreicht
=   M 96.6;         // NC-Startverr.
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   DB3.DBX 5.3;    // Meldung Sollstückzahl erreicht
END_FUNCTION
FUNCTION FC 10 : VOID
NAME: HAUPTANTRIEB_STEUERUNG VMC150
BEGIN
NETWORK
TITLE = ANWAHL HAUPTANTRIEB M3
UN  DB20.DBX 224.3; // M3 STAT.
U   M 104.2;        // SUM  SFG
U(  ;
O   DB20.DBX 192.3; // M3 DYN.
O(  ;
U   M 148.2;        // HM M3 GESPEICHERT M0/M1
U   DB20.DBX 0.2;   // FC NC-START
)   ;
O(  ;
U   T 43;           // ÜBERWACHUNGSZEIT FÜR HA/M3
U   M 132.3;        // /FM TASTE SPINDEL START
U   M 104.5;        // HM BETRIEBSART JOG UND INC
UN  DB20.DBX 324.0; // PROGRAMM LÄUFT
)   ;
)   ;
S   M 145.0         // ANWAHL HAUPTANTRIEB M3
U   M 145.0         // ANWAHL HAUPTANTRIEB M3
L   S5T#0S100MS;    //
SE  T 11;
U   M 145.0         // ANWAHL HAUPTANTRIEB M3
U   T 12;
O   T 11;
=   DB20.DBX 256.3; // M3 RÜCKMELDEN
S   DB20.DBX 340.0; // SPINDEL EIN IM UHRZEIGER
R   DB20.DBX 340.1; // SPINDEL EIN GEGEN UHRZEIGER
R   M 148.2;        // HM M3 GESPEICHERT M0/M1
R   M 145.0         // ANWAHL HAUPTANTRIEB M3
NETWORK
TITLE = ANWAHL HAUPTANTRIEB   M4
UN  DB20.DBX 224.4; // M4 STAT.
U   M 104.2;        // SUM  SFG
U(  ;
O   DB20.DBX 192.4; // M4 DYN.
O(  ;
U   M 148.3;        // HM M4 GESPEICHERT M0/M1
U   DB20.DBX 0.2;   // FC NC-START
)   ;
O(  ;
UN  T 43;           // ÜBERWACHUNGSZEIT FÜR HA/M4
U   M 132.3;        // /FM TASTE SPINDEL START
U   M 104.5;        // HM BETRIEBSART JOG UND INC
UN  DB20.DBX 324.0; // PROGRAMM LÄUFT
)   ;
)   ;
S   M 145.1         // ANWAHL HAUPTANTRIEB M4
U   M 145.1         // ANWAHL HAUPTANTRIEB M4
L   S5T#0S100MS;    //
SE  T 12;
U   M 145.1         // ANWAHL HAUPTANTRIEB M4
U   T 11;
O   T 12;
=   DB20.DBX 256.4; // M4 RÜCKMELDEN
S   DB20.DBX 340.1; // SPINDEL EIN GEGEN UHRZEIGER
R   DB20.DBX 340.0; // SPINDEL EIN IM UHRZEIGER
R   M 148.3;        // HM M4 GESPEICHERT M0/M1
R   M 145.1;        // ANWAHL HAUPTANTRIEB M4
NETWORK
TITLE = M3,M4 GESPEICHERT VON M0,M1
U   M 34.1;         // HM M0/M1 DYNAMISCH
U   DB20.DBX 224.3; // M3 STAT.
UN  M 148.4;        // HM M3/M4 GESPEICHERT M0/M1
S   M 148.2;        // HM M3 GESPEICHERT M0/M1
U   M 34.1;         // HM M0/M1 DYNAMISCH
U   DB20.DBX 224.4; // M4 STAT.
UN  M 148.4;        // HM M3/M4 GESPEICHERT M0/M1
S   M 148.3;        // HM M4 GESPEICHERT M0/M1
O   DB1.DBX 1440.0  // RESET AUSGELÖST
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   M 148.2;        // HM M3 GESPEICHERT M0/M1
R   M 148.3;        // HM M4 GESPEICHERT M0/M1
NETWORK
TITLE = ANWAHL HAUPTANTRIEB    M5
U   M 34.1;         // HM M0/M1 DYNAMISCH
UN  M 148.4;        // HM M3/M4 GESPEICHERT M0/M1
O;
U   M    132.7;     // FM SPINDEL HALT
U   M    104.5;     // HM BETRIEBSART JOG UND INC
UN  DB20.DBX 324.0; // PROGRAMM LÄUFT
O;
U   M    132.7;     // FM SPINDEL HALT
U   M    104.5;     // HM BETRIEBSART JOG UND INC
UN  DB20.DBX 324.0; // PROGRAMM LÄUFT
O   DB20.DBX 192.5; // M5 dynamisch
O   DB1.DBX 1370.0; // 1.SPS SCHLEIFENDURCHLAUF
O   DB1.DBX 1440.0  // RESET AUSGELÖST
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
;       O   DB20.DBX 324.2; // DRYRUN AKTIV
O   DB20.DBX 192.2; // M2 dyn
O   DB20.DBX 195.6; // M30 dyn
O   M 109.5;        // /FM AUX-ON
=   DB20.DBX 256.5; // M5 RÜCKMELDEN
R   DB20.DBX 340.0; // SPINDEL EIN IM UHRZEIGER
R   DB20.DBX 340.1; // SPINDEL EIN GEGEN UHRZEIGER
R   M 145.0         // ANWAHL HAUPTANTRIEB M3
R   M 145.1         // ANWAHL HAUPTANTRIEB M4
R   M 145.2         // HM ANWAHL M3/M4
NETWORK
TITLE = HM M3/M4 GESPEICHERT M0/M1
O   M 148.2;        // HM M3 GESPEICHERT M0/M1
O   M 148.3;        // HM M4 GESPEICHERT M0/M1
S   M 148.4;        // HM M3/M4 GESPEICHERT M0/M1
UN  M 34.1;         // HM M0/M1 DYNAMISCH
R   M 148.4;        // HM M3/M4 GESPEICHERT M0/M1
NETWORK
TITLE = ISTDREHZAHL KLEINER 20U/MIN
U   DB1.DBX 1370.0; // 1.SPS SCHLEIFENDURCHLAUF
S   M 114.1;        // HM-ENTPRELLZEIT
U   DB1.DBX 1356.3; // HAUPTANTRIEB STILLSTAND
L   S5T#800MS;      // 800MS
SE  T 38;           // STARTEN T38 ALS EINSCHALTVERZ.
U   T 38;           // T38 ENTPRELLZEIT FÜR HAUPTANTRIEB
R   M 114.1;        // HM-ENTPRELLZEIT
O   M 114.1;        // HM-ENTPRELLZEIT
O   T 38;           // T38 ENTPRELLZEIT FÜR HAUPTANTRIEB
=   M 114.3;        // ISTDREHZAHL KLEINER 20U/MIN
R   M 145.7         // HM REGLERFREIGABE FÜR HAUPTANTRIEB
NETWORK
TITLE = FREIGABE FÜR BEDIENMODUL ZUM ANZIEHEN DES TÜRVERRIEGELUNGSMAGNETEN
U   M 114.3;        // ISTDREHZAHL KLEINER 20U/MIN
UN  M 152.0;        // WERKZEUGWENDEN AKTIV
U(
ON  M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
ON  DB20.DBX 324.0; // PROGRAMM LÄUFT: RÜCKSETZEN MIT PROGRAMM ENDE BZW. RESET.
O   DB20.DBX 324.1; // STOP-ZUSTAND
O   DB20.DBX 325.1; // STOP-ZUSTAND DURCH SINGLE
)
U(
ON  DB20.DBX 326.2; // BETRIEBSART MDI
ON  DB20.DBX 324.0; // PROGRAMM LÄUFT: RÜCKSETZEN MIT PROGRAMM ENDE BZW. RESET.
O   DB20.DBX 324.1; // STOP-ZUSTAND
O   DB20.DBX 325.1; // STOP-ZUSTAND DURCH SINGLE
)
=   M 55.7;         // FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
NETWORK
TITLE = DRYRUN  SFG
UN  DB20.DBX 324.2; // DRYRUN AKTIV
UN  DB20.DBX 324.0; // PROGRAMM LÄUFT: RÜCKSETZEN MIT PROGRAMM ENDE BZW. RESET.
R   M 94.2;         // DRYRUN  SFG
U   DB20.DBX 324.2; // DRYRUN AKTIV
UN  DB20.DBX 324.0; // PROGRAMM LÄUFT: RÜCKSETZEN MIT PROGRAMM ENDE BZW. RESET.
S   M 94.2;         // DRYRUN  SFG
U   M 94.2;         // DRYRUN  SFG
=   DB20.DBX 324.2; // DRYRUN AKTIV
NETWORK
TITLE = HA LAUFT AUS  AFG/EFG
U   DB20.DBX 224.5; // M5 STAT.
UN  M 114.3;        // ISTDREHZAHL KLEINER 20U/MIN
=   M 90.6;         // HA LAUFT AUS  AFG/EFG
NETWORK
TITLE = KENNUNG RUNDACHSE
L   DB1.DBB1447;
L   3;
==I;
=   M 115.0;        // SPINDEL IM RUNDACHSBETRIEB
=   DB1.DBX 1461.4; // NCRFG ACHSE 12
U   DB20.DBX 328.0; // RUNDACHSUMSCHALTUNG VON AC ANGEFORDERT
S   M 95.0          // SFG VON RUNDACHSANFORDERUNG
U   M 115.1;        // HM SPINDEL IM RUNDACHSBETRIEB
UN  M 115.0;        // SPINDEL IM RUNDACHSBETRIEB
R   M 95.0          // SFG VON RUNDACHSANFORDERUNG
R   M 115.1;        // HM SPINDEL IM RUNDACHSBETRIEB
U   M 115.0;        // SPINDEL IM RUNDACHSBETRIEB
S   M 115.1;        // HM SPINDEL IM RUNDACHSBETRIEB
R   DB20.DBX 328.0; // RUNDACHSUMSCHALTUNG VON AC ANGEFORDERT
NETWORK
TITLE = REGLERFREIGABE FÜR HAUPTANTRIEB
O   M 145.0;        // ANWAHL HAUPTANTRIEB M3
O   M 145.1;        // ANWAHL HAUPTANTRIEB M4
S   M 145.2;        // HM ANWAHL M3/M4
U   M 145.2;        // HM ANWAHL M3/M4
U   M 104.2;        // SUM  SFG
=   M 145.3;        // HM ANWAHL M3/M4
UN  M 114.3;        // ISTDREHZAHL KLEINER 20U/MIN
U   M 145.7         // HM REGLERFREIGABE FÜR HAUPTANTRIEB
O   M 155.7         // REGLERFREIGABE FUER HA BEIM WERKZEUGWENDEN
O   M 153.7         // OFFSET VON HAUPTANTRIEB EINSTELLEN
O   T 7
O   M 115.0;        // SPINDEL IM RUNDACHSBETRIEB
O   M 145.3;        // HM ANWAHL M3/M4
U   M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
=   M 54.0;         // REGLERFREIGABE FÜR HAUPTANTRIEB
S   M 145.7         // HM REGLERFREIGABE FÜR HAUPTANTRIEB
NETWORK
TITLE = 6014  KEINE HAUPTSPINDELDREHZAHL
U   DB20.DBX 224.3; // M3 STATISCH
U   DB20.DBX 182.2; // NEUE DREHZAHL
UN  M 148.0;        // HM M3 N-ÜBERWACHUNG
S   M 148.0;        // HM M3 N-ÜBERWACHUNG
UN  DB20.DBX 224.3; // M3 STATISCH
R   M 148.0;        // HM M3 N-ÜBERWACHUNG
U   M 104.2;        // SUM  SFG
U   M 148.0;        // HM M3 N-ÜBERWACHUNG
UN  M 152.1         // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
L   S5TIME#1S500MS; // 15X0,1S
SE  T 27;           // STARTEN T27 ALS EINSCHALTVERZ.
U   DB20.DBX 224.4; // M4 STATISCH
U   DB20.DBX 182.2; // NEUE DREHZAHL
UN  M 148.1;        // HM M4 N-ÜBERWACHUNG
S   M 148.1;        // HM M4 N-ÜBERWACHUNG
UN  DB20.DBX 224.4; // M4 STATISCH
R   M 148.1;        // HM M4 N-ÜBERWACHUNG
U   M 104.2;        // SUM  SFG
U   M 148.1;        // HM M4 N-ÜBERWACHUNG
UN  M 152.1         // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
L   S5TIME#1S500MS; // 15X0,1S
SE  T 28;           // STARTEN T28 ALS EINSCHALTVERZ.
U(;
O   T 27;           // M3/VERZÖGERUNGSZ. ABGELAUFEN
O   T 28;           // M4/VERZÖGERUNGSZ. ABGELAUFEN
);
U   M 114.3;        // ISTDREHZAHL KLEINER 20U/MIN
L   S5TIME#200MS;   // 2X0,1S
SE  T 31;           // STARTEN T31 ALS EINSCHALTVERZ.
U   T 31;           // VERZÖGERUNGSZEIT ABGELAUFEN
S   DB2.DBX 1.6;    // 6014  KEINE HAUPTSPINDELDREHZAHL
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   DB2.DBX 1.6;    // 6014  KEINE HAUPTSPINDELDREHZAHL
END_FUNCTION
FUNCTION FC 11: VOID
NAME: ACHSEN_LEISTUNG VMC150
BEGIN
NETWORK
TITLE = LEISTUNG ACHSANTRIEBE
U   M 110.0;        // AUX-ON
S   M 55.1;         // SCHÜTZ SCHRITTMOTORNETZTEIL
NETWORK
TITLE = LEISTUNG ACHSEN/SANFTANFLAUF
U   M 55.1;         // SCHÜTZ SCHRITTMOTORNETZTEIL
L   S5T#1S;         // 10X0,1S
SE  T 2;            // STARTEN T2 ALS EINSCHALTVERZ.
U   T 2;            // VERZÖGERUNGSZEIT ABGELAUFEN
U   M 111.0;        // ACHSEN BETRIEBSBEREIT
=   M 55.2;         // SCHÜTZ SANFTANLAUF SCHRITTMOTORNETZTEIL
NETWORK
TITLE = ACHSEN BETRIEBSBEREIT
U   M 50.4;         // X-ACHSE/SERVO-READY
U   M 50.5;         // Y-ACHSE/SERVO-READY
U   M 50.6;         // Z-ACHSE/SERVO-READY
=   M 111.0;        // ACHSEN BETRIEBSBEREIT
NETWORK
TITLE = ACHSEN BETRIEBSBEREIT  AFG/EFG
UN  M 111.0;        // ACHSEN BETRIEBSBEREIT
=   M 90.1;         // ACHSEN BETRIEBSBEREIT  AFG/EFG
NETWORK
TITLE = TOR-SIGNAL ACHSANTRIEBE
UN  M 50.3;         // FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
L   S5T#0S800MS;    // 8x0,1S
SE  T 3;            // STARTEN T3 ALS EINSCHALTVERZ.
U   T 3;            // VERZÖGERUNGSZEIT ABGELAUFEN
=   M 54.4;         // TOR-SIGNAL ACHSANTRIEBE
NETWORK
TITLE = ÜBERWACHUNG ACHSANTRIEBE SCHARF
U   M 110.0;        // AUX-ON
L   S5T#3S;         // 3 SEKUNDEN
SE  T 4;            // STARTEN T4 ALS EINSCHALTVERZ.
NETWORK
TITLE = 6010  ANTRIEB X-ACHSE N. BEREIT
U   T 4;            // ACHSÜBERWACHUNG SCHARF
UN  M 50.4;         // X-ACHSE/SERVO-READY
L   S5T#0S500MS;    // 2X0,1S
SE  T 15;           // STARTEN T 15 ALS EINSCHALTVERZ.
U   T 15;
S   DB2.DBX 1.2;    // 6010  ANTRIEB X-ACHSE N. BEREIT
O   DB1.DBX 1370.2; // QUITTIERT. GEDRÜCKT (MSTT/PC)
O   DB1.DBX 1370.3; // RESET-TASTE GEDRUECKT
R   DB2.DBX 1.2;    // 6010  ANTRIEB X-ACHSE N. BEREIT
NETWORK
TITLE = 6011  ANTRIEB Y-ACHSE N. BEREIT
U   T 4;            // ACHSÜBERWACHUNG SCHARF
UN  M 50.5;         // Y-ACHSE/SERVO-READY
L   S5T#0S500MS;    // 2X0,1S
SE  T 16;           // STARTEN T 16 ALS EINSCHALTVERZ.
U   T 16;
S   DB2.DBX 1.3;    // 6011  ANTRIEB Y-ACHSE N. BEREIT
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   DB2.DBX 1.3;    // 6011  ANTRIEB Y-ACHSE N. BEREIT
NETWORK
TITLE = 6012  ANTRIEB Z-ACHSE N. BEREIT
U   T 4;            // ACHSÜBERWACHUNG SCHARF
UN  M 50.6;         // Z-ACHSE/SERVO-READY
L   S5T#0S500MS;    // 2X0,1S
SE  T 17;           // STARTEN T 17 ALS EINSCHALTVERZ.
U   T 17;
S   DB2.DBX 1.4;    // 6012  ANTRIEB Z-ACHSE N. BEREIT
O   DB1.DBX 1370.2; // QUITTIERT. GEDRÜCKT (MSTT/PC)
O   DB1.DBX 1370.3; // RESET-TASTE GEDRUECKT
R   DB2.DBX 1.4;    // 6012  ANTRIEB Z-ACHSE N. BEREIT
NETWORK
TITLE = HM ANTRIEB ACHSEN NICHT BEREIT
O   DB2.DBX 1.2;    // 6010  ANTRIEB X-ACHSE N. BEREIT
O   DB2.DBX 1.3;    // 6011  ANTRIEB Y-ACHSE N. BEREIT
O   DB2.DBX 1.4;    // 6012  ANTRIEB Z-ACHSE N. BEREIT
S   M 111.1;        // HM ANTRIEB ACHSEN NICHT BEREIT
NETWORK
TITLE = 6009  SICHERHEITSSCH. DEFEKT
U   M 50.0          // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
UN  M 50.3;         // FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
UN  DB2.DBX 0.0;    // 6000  NOT-AUS
L   S5T#900MS;      //
SE  T 49
U   T 49
S   DB2.DBX 1.1;    // 6009  SICHERHEITSSCH. DEFEKT
O   DB1.DBX 1370.2; // QUITTIERT. GEDRÜCKT (MSTT/PC)
O   DB1.DBX 1370.3; // RESET-TASTE GEDRUECKT
R   DB2.DBX 1.1;    // 6009  SICHERHEITSSCH. DEFEKT
NETWORK
TITLE = RÜCKSETZEN LEISTG. ACHSANTRIEBE
O   DB2.DBX 0.0;    // 6000  NOT-AUS
O   DB2.DBX 1.1;    // 6009  SICHERHEITSSCH. DEFEKT
O(    ;
O   DB1.DBX 1370.2; // QUITTIERT. GEDRÜCKT (MSTT/PC)
O   DB1.DBX 1370.3; // RESET-TASTE GEDRUECKT
U   M 111.1;        // HM ANTRIEB ACHSEN NICHT BEREIT
)     ;
R   M 55.1;         // SCHÜTZ SCHRITTMOTORNETZTEIL
R   M 111.1;        // HM ANTRIEB ACHSEN NICHT BEREIT
END_FUNCTION
FUNCTION FC 12 : VOID
NAME: JOG_ACHSEN
BEGIN
NETWORK
TITLE = JOG-ACHSEN FREIGABE
;       UN  E 7.7;          // FREIGABE VON SCHUTZZAUN AKTIV
U   M 104.0;        // SUM  AFG/EFG
U(  ;
O   DB20.DBX  324.4;// REFERENZPUNKT AKTIV
O   M 50.1;         // SCHLÜSSELSCHALTER AUF SONDERBETRIEB
)   ;
U   M 146.7         // FREIGABE VON SICHERHEITSEINRICHTUNGEN
=   M 112.0;        // JOG-ACHSEN FREIGABE
NETWORK
TITLE = JOG-ACHSEN/STARTVERR.
U   DB20.DBX 1.2;   // FC JOG-ACHSEN
UN  M 112.0;        // JOG-ACHSEN FREIGABE
O   M 146.6         // NEGATIV FLANKENMERKER AUS FREIGABE VON SICHERHEITSEINRICHTUNGEN
SPBN   M051
=   DB20.DBX 1.2;   // JOG-ANFORDERUNG
L   DW#16#0000_0000;// LADE 0
T   DB20.DBD 10;    // JOG IN ALLEN ACHSEN AUS
M051: NOP 0
NETWORK
TITLE = JOG C-ACHSE / STARTVERR.
U   DB20.DBX 1.2;   // FC JOG-ACHSEN
U(
O   DB20.DBX 11.4;  // JOG-KANALACHSE C IN POS.RICHTUNG
O   DB20.DBX 13.4;  // JOG-KANALACHSE C IN NEG.RICHTUNG
UN  DB10.DBX 100.2  // ACC RUNDACHSE AKTIVIEREN 5000  UPM
UN  DB10.DBX 100.3  // ACC RUNDACHSE AKTIVIEREN 10000 UPM
)
R   DB20.DBX 1.2;   // FC JOG-ACHSEN
END_FUNCTION
FUNCTION FC 22 : VOID
NAME: AUTOMATISCH IN BA REF UMSCHALTEN
BEGIN
NETWORK
TITLE = AUTOMATISCH IN BA REF UMSCHALTEN
U   DB1.DBX 1370.0; // 1.SPS SCHLEIFENDURCHLAUF
S   DB100.DBX500.0; // BIT FRÜR BA JOG
L   DB20.DBW 288    // BA ANWAHL
L   0
==I
SPB M0011
L   DB20.DBW 288    // BA ANWAHL
T   DB100.DBW 500
M0011: NOP 0
UN  DB20.DBX 324.4; // REFERENZPUNKT AKTIV
UN  DB1.DBX 1374.4  // AUX ON TASTE
U   M 110.0;        // AUX-ON
UN  M 50.1;         // SCHLÜSSELSCHALTER AUF SONDERBETRIEB 8++++++++++
UN  DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
SPBN M0012
L   W#16#0400       // BIT BA REF SETZEN
T   DB20.DBW 288    // BA ANWAHL
SPA M0013
M0012: NOP 0
L   DB100.DBW 500
T   DB20.DBW 288    // BA ANWAHL
M0013: NOP 0
L   DB20.DBW 326
L   DB20.DBW 288
<>I
=   DB20.DBX 0.0    // BA WECHSELANFORDERUNG
END_FUNCTION
FUNCTION FC 13 : VOID
NAME: REF_ACHSEN
BEGIN
NETWORK
TITLE = FREIGABE REFERENZIEREN
U   M 104.0;        // SUM AFG/EFG
U   M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
UN  M 100.2;        // VORSCHUBSCHALTER AUF 0%
;       UN  M 131.7;        // ACHSEN IN BEWEGUNG
UN  DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
=   M 120.6;        // FREIGABE REFERENZIEREN
NETWORK
TITLE = REFERENZPUNKT ANFAHREN ABBRECHEN (RESET AUSLÖSEN)
U   M 103.1;        // BETRIEBSART REFERENZ
UN  M 50.3;         // FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
FP  M 122.4         // FLANKENMERKER RESET AUSLÖSEN
U   M 122.4         // FLANKENMERKER RESET AUSLÖSEN
UN  T 50;
O   DB1.DBX 1440.0; // NC-RESET AUSLÖSEN
=   DB1.DBX 1440.0; // NC-RESET AUSLÖSEN
NETWORK
TITLE = REFERENZIEREN DER RUNDACHSE VERHINDERN
U   DB20.DBX 9.2;   // REFERENZIEREN VON KANALACHSE A
UN  M 35.0          // HM RUNDACHSE AKTIVIERT
UN  M 36.0          // HM 4.5.ACHSE RIES AKTIVIERT
R   DB20.DBX 9.2;   // REFERENZIEREN VON KANALACHSE A
NETWORK
TITLE = REFPKT.X,Y,Z, VON MST ZUGLEICH ANFAHREN
;       UN  M 121.3;        // REFPKT.X,Y,Z,ZUGLEICH ANFAHREN
U   DB20.DBX 830.4; // VON MST ALLE ACHSEN REFERENZIEREN
U   M 103.1;        // BETRIEBSART REFERENZ
FP  M 121.0         // FM REFPKT.X,Z, VON MST ZUGLEICH ANFAHREN
NETWORK
TITLE = REFPKT.X,Y,Z,4,ZUGLEICH ANFAHREN AUSGELÖST VON PC-TASTE NUM 5 ODER MST-TASTE S228/156
U   DB20.DBX 8.0;   // REFERENZIEREN X-ACHSE
U   DB20.DBX 8.1;   // REFERENZIEREN Y-ACHSE
U   DB20.DBX 8.2;   // REFERENZIEREN Z-ACHSE
O   M 121.0         // FM REFPKT.X,Z, VON MST ZUGLEICH ANFAHREN
U   M 120.6;        // FREIGABE REFERENZIEREN
UN  M 121.3;        // REFPKT.X,Z,ZUGLEICH ANFAHREN
S   M 121.3;        // REFPKT X,Y,Z,ZUGLEICH ANFAHREN
FP  M 121.1         // FM ALLE ACHSEN REFERENZIEREN
O   DB1.DBX 1440.0; // RESET AUSGELÖST
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
O   M 122.5;        // FM REFERENZPUNKT AKTIV
R   M 121.3;        // REFPKT.X,Y,Z,ZUGLEICH ANFAHREN
R   M 121.7;        // HM Z-ACHSE REFERENZIEREN (Z-REFBERO NICHT BEDÄMPFT)
R   M 124.1         // HM REFERENZIEREN VON ACHSE A ERWÜNSCHT
R   M 124.6         // EINLESEFREIGABE WEGNEHMEN (VON RUNDACHSE)
NETWORK
TITLE = REFPKT.X,Y,Z, ZUGLEICH ANFAHREN
U   M 121.1         // FM ALLE ACHSEN REFERENZIEREN
U   M 103.1;        // BETRIEBSART REFERENZ
SPBN M102;
SET;
=   DB20.DBX 1.1;   // REFERENZPKT.ANFAHREN (UMLENKUNG)
=   DB20.DBX 8.2;   // REFERENZIEREN Z-ACHSE
M102: NOP 0;
NETWORK
TITLE = Z-ACHSE REFERENZIEREN (FC-CODE)
U   DB20.DBX 8.2;   // REFERENZIEREN Z-ACHSE
U(
ON  E 0.2           // REFERENZSCHALTER ACHSE 2 (Z)
ON  DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
O   M 161.7         // VERDREHSICHERUNG IM EINGRIFF
)
U   M 120.6;        // FREIGABE REFERENZIEREN
UN  M 131.7;        // ACHSEN IN BEWEGUNG
S   M 121.7;        // HM Z-ACHSE REFERENZIEREN (Z-REFBERO NICHT BEDÄMPFT)
=   DB20.DBX 8.2;   // REFERENZIEREN Z-ACHSE
SPBN M100;
=   DB20.DBX 1.1;   // REFERENZPKT.ANFAHREN (UMLENKUNG)
M100: NOP 0;
NETWORK
TITLE = Z-ACHSE REFERENZIEREN HM LÖSCHEN
U   M 120.7;        // FM REFERENZPUNKT Z-ACHSE AKTIV
SPBN M101;
R   M 149.5         // SCHRITT 5.2  Z-ACHSE AUF REF.PKT.FAHREN
R   M 161.7         // VERDREHSICHERUNG IM EINGRIFF 8+++++
R   M 121.7;        // HM Z-ACHSE REFERENZIEREN (Z-REFBERO NICHT BEDÄMPFT)
R   DB15.DBX 20.1   // SCHRITT 3.2 IN DEN SETTINGDATEN SPEICHERN   8++++++
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
M101: NOP 0;
NETWORK
TITLE = REFERENZPUNKT VERLOREN
ON  M 50.2;         // NICHT NOT-AUS
O   M 121.1         // FM ALLE ACHSEN REFERENZIEREN
O   DB2.DBX 1.2;    // ALARM X-ACHSE DEFEKT
O   DB2.DBX 1.3;    // ALARM Y-ACHSE DEFEKT
O   DB2.DBX 1.4;    // ALARM Z-ACHSE DEFEKT
U   DB20.DBX 324.4; // REFERENZPUNKT AKTIV
=   DB20.DBX 348.0; // REFERENZPUNKT VERLOREN
NETWORK
TITLE = REFPKT.ANFAHREN SPERREN
U   DB20.DBX 1.1;   // REFERENZPKT ANFAHREN (UMLENKUNG)
UN  M 120.6;        // FREIGABE REFERENZIEREN
R   DB20.DBX 1.1;   // REFERENZPKT ANFAHREN (UMLENKUNG)
R   DB20.DBX 8.0;   // REFERENZIEREN X-ACHSE
R   DB20.DBX 8.1;   // REFERENZIEREN Y-ACHSE
R   DB20.DBX 8.2;   // REFERENZIEREN Z-ACHSE
R   DB20.DBX 9.2;   // REFERENZIEREN VON KANALACHSE A
S   DB20.DBX 318.7; // NEG.QUITTUNG DNC
NETWORK
TITLE = REFERENZIEREN Z-ACHSE VERHINDERN
U   E 0.2           // REFERENZSCHALTER ACHSE 2 (Z)
U   DB20.DBX 8.2;   // REFERENZIEREN Z-ACHSE
U   M 120.6;        // FREIGABE REFERENZIEREN
UN  M 121.7;        // HM Z-ACHSE REFERENZIEREN (Z-REFBERO NICHT BEDÄMPFT)
UN  M 120.5         // WERKZEUGWENDEN IM SCHRITT4 ABGEBROCHEN
UN  M 131.7;        // ACHSEN IN BEWEGUNG
UN  M 161.7         // VERDREHSICHERUNG IM EINGRIFF
S   M 120.0;        // ZUERST HS DANN Z-ACHSE REFERENZIEREN
R   DB20.DBX 1.1;   // REFERENZPKT.ANFAHREN (UMLENKUNG)
R   DB20.DBX 8.2;   // REFERENZIEREN Z-ACHSE
NETWORK
TITLE = SCHRITT 1  SPINDEL IN POSITIONIERBETRIEB SCHALTEN
U   M 120.0;        // ZUERST HS DANN Z-ACHSE REFERENZIEREN
UN  M 152.0;        // WERKZEUGWENDEN AKTIV
UN  M 120.1;        // SCHRITT 1
UN  M 120.2;        // SCHRITT 2
UN  M 120.3;        // SCHRITT 3
UN  M 120.4;        // SCHRITT 4
S   M 120.1;        // SCHRITT 1
SPBN M103;
S   M 94.7;         // SPINDELFREIGABE K0
S   DB25.DBX 340.3; // EINLESEFREIGABE K1
S   DB25.DBX 340.4; // ACHSFREIGABE    K1
S   M 155.7         // REGLERFREIGABE FUER HA BEIM WERKZEUGWENDEN
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 549.2; // SPINDEL in den Positionierbetrieb
M103: NOP 0;
NETWORK
TITLE = SCHRITT 2  SPINDEL REFERENZIEREN
U   M 120.0         // ZUERST HS DANN Z-ACHSE REFERENZIEREN
U   DB25.DBX 332.0; // NC-SATZ FERTIG
U   M 120.1;        // SCHRITT 1
S   M 120.2;        // SCHRITT 2
R   M 120.1;        // SCHRITT 1
R   DB25.DBX 332.0; // NC-SATZ FERTIG
SPBN M104;
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 548.5; // GENAUHALTMODUS SETZEN
=   DB25.DBX 549.0; // G1 WIRD AUSGELÖST
=   DB25.DBX 549.4; // VORSCHUB IN GRAD/S WERT IN DBD556
L   +2.88E+03;
T   DB25.DBD 556;   // F-WERT IN M/S ODER M/U
S   DB25.DBX 21.4;  // POSITIONSANFORDERUNG FÜR KANALACHSE C
L   DB10.DBD 18;    // POSITIONS-OFFSETWERT AUS MSD-FILE
T   DB25.DBD 70;    // POSITIONSWERT FÜR KANALACHSE C
M104: NOP 0;
NETWORK
TITLE = Z-ACHSE NACH DER HS REFERENZIEREN
U   DB25.DBX 332.0; // NC-SATZ FERTIG
U   M 120.0         // ZUERST HS DANN Z-ACHSE REFERENZIEREN
U   M 120.2;        // SCHRITT 2
S   M 120.3;        // SCHRITT 3
R   M 120.2;        // SCHRITT 2
R   DB25.DBX 332.0; // NC-SATZ FERTIG
SPBN M105;
SET
=   DB20.DBX 1.1;   // REFERENZPKT.ANFAHREN (UMLENKUNG)
=   DB20.DBX 8.2;   // REFERENZIEREN Z-ACHSE
M105: NOP 0;
NETWORK
TITLE = SCHRITT 4 HA VON POSITIONIERBETRIEB AUF SPINDEL
U   DB1.DBX 134.2;  // REFERENZPUNKT Z-ACHSE AKTIV
U   M 120.3;        // SCHRITT 3
O(
U   DB1.DBX 134.2;  // REFERENZPUNKT Z-ACHSE AKTIV
U   M 120.6;        // FREIGABE REFERENZIEREN
U   M 120.5         // WERKZEUGWENDEN IM SCHRITT4 ABGEBROCHEN
)
S   M 120.4;        // SCHRITT 4
R   M 120.3;        // SCHRITT 3
SPBN M106;
R   M 155.7         // REGLERFREIGABE FUER HA BEIM WERKZEUGWENDEN
R   M 120.5         // WERKZEUGWENDEN IM SCHRITT4 ABGEBROCHEN
=   DB25.DBX 1.4;   // NC-SATZ ABSCHICKEN
=   DB25.DBX 549.3; // HA VON POSITIONIERBETRIEB AUF SPINDEL
M106: NOP 0
NETWORK
TITLE = SPINDEL REFERENZIEREN BEENDEN
U   DB25.DBX 332.0; // NC-SATZ FERTIG
U   M 120.4;        // SCHRITT 4
SPBN M107;
R   M 120.4;        // SCHRITT 4
R   DB25.DBX 340.3; // EINLESEFREIGABE K1
R   DB25.DBX 340.4; // ACHSFREIGABE    K1
R   M 94.7;         // SPINDELFREIGABE K0
M107: NOP 0
NETWORK
TITLE = AUSBLASMAGNETVENTIL EINSCHALTEN UND SCHRITTE IN DEN SETTINGDATEN LÖSCHEN
O   DB15.DBX 20.4   // WZW SCHRITT 4 GESPEICHERT (ZAHNRAD IM EINGRIFF)
O   DB15.DBX 20.0;  // SCHRITT 3.3 IN DEN SETTINGDATEN SPEICHERN
O   DB15.DBX 20.5;  // SCHRITT 5.1 IN DEN SETTINGDATEN SPEICHERN
O   M 161.0;        // HM WZW-AUSBLASMAGNETVENTIL SCHALTEN
O   M 120.0         // ZUERST HS DANN Z-ACHSE REFERENZIEREN
U   DB20.DBX 8.2;   // REFERENZIEREN Z-ACHSE
S   M 56.5;         // WZW-AUSBLASMAGNETVENTIL
R   DB15.DBX 20.3;  // SCHRITT 3 IN DEN SETTINGDATEN LÖSCHEN
R   DB15.DBX 20.0;  // SCHRITT 3.3 IN DEN SETTINGDATEN SPEICHERN
R   DB15.DBX 20.4   // SCHRITT 4 IN DEN SETTINGDATEN SPEICHERN
R   DB15.DBX 20.5;  // SCHRITT 5.1 IN DEN SETTINGDATEN SPEICHERN
R   M 161.0;        // HM WZW-AUSBLASMAGNETVENTIL SCHALTEN
=   DB20.DBX 348.3; // ANFORDERUNG ZUM SOFORTIGEN SETTINGDATENSICHERN
NETWORK
TITLE = FM REFERENZPUNKT Z-ACHSE AKTIV
U   DB1.DBX 134.2;  // REFERENZPUNKT Z-ACHSE AKTIV
FP  M 120.7;        // FM REFERENZPUNKT Z-ACHSE AKTIV
NETWORK
TITLE = WERKZEUGWENDE-MODE VERLASSEN UND AUSBLASMV. AUSSCHALTEN
ON  M 110.0;        // AUX-ON
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
O   DB1.DBX 1440.0; // RESET AUGELÖST
O   M 120.7;        // FM REFERENZPUNKT Z-ACHSE AKTIV
R   M 56.5;         // WZW-AUSBLASMAGNETVENTIL
R   M 120.0         // ZUERST HS DANN Z-ACHSE REFERENZIEREN
R   M 120.1;        // SCHRITT 1
R   M 120.2;        // SCHRITT 2
R   M 120.3;        // SCHRITT 3
NETWORK
TITLE = X-ACHSE REFERENZIEREN (FC-CODE)
U   M 121.3;        // REFPKT.X,Z,ZUGLEICH ANFAHREN
U   M 120.7;        // FM REFERENZPUNKT Z-ACHSE AKTIV
O(;
U   M 120.6;        // FREIGABE REFERENZIEREN
UN  M 121.3;        // REFPKT.X,Z,ZUGLEICH ANFAHREN
U   DB20.DBX 8.0;   // REFERENZIEREN X-ACHSE
UN  M 131.7;        // ACHSEN IN BEWEGUNG
);
=   DB20.DBX 8.0;   // REFERENZIEREN X-ACHSE
R   DB20.DBX 8.2;   // REFERENZIEREN Z-ACHSE
SPBN M108;
SET;
=   DB20.DBX 1.1;   // REFERENZPKT.ANFAHREN (UMLENKUNG)
M108: NOP 0;
NETWORK
TITLE = Y-ACHSE REFERENZIEREN (FC-CODE)
U   M 121.3;        // REFPKT.X,Y,Z,ZUGLEICH ANFAHREN
U   M 120.7;        // FM REFERENZPUNKT Z-ACHSE AKTIV
O(;
U   M 120.6;        // FREIGABE REFERENZIEREN
UN  M 121.3;        // REFPKT.X,Y,Z,ZUGLEICH ANFAHREN
U   DB20.DBX 8.1;   // REFERENZIEREN Y-ACHSE
UN  M 131.7;        // ACHSEN IN BEWEGUNG
);
=   DB20.DBX 8.1;   // REFERENZIEREN Y-ACHSE
NETWORK
TITLE = FM REFERENZPUNKT AKTIV
U   DB20.DBX 324.4; // REFERENZPUNKT AKTIV
FP  M 122.5;        // FM REFERENZPUNKT AKTIV
NETWORK
TITLE = 7017 MELDUNG REFERENZPUNKT ANFAHREN
UN  DB20.DBX 324.4; // REFERENZPUNKT AKTIV
UN  DB3.DBX 5.2;    // 7042  MASCHINENTÜR INIT.
UN  DB3.DBX 2.4;    // 7020  SONDERBETRIEB AKTIV
UN  DB3.DBX 5.0;    // 7040  MASCHINENTÜR OFFEN
UN  DB3.DBX 2.0;    // 7016  HILFSANTRIEBE EINSCHALTEN
UN  DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
UN  DB3.DBX 2.2;    // 7018  SCHLÜSSEL UMSCHALTEN
=   DB3.DBX 2.1;    // 7017  REFERENZPUNKT ANFAHREN
END_FUNCTION
FUNCTION FC 14: VOID
NAME: AUX_ON
BEGIN
NETWORK  1
TITLE = FREIGABE DIFFERENZIALLEITUNGSTREIBER AUF ACC-MOTHERBOARD
U   DB10.DBX 2.0;   // AC 2000 AKTIVIEREN
U   M 110.0;        // AUX-ON
S   A 3.7;          // FREIGABE DIFFERENZIALLEITUNGSTREIBER TAKTE FÜR SM
U   DB2.DBX 0.0;    // 6000  NOT-AUS
L   S5TIME#2S;      //
SE  T 1;
U   T 1;
U   DB10.DBX 2.0;   // AC 2000 AKTIVIEREN
R   A 3.7;          // FREIGABE DIFFERENZIALLEITUNGSTREIBER TAKTE FÜR SM
NETWORK
TITLE = 6000  ALARM NOT-AUS
UN  M 50.2;         // NICHT NOT-AUS
S   DB2.DBX 0.0;    // 6000  NOT-AUS
O   DB1.DBX 1370.2; // QUITTIERT. GEDRÜCKT (MSTT/PC)
O   DB1.DBX 1370.3; // RESET-TASTE GEDRÜCKT
R   DB2.DBX 0.0;    // 6000 ALARM NOT-AUS
NETWORK
TITLE = FM NOT-AUS
U   DB2.DBX 0.0;    // 6000  NOT-AUS
FP  M 102.0;        // FM 6000  NOT-AUS
NETWORK
TITLE = MASCHINENTÜR OFFEN
UN  M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
=   M 110.1;        // MASCHINENTÜR OFFEN
NETWORK
TITLE = 6024  ALARM MASCHINENTÜR OFFEN
UN  T 25;           // SONDERBETRIEB AKTIV (T25)
;       UN  E 7.7;          // FREIGABE VON SCHUTZZAUN AKTIV
U(  ;
O   M 131.7;        // ACHSEN IN BEWEGUNG
O   M 152.1         // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
)   ;
O   DB1.DBX 1358.0; // ACHSE IN BEWEGUNG
O   M 152.1         // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
U   M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
O   ;
U   DB20.DBX 324.0; // PROGRAMM LÄUFT
UN  DB20.DBX 324.1; // STOP-ZUSTAND
UN  DB20.DBX 325.1; // STOP-ZUSTAND DURCH SINGLE
U   M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
O   M 51.1;         // HAUPTANTRIEB EINGESCHALTET
O(
UN  M 114.3;        // ISTDREHZAHL KLEINER 20U/MIN
UN  M 55.7;         // FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
)
=   M 110.2;        // HM ALARM MASCHINENTÜR OFFEN
U   M 110.2;        // HM ALARM MASCHINENTÜR OFFEN
U   M 110.1;        // MASCHINENTÜR OFFEN
UN  DB2.DBX 0.0;    // 6000  NOT-AUS
UN  DB3.DBX 5.2;    // 7042  MASCHINENTÜR INIT.
S   DB2.DBX 3.0;    // 6024 ALARM MASCHINENTÜR OFFEN
O   DB1.DBX 1370.2; // QUITTIERT. GEDRÜCKT (PC/MSTT)
O   DB1.DBX 1370.3; // RESET-TASTE GEDRÜCKT
R   DB2.DBX 3.0;    // 6024 ALARM MASCHINENTÜR OFFEN
NETWORK
TITLE = SUM ALARME 1
O   DB2.DBX 0.0;    // 6000  NOT-AUS
O   DB2.DBX 0.5;    // 6005 ÜBERTEMPERATUR BREMSMODUl
O   DB2.DBX 0.7;    // 6007  SICHERHEITSSCH. DEFEKT
O   DB2.DBX 1.0;    // 6008  FEHLENDER CAN-TEILN.
O   DB2.DBX 1.1;    // 6009  SICHERHEITSSCH. DEFEKT
;       O   DB2.DBX 1.2;    // 6010  ANTRIEB X-ACHSE N. BEREIT
;       O   DB2.DBX 1.3;    // 6011  ANTRIEB Y-ACHSE N. BEREIT
;       O   DB2.DBX 1.4;    // 6012  ANTRIEB Z-ACHSE N. BEREIT
O   DB2.DBX 1.5;    // 6013  HAUPTANTRIEB NICHT BEREIT
O   DB2.DBX 1.6;    // 6014  KEINE HAUPTSPINDELDREHZAHL
;       L   DB2.DBW 0;      // WORT/ALARME 1
;       L   W#16#0;         // LADE KONSTANTE HEX 0
;       <>I ; // VERGLEICH AUF UNGLEICH
=   M 105.0;        // SUM ALARME 1
NETWORK
TITLE = SUM ALARME 2
L   DB2.DBW 2;      // WORT/ALARME 2
L   W#16#0;         // LADE KONSTANTE HEX 0
<>I ;               // VERGLEICH AUF UNGLEICH
=   M 105.1;        // SUM ALARME 2
NETWORK
TITLE = SUM ALARME 3/THERM. ALARME
L   DB2.DBW 4;      // BYTE/ALARME 3
L   W#16#0;         // LADE KONSTANTE HEX 0
<>I ;               // VERGLEICH AUF UNGLEICH
=   M 105.2;        // SUM ALARME 3/THERM. ALARME
NETWORK
TITLE = SUM ALARME 5
L   DB2.DBW 6;      // WORT/ALARME 5
L   W#16#0;         // LADE KONSTANTE HEX 0
<>I ;               // VERGLEICH AUF UNGLEICH
=   M 105.3;        // SUM ALARME 5
NETWORK
TITLE = SUM ALARME 6
L   DB2.DBW 8;      // WORT/ALARME 6
L   W#16#0;         // LADE KONSTANTE HEX 0
<>I ;               // VERGLEICH AUF UNGLEICH
=   M 105.4;        // SUM ALARME 6
NETWORK
TITLE = FM TASTE AUX-ON (MSTT/PC)
U   DB1.DBX 1374.4; // TASTE AUX-ON (PC)
UN  DB1.DBX 1374.3; // TASTE AUX-OFF (PC)
FP  M 110.5;        // FM TASTE AUX-ON
NETWORK
TITLE = FM TASTE AUX-OFF (MSTT/PC)
U   DB1.DBX 1374.3; // TASTE AUX-OFF (PC)
UN  DB1.DBX 1374.4; // TASTE AUX-ON (PC)
FP  M 110.7;        // FM TASTE AUX-OFF
NETWORK
TITLE = ANWAHL AUX-ON
U   DB1.DBX 1374.4; // TASTE AUX-ON (PC)
UN  DB1.DBX 1374.3; // TASTE AUX-OFF (PC)
O   M 168.1;        // ROBOTIK/FM AUX-ON
O   DB1.DBX 1382.4; // DNC/AUX-ON
UN  DB1.DBX 1366.3; // ALARM AKTIV
S   M 110.0;        // AUX-ON
NETWORK
TITLE = ABWAHL AUX-ON
UN  DB20.DBX 324.0; // PROGRAMM LÄUFT
U   M 55.7;         // FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
UN  M 131.7;        // ACHSEN IN BEWEGUNG
UN  M 152.1         // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
U(  ;
O   M 110.7;        // FM TASTE AUX-OFF
O   DB1.DBX 1382.3; // DNC/AUX-OFF
)   ;
O   M 105.0;        // SUM ALARME 1
O   M 105.1;        // SUM ALARME 2
O   M 105.2;        // SUM ALARME 3/THERM. ALARME
O   M 105.3;        // SUM ALARME 5
O   M 105.4;        // SUM ALARME 6
ON  M 50.2;         // NICHT NOT-AUS
O   DB1.DBX 1370.1; // FATALER FEHLER AUFGETRETEN
R   M 110.0;        // AUX-ON
NETWORK
TITLE = FM AUX-ON
U   M 110.0;        // AUX-ON
FP  M 110.3;        // FM AUX-ON
U   M 110.0;        // AUX-ON
FN  M 110.4;        // /FM AUX-ON
NETWORK
TITLE = AUX-ON  SFG
ON  M 110.0;        // AUX-ON
O   M 110.1;        // MASCHINENTÜR OFFEN
=   M 94.0;         // AUX-ON  SFG
NETWORK
TITLE = AUX-ON   AFG/EFG
ON  M 110.0;        // AUX-ON
ON  M 50.3;         // FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
=   M 90.0;         // AUX-ON   AFG/EFG
NETWORK
TITLE = 7042  MASCHINENTÜR INIT.
O   DB1.DBX 1370.0; // 1.SPS-SCHLEIFENDURCHLAUF
O   DB2.DBX 0.0;    // 6000  NOT-AUS
S   M 21.2          // HM 7042  MASCHINENTÜR INIT.
UN  DB3.DBX 2.0;    // 7016  HILFSANTRIEBE EINSCHALTEN
U   M 21.2          // HM 7042  MASCHINENTÜR INIT.
S   DB3.DBX 5.2;    // 7042  MASCHINENTÜR INIT.
O   E 5.0;          // TÜRAUTOMATIK ENDSCH. TÜR OFFEN
O   M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
R   M 21.2          // HM 7042  MASCHINENTÜR INIT.
R   DB3.DBX 5.2;    // 7042  MASCHINENTÜR INIT.
NETWORK
TITLE = 7040  MASCHINENTÜR OFFEN
U   M 110.1;        // MASCHINENTÜR OFFEN
UN  DB2.DBX 3.0;    // 6024  MASCHINENTÜR OFFEN
UN  DB3.DBX 5.2;    // 7042  MASCHINENTÜR INIT.
UN  DB3.DBX 2.4;    // 7020  SONDERBETRIEB AKTIV
UN  DB3.DBX 2.0;    // 7016  HILFSANTRIEBE EINSCHALTEN
=   DB3.DBX 5.0;    // 7040  MASCHINENTÜR OFFEN
NETWORK
TITLE = 7016  HILFSANTRIEBE EINSCHALTEN
UN  M 110.0;        // AUX-ON
;       UN  DB3.DBX 5.2;    // 7042  MASCHINENTÜR INIT.
UN  DB3.DBX 2.4;    // 7020  SONDERBETRIEB AKTIV
;       UN  DB3.DBX 5.0;    // 7040  MASCHINENTÜR OFFEN
UN  DB3.DBX 2.7;    // MELDUNG 7023 WARTEZEIT HAUPTANTRIEB
=   DB3.DBX 2.0;    // 7016  HILFSANTRIEBE EINSCHALTEN
NETWORK
TITLE = SPS/OB-->NOT-AUS AKTIV
U   DB2.DBX 0.0;    // 6000  NOT-AUS
=   DB1.DBX 1390.5; // SPS/RM-->NOT-AUS AKTIV
NETWORK
TITLE = SPS/OB-->MASCHINENTÜR GESCHL.
U   M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
=   DB1.DBX 1390.1; // SPS/RM-->MASCHINENTÜR GESCHL.
NETWORK
TITLE = SPS/OB-->AUX-ON
U   M 110.0;        // AUX-ON
=   DB1.DBX 1390.2; // SPS/RM-->AUX-ON
NETWORK
TITLE = AUX-ON/NEG.DNC-QUITTUNG
U   DB1.DBX 1366.0; // DNC-BETRIEB AKTIV
U(  ;
U   DB1.DBX 1382.4; // DNC/AUX-ON
UN  M 110.0;        // AUX-ON
O   ;
U   DB1.DBX 1382.3; // DNC/AUX-OFF
U   M 110.0;        // AUX-ON
)   ;
S   DB1.DBX 1398.1; // AUX-ON/NEG.DNC-QUITTUNG
END_FUNCTION
FUNCTION FC 15 : VOID
NAME: NC_STARTVERR UND BETRIEBSARTEN
BEGIN
NETWORK
TITLE = AUX_ON_NC_STARTVERR.
O(;
UN  M 104.2;        // SUM  SFG
UN  DB20.DBX 324.2; // DRYRUN
UN  M 113.0;        // SONDERBETRIEB AKTIV
);
ON  M 104.0;        // SUM  AFG/EFG
O   DB1.DBX 1366.3; // ALARM AKTIV
O   M 113.0;        // SONDERBETRIEB AKTIV
=   M 96.0;         // AUX-ON/NC-STARTVERR.
NETWORK
TITLE = SCHLÜSSEL BA AUTO/NC-STARTVERR.
U   M 50.1;         // SCHLÜSSELSCHALTER AUF SONDERBETRIEB
UN  M 113.0;        // SONDERBETRIEB AKTIV
=   M 96.6;         // SCHLÜSSEL BA AUTO/NC-STARTVERR.
NETWORK
TITLE = SUM NC-START VERR.
L   MW 96;          // WORT/NC-STARTVERR.
L   W#16#0;         // LADE KONSTANTE HEX 0
<>I;                // VERGEICH AUF UNGEICH
=   M 104.3;        // SUM NC-STARTVERR.
NETWORK
TITLE = BETRIEBSART AUTOMATIK UND MDI
;       UN  DB20.DBX 326.2; // BETRIEBSART MDI
;       UN  DB20.DBX 326.4; // BETRIEBSART AUTOMATIK
UN  DB20.DBX 326.0; // BETRIEBSART JOG
UN  DB20.DBX 326.1; // BETRIEBSART EDIT
UN  DB20.DBX 326.3; // BETRIEBSART REPOS
UN  DB20.DBX 326.5; // BETRIEBSART INC 1
UN  DB20.DBX 326.6; // BETRIEBSART INC 10
UN  DB20.DBX 326.7; // BETRIEBSART INC 100
UN  DB20.DBX 327.0; // BETRIEBSART INC 1000
UN  DB20.DBX 327.1; // BETRIEBSART INC 10000
UN  DB20.DBX 327.2; // BETRIEBSART REFERENZ
UN  DB20.DBX 327.3; // BETRIEBSART INC VAR
UN  DB20.DBX 327.4; // BETRIEBSART PRESET
O   DB1.DBX 1402.5; // HEIDENHAIN TNC355 AKTIV
=   M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
NETWORK
TITLE = BETRIEBSART REFERENZ
;       UN  DB20.DBX 327.2; // BETRIEBSART REFERENZ
UN  DB20.DBX 326.0; // BETRIEBSART JOG
UN  DB20.DBX 326.1; // BETRIEBSART EDIT
UN  DB20.DBX 326.2; // BETRIEBSART MDI
UN  DB20.DBX 326.3; // BETRIEBSART REPOS
UN  DB20.DBX 326.4; // BETRIEBSART AUTOMATIK
UN  DB20.DBX 326.5; // BETRIEBSART INC 1
UN  DB20.DBX 326.6; // BETRIEBSART INC 10
UN  DB20.DBX 326.7; // BETRIEBSART INC 100
UN  DB20.DBX 327.0; // BETRIEBSART INC 1000
UN  DB20.DBX 327.1; // BETRIEBSART INC 10000
UN  DB20.DBX 327.3; // BETRIEBSART INC VAR
UN  DB20.DBX 327.4; // BETRIEBSART PRESET
=   M 103.1;        // BETRIEBSART REFERENZ
NETWORK
TITLE = 7018  SCHLÜSSEL UMSCHALTEN
U   M 50.1;         // SCHLÜSSELSCHALTER AUF SONDERBETRIEB
UN  M 113.0;        // SONDERBETRIEB AKTIV
;       U   M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
;       U   DB20.DBX 0.2;   // FC NC-START
S   DB3.DBX 2.2;    // 7018  SCHLÜSSEL UMSCHALTEN
ON  M 50.1;         // SCHLÜSSELSCHALTER AUF SONDERBETRIEB
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
O   M 113.0;        // SONDERBETRIEB AKTIV
R   DB3.DBX 2.2;    // 7018  SCHLÜSSEL UMSCHALTEN
NETWORK
TITLE = FM CYCLE-START TASTE VON BEDIENPULT UND RAFITASTE
O   DB20.DBX 831.5  // CYCLE-START TASTE VON BEDIENPULT
O   E  5.2;         // CYCLE-START TASTE VON RAFITASTE
FP  M 105.5;        // FM CYCLE-START TASTE VON BEDIENPULT
U   M 105.5;        // FM CYCLE-START TASTE VON BEDIENPULT
=   DB20.DBX 3.6;   // NC-START ANFORDERUNG
NETWORK
TITLE = FM NC-STOPP TASTE VON BEDIENPULT
O   DB20.DBX 831.4  // NC-STOPP TASTE VON BEDIENPULT
FP  M 105.6;        // FM NC-STOPP TASTE VON BEDIENPULT
O   M 105.6;        // FM NC-STOPP TASTE VON BEDIENPULT
O   DB20.DBX 4.1;   // NC-STOPP ANFORDERUNG
=   DB20.DBX 4.1;   // NC-STOPP ANFORDERUNG
NETWORK
TITLE = FM RESET TASTE VON BEDIENPULT
O   DB20.DBX 828.6  // RESET TASTE VON BEDIENPULT
FP  M 105.7;        // FM RESET TASTE VON BEDIENPULT
O   M 105.7;        // FM RESET TASTE VON BEDIENPULT
O   DB20.DBX 4.0;   // RESET ANFORDERUNG
=   DB20.DBX 4.0;   // RESET ANFORDERUNG
NETWORK
TITLE = NC-START/STARTVERR.
;8******       U   E 7.7;          // FMS BETRIEB AKTIV
O   M 168.7;        // ROBOTIK/FM NC-START
O   DB20.DBX 0.2;   // FC NC-START
U   M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
UN  M 104.3;        // SUM  NC-STARTVERR.
=   DB20.DBX 0.2;   // FC NC-START
NETWORK
TITLE = NC-START/FC DNC-QUITTUNG
U   DB1.DBX 1366.0; // DNC-BETRIEB AKTIV
U   DB20.DBX 0.2;   // FC NC-START
U   M 104.3;        // SUM  NC-STARTVERR.
S   DB20.DBX 319.0; // NC-START/FC DNC-QUITTUNG
END_FUNCTION
FUNCTION FC 16 : VOID
NAME: RESET
BEGIN
NETWORK
TITLE = /FM AUX-ON
U   M 110.0;        // AUX-ON
FN  M 109.5;        // /FM AUX-ON
NETWORK
TITLE = /FM AUX-ON/WORT RESET
U   M 109.5;        // /FM AUX-ON
=   M 98.1;         // /FM AUX-ON/WORT RESET
NETWORK
TITLE = /FM SONDERBETRIEB AKTIV
U   M 113.0;        // SONDERBETRIEB AKTIV
FN  M 113.7;        // /FM SONDERBETRIEB AKTIV
NETWORK
TITLE = /FM SONDERBETRIEB/WORT RESET
U   M 113.7;        // /FM SONDERBETRIEB AKTIV
=   M 98.3;         // /FM SONDERBETRIEB/WORT RESET
NETWORK
TITLE = SUM RESET
L   MW 98;          // LADE WORT RESET
L   W#16#0;         // LADE KONSTANTE HEX 0
<>I;                // VERGLEICH AUF UNGLEICH
=   M 104.4;        // SUM RESET
NETWORK
TITLE = FC RESET/SPS
U   M 104.4;        // SUM RESET
S   DB1.DBX 1440.0; // FC RESET/SPS
END_FUNCTION
FUNCTION FC 17 : VOID
NAME: NC_START_UND_NC_STOP_VON_M0_ODER_M1
BEGIN
NETWORK
TITLE = FC NC-STOP
O   M 34.1;         // HM M0/M1 DYNAMISCH
O   DB20.DBX 0.1;   // FC NC_STOP
=   DB20.DBX 0.1;   // FC NC_STOP
NETWORK
TITLE = FC NC-START
UN  DB10.DBX 1.6;   // SPINDELSTART NACH M0
U   M 101.0;        // NC-START SPEICHER
U(;
O   DB20.DBX 224.3; // M3 STATISCH
O   DB20.DBX 224.4; // M4 STATISCH
);
O   M 168.7;        // ROBOTIK/FM NC-START
S   DB20.DBX 0.2;   // FC NC-START
U   DB20.DBX 0.2;   // FC NC-START
R   M 101.0;        // NC-START SPEICHER
END_FUNCTION
FUNCTION FC 18 : VOID
NAME: PLC-NC ÜBERGABE UND EFG,AFG,SFG
BEGIN
NETWORK
TITLE = SUM MELDUNGEN  AFG/EFG
L   DB3.DBW    0;   // WORT/MELDUNGEN  AFG/EFG
L   W#16#0;         // LADE KONSTANTE HEX 0
<>I;                // VERGLEICH AUF UNGLEICH
=   M 91.0;         // SUM MELDUNGEN  AFG/EFG
NETWORK
TITLE = SUM  AFG/EFG
L   MW 90;          // WORT  AFG/EFG
L   W#16#0;         // LADE KONSTANTE HEX 0
==I;                // VERGLEICH AUF GLEICH
=   M 104.0;        // SUM  AFG/EFG
=   M 104.1;        // SUM  EFG
NETWORK
TITLE = AFG/EFG
U   M 104.0;        // SUM  AFG/EFG
=   DB20.DBX 340.4; // ACHSFREIGABE
UN  M 145.0         // ANWAHL HAUPTANTRIEB M3
UN  M 145.1         // ANWAHL HAUPTANTRIEB M4
UN  M 124.4         // HM T 10 AFG/EFG
UN  M 124.6         // EINLESEFREIGABE WEGNEHMEN (VON RUNDACHSE)
U   M 104.0;        // SUM  AFG/EFG
=   DB20.DBX 340.3; // EINLESEFREIGABE
;   BELEGUNG VON MW 94 (SFG) :
;       M 94.0;         // AUX-ON  SFG
;       M 94.1;         // HA BETRIEBSBEREIT  SFG
;       M 94.2;         // DRYRUN  SFG
;       M 94.3;         // SPINDELFREIGABE K0 WZW
;       M 94.4;         // SPINDELFREIGABE WZW
;       M 94.5;         // SPINDELFREIGABE VON KANAL 0 SPERREN WZW
;       M 94.6;         // SPINDELFREIGABE VON KANAL 0 SPERREN WZW
;       M 94.7;         // SPINDELFREIGABE VON KANAL 0 SPERREN WZW
;       M 95.0          // SFG VON RUNDACHSANFORDERUNG
;       M 95.7;         // SPINDEL HALT AKTIV  SFG
NETWORK
TITLE = SUM  SFG
L   MW 94;          // WORT  SFG
L   W#16#0;         // LADE KONSTANTE HEX 0
==I;                // VERGLEICH AUF GLEICH
=   M 104.2;        // SUM  SFG
NETWORK
TITLE = SPINDELFREIGABE
U   M 104.2;        // SUM  SFG
=   DB20.DBX 340.5; // SPINDELFREIGABE
NETWORK
TITLE = ALARME/REFERENZPUNKTVERLUST
O   DB2.DBX 0.0;    // 6000  NOT-AUS
O   DB2.DBX 1.1;    // 6009  SICHERHEITSSCH. DEFEKT
O   DB2.DBX 1.2;    // 6010  ANTRIEB X-ACHSE N. BEREIT
O   DB2.DBX 1.3;    // 6011  ANTRIEB Y-ACHSE N. BEREIT
O   DB2.DBX 1.4;    // 6012  ANTRIEB Z-ACHSE N. BEREIT
FP  M 104.6;
U   M 104.6;
=   DB20.DBX 348.0; // REFERENZPUNKT DEAKTIVIEREN
NETWORK
TITLE = SPS/OB-->WZW AKTIV
U   DB10.DBX 75.5;  // SPS-SET /WZW
=   DB20.DBX 382.0; // SPS/OB-->WZW AKTIV
NETWORK
TITLE = SPS/OB-->TÜRAUTOMATIK AKTIV
U   DB10.DBX 75.0;  // SPS-SET /TÜRAUTO
=   DB1.DBX 1418.0; // SPS/OB-->TÜRAUTOMATIK AKTIV
NETWORK
TITLE = SPS/OB-->PNEUM. SCHRAUBST. AKTIV
U   DB10.DBX 75.1;  // SPS-SET /PNEUM. SCHR.
UN  DB10.DBX 75.6;  // SPS-SET /TEILAPPARAT
=   DB20.DBX 382.1; // SPS/OB-->PNEUM. SCHRAUBST. AKTIV
NETWORK
TITLE = SPS/OB-->AUSBLASEINR. AKTIV
U   DB10.DBX 75.3;  // SPS-SET /AUSBLASEN
=   DB20.DBX 382.4; // SPS/OB-->AUSBLASEINR. AKTIV
NETWORK
TITLE = SPS/OB-->KÜHLMITTEL AKTIV
SET
=   DB20.DBX 382.3; // SPS/OB-->KÜHLMITTEL AKTIV
NETWORK
TITLE = SPS/OB-->TEILAPPARAT AKTIV
U   DB10.DBX 75.6;  // SPS-SET /TEILAPPARAT
UN  DB10.DBX 75.1;  // SPS-SET /PNEUM. SCHR.
=   DB20.DBX 382.5; // SPS/OB-->TEILAPPARAT AKTIV
NETWORK
TITLE = SUM  SPINDEL EIN/AUS
UN  DB20.DBX 326.1; // BETRIEBSART EDIT
UN  DB20.DBX 326.2; // BETRIEBSART MDI
UN  DB20.DBX 326.3; // BETRIEBSART REPOS
UN  DB20.DBX 326.4; // BETRIEBSART AUTOMATIK
UN  DB20.DBX 327.2; // BETRIEBSART REFERENZ
UN  DB20.DBX 327.4; // BETRIEBSART PRESET
=   M 104.5;        // SUM  SPINDEL EIN/AUS
END_FUNCTION
FUNCTION FC 19 : VOID
NAME: SONDERBETRIEB
BEGIN
NETWORK
TITLE = FG SONDERBETRIEB/SICHERHEITSSCH.
UN  T 0;            // ZEITBEGRENZUNG FÜR DIE ZUSTIMMTASTE
U   M 50.1;         // SCHLÜSSELSCHALTER AUF SONDERBETRIEB
U   M 110.1;        // MASCHINENTÜR OFFEN
UN  M 153.0;        // WZW ABBRUCH MERKER AUS DEN SETTINGDATEN ZAHNRAD IM EINGRIFF
U(;
ON  M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
O(;
U   DB20.DBX 324.7; // EINZELSATZ AKTIV
U   DB20.DBX 324.2; // DRYRUN
);
);
=   M 55.6;         // FREIGABESIGNAL FÜR SONDERBETRIEB BEI OFFENER TÜR
NETWORK
TITLE = SONDERBETRIEB AKTIV
U   M 50.1;         // SCHLÜSSELSCHALTER AUF SONDERBETRIEB
U   M 110.0;        // AUX-ON
=   M 113.0;        // SONDERBETRIEB AKTIV
U   M 113.0;        // SONDERBETRIEB AKTIV
L   S5TIME#800MS;   // 8X0,1S
SA  T 25;           // STARTEN T25 ALS AUSSCHALTVERZ.
NETWORK
TITLE = SONDERBETRIEB NACH TÜR SCHLIESSEN BEENDEN
U   M 113.0;        // SONDERBETRIEB AKTIV
UN  M 51.2;         // ZUSTIMMTASTE GEDRÜCKT
U   M 50.3;         // FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
R   M 113.0;        // SONDERBETRIEB AKTIV
R   M 55.6;         // FREIGABESIGNAL FÜR SONDERBETRIEB BEI OFFENER TÜR
NETWORK
TITLE = SPS/NC-->SB AKTIV/ 2M/MIN
U   M 113.0;        // SONDERBETRIEB AKTIV
=   DB20.DBX 340.2; // SB AKTIV/VORSCHUBBEGR.FÜR AC 2M/MIN
NETWORK
TITLE = SONDERBETRIEB NACH 40 SEKUNDEN BEENDEN
U   M 51.2;         // ZUSTIMMTASTE GEDRÜCKT
L   S5T#40S;        // 40S
SE  T 0;            // ZEITBEGRENZUNG FÜR DIE ZUSTIMMTASTE
NETWORK
TITLE = 7020  SONDERBETRIEB AKTIV
U   M 113.0;        // SONDERBETRIEB AKTIV
UN  DB3.DBX 5.2;    // 7042  MACHINETÜR INIT.
UN  DB3.DBX 2.2;    // 7018  SCHLÜSSEL UMSCHALTEN
=   DB3.DBX 2.4;    // 7020  SONDERBETRIEB AKTIV
NETWORK
TITLE = SPS/OB-->HANDBETRIEB EIN
U   M 50.1;         // SCHLÜSSELSCHALTER AUF SONDERBETRIEB
=   DB1.DBX 1390.6; // SPS/OB->SCHLÜSSELSCH.SONDERBETRIEB EIN
END_FUNCTION
FUNCTION FC 20 : VOID
NAME: INITIALISIERUNGEN UND ÜBERWACHUNGEN
BEGIN
NETWORK
TITLE =  FATALER FEHLER AUFGETRETEN
U   DB1.DBX 1370.1; // FATALER FEHLER AUFGETRETEN
SPBN   M012
L   W#16#0;         // LADE HEX 0
T   AW 0
T   AW 2
T   AW 4
T   AW 6
M012:  NOP 0
NETWORK
TITLE = SCHLÜSSELSCHALTER VORHANDEN
U   DB1.DBX 1370.0; // 1.SPS-SCHLEIFENDURCHLAUF
S   DB1.DBX 1418.2; // SCHLÜSSELSCHALTER VORHANDEN
NETWORK
TITLE = M0,M1 AUSLÖSUNG
O   DB20.DBX 192.0; // M0 DYNAMISCH
=   DB20.DBX 256.0; // M0 RÜCKMELDEN
U   DB20.DBX 192.1; // M1 DYNAMISCH
U   DB20.DBX 324.5; // BEDINGTER HALT AKTIV
=   DB20.DBX 256.1; // M1 RÜCKMELDEN
U   DB20.DBX 192.1; // M1 DYNAMISCH
U   DB20.DBX 324.5; // BEDINGTER HALT AKTIV
O   DB20.DBX 192.0; // M0 DYNAMISCH
=   M 34.1;         // HM M0/M1 DYNAMISCH
NETWORK
TITLE = SPS/OB-->EINZELSTÜCK AKTIV
UN  DB10.DBX 1.0;   // SPS-MSD DAUERLAUF AKTIV
=   DB1.DBX 1390.3; // SPS/RM-->EINZELSTÜCK AKTIV
NETWORK
TITLE = VORSCHUBSCHALTER AUF 0%
L   DB20.DBW 358;   // FEED-OVERRIDE-ISTWERT
L   W#16#0000;      // LADE 0
==I;                // VERGLEICH AUF GLEICH
=   M 100.2;        // VORSCHUBSCHALTER AUF 0%
NETWORK
TITLE = ALARMAUSGANG
U   DB1.DBX 1366.3; // MASCHINENALARM AKTIV
=   M 54.3;         // ALARMAUSGANG
NETWORK
TITLE = ALARM 6007 VERSORGUNGSSCHÜTZE NICHT ABGEFALLEN
U   DB1.DBX 1370.0; // 1.SPS SCHLEIFENDURCHLAUF
UN  E 4.7           // RÜCKMELDEKETTE VERSORGUNGSSCHÜTZE ABGEFALLEN
S   DB2.DBX 0.7;    // 6007  SICHERHEITSSCH. DEFEKT
NETWORK
TITLE = ALARM 6005 ÜBERTEMPERATUR BREMSMODUl
UN  E 4.2           // ÜBERTEMPERATUR BREMSMODUl
S   DB2.DBX 0.5;    // 6005 ÜBERTEMPERATUR BREMSMODUl
O   DB1.DBX 1370.2; // QUITTIERT. GEDRÜCKT (MSTT/PC)
O   DB1.DBX 1370.3; // RESET-TASTE GEDRUECKT
U   E 4.2           // ÜBERTEMPERATUR BREMSMODUl
R   DB2.DBX 0.5;    // 6005 ÜBERTEMPERATUR BREMSMODUl
NETWORK
TITLE = RESET AUSLOESEN VERHINDERN (REFERENZPUNKT ANFAHREN)
U   DB1.DBX 1370.0; // 1.SPS SCHLEIFENDURCHLAUF
L   S5TIME#500MS;
SV  T 50;
NETWORK
TITLE = FREIGABE VON SICHERHEITSEINRICHTUNGEN
U   M 50.3;         // FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
U   M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
UN  M 50.1;         // SCHLÜSSELSCHALTER AUF SONDERBETRIEB
O
UN  T 0;            // ZEITBEGRENZUNG FÜR DIE ZUSTIMMTASTE
UN  M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
U   M 51.2;         // ZUSTIMMTASTE GEDRÜCKT
U   M 50.3;         // FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
U   M 50.1;         // SCHLÜSSELSCHALTER AUF SONDERBETRIEB
=   M 146.7;151.7 (turn155)        // FREIGABE VON SICHERHEITSEINRICHTUNGEN
FN  M 146.6;151.6         // NEGATIV FLANKENMERKER AUS FREIGABE VON SICHERHEITSEINRICHTUNGEN
NETWORK
TITLE = ACHSEN IN BEWEGUNG
L   DB1.DBB 1358;   // ACHSEN IN BEWEGUNG
L   B#16#0;         // LADE KONSTANTE HEX 0
<>I;                // VERGLEICH AUF UNGLEICH
=   M 131.7;        // ACHSEN IN BEWEGUNG
END_FUNCTION
FUNCTION FC 25 : VOID
NAME: BEI_PROGRAMM_ENDE_RESET_ODER_NEUSTART
BEGIN
NETWORK 1
TITLE = PROGRAMM ENDE AN NC
O   M 10.1;         // HM
UN  DB10.DBX 1.0;   // SPS-MSD (DAUERLAUF)
R   M 10.1;         // HM
=   DB20.DBX 348.1; // PROGRAMM LÄUFT WIRD ZURÜCKGESETZT
NETWORK 2
TITLE = PROGRAMM ENDE UND NEUSTART (DAUERLAUF) AN NC
O   M 10.1;         // HM
U   DB10.DBX 1.0;   // SPS-MSD (DAUERLAUF)
R   M 10.1;         // HM
=   DB20.DBX 348.2; // PROGRAMM LÄUFT WIRD ZURÜCKGESETZT UND GESTARTET
NETWORK 3
TITLE = ISTDREHZAHL KLEINER 20U/MIN
O   DB20.DBX 192.2; // M2 DYN.
O   DB20.DBX 195.6; // M30 DYN.
S   M 10.0;         // HM
U   M 10.0;         // HM
U   M 114.3;        // ISTDREHZAHL KLEINER 20U/MIN
S   M 10.1;         // HM
R   M 10.0;         // HM
NETWORK 3
TITLE = M2 und M30 RÜCKMELDEN VON M2,M30 UND RESET
O   DB20.DBX 348.1; // PROGRAMM LÄUFT WIRD ZURÜCKGESETZT
O   DB20.DBX 348.2; // PROGRAMM LÄUFT WIRD ZURÜCKGESETZT UND GESTARTET
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
O   DB1.DBX 1440.0; // RESET AUSGELÖST
R   M 10.0;         // HM
R   M 10.1;         // HM
=   DB20.DBX 259.6; // M30 RÜCKMELDEN
=   DB20.DBX 256.2; // M2 RÜCKMELDEN
END_FUNCTION
FUNCTION FC 23 : VOID
NAME: INC_ACHSEN
BEGIN
NETWORK
TITLE = ACHSEN INC FREIGABE
U   M 104.0;        // SUM  AFG/EFG
=   M 106.0;        // ACHSEN INC FREIGABE
NETWORK
TITLE = ACHSEN INC/STARTVERR.
U   DB20.DBX 1.3;   // FC INC ANFORDERUNG
UN  M 106.0;        // ACHSEN INC FREIGABE
R   DB20.DBX 1.3;   // FC INC ANFORDERUNG
END_FUNCTION
FUNCTION FC 24 : VOID
NAME: HA_LEISTUNG
BEGIN
NETWORK
TITLE = LEISTUNG HAUPTANTRIEB
U   M 110.0;        // AUX-ON
FN  M 131.1;
U   M 131.1;
S   M 131.2;
U   M 131.2;
L   S5T#10S;        // 10S
SE  T 19;            // STARTEN T8 ALS EINSCHALTVERZ.
U   T 19;            // STARTEN T8 ALS EINSCHALTVERZ.
R   M 131.2;
U   M 110.0;        // AUX-ON
UN  M 131.2;
U   M 50.2;         // NICHT NOT-AUS
=   M 55.0;         // SCHÜTZ HAUPTANTRIEBSSTELLER
U   M 110.0;        // AUX-ON
U   M 131.2;
=   M 19.1;         // HM 7023 WARTEZEIT HAUPTANTRIEB
=   M 96.7;         // WARTEZEIT HAUPTANTRIEB NC-STARTVERREIGELUNG
NETWORK
TITLE = MELDUNG 7023 WARTEZEIT HAUPTANTRIEB
U   M 19.1;         // HM 7023 WARTEZEIT HAUPTANTRIEB
=   DB3.DBX 2.7;    // MELDUNG 7023 WARTEZEIT HAUPTANTRIEB
NETWORK
TITLE = HAUPTANTRIEB BETRIEBSBEREIT
U   M 50.7;         // HA/SERVO-READY
=   M 131.0;        // HA BETRIEBSBEREIT
NETWORK
TITLE = HA BETRIEBSBEREIT  SFG
UN  M 131.0;        // HA BETRIEBSBEREIT
=   M 94.1;         // HA BETRIEBSBEREIT  SFG
NETWORK
TITLE = ÜBERWACHUNG HA SCHARF
U   M 55.0;         // SCHÜTZ HAUPTANTRIEBSSTELLER
L   S5TIME#2S500MS; // 25X0,1S
SE  T 8;            // STARTEN T8 ALS EINSCHALTVERZ.
NETWORK
TITLE = 6013  HAUPTANTRIEB NICHT BEREIT
UN  M 50.7;         // HA/SERVO-READY
L   S5TIME#200MS;   // 2X0,1S
SE  T 9;            // STARTEN T9 ALS EINSCHALTVERZ.
U   T 8;            // HA ÜBERWACHUNG SCHARF 8************
U   T 9;            // HA/SERVO-READY (0,2S)
S   DB2.DBX 1.5;    // 6013  HAUPTANTRIEB NICHT BEREIT
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   DB2.DBX 1.5;    // 6013  HAUPTANTRIEB NICHT BEREIT
NETWORK
TITLE = HA LENZESTELLER STOERUNG QUITTIEREN
U   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
UN  M 50.7;         // HA/SERVO-READY
L   S5TIME#1S;      // 1S
SV  T 7            // 1 SEK.IMPULS VON RESETTASTE (LENZESTELLER STÖRUNG QUITTIEREN!)
END_FUNCTION
FUNCTION FC 26 : VOID
NAME: KÜHLMITTEL
BEGIN
NETWORK
TITLE = FM TASTE KÜHLMITTEL (MSTT/PC)
U   M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
U   DB20.DBX 294.6; // TASTE KÜHLMITTEL (PC)
FP  M 107.7;        // FM TASTE KÜHLMITTEL
NETWORK
TITLE = ANWAHL KÜHLMITTEL EIN
UN  M 107.1;        // KÜHLMITTEL EIN
U   M 107.7;        // FM TASTE KÜHLMITTEL
O;
U   DB20.DBX 225.1; // M9 STATISCH
U   DB20.DBX 193.0; // M8 DYN.
UN  DB20.DBX 192.7; // M7 DYN.
O   DB20.DBX 302.6; // DNC/KÜHLMITTEL EIN
S   M 107.1;        // KÜHLMITTEL EIN
=   M 107.2;        // HM KÜHLMITTEL EIN
=   DB20.DBX 257.0; // M8 AUSLÖSEN
NETWORK
TITLE = ANWAHL MINIMALKÜHLUNG EIN
;       UN  M 107.1;        // KÜHLMITTEL EIN
;       U   M 107.7;        // FM TASTE KÜHLMITTEL
;       O;
U   DB20.DBX 225.1; // M9 STATISCH
U   DB20.DBX 192.7; // M7 DYN.
UN  DB20.DBX 193.0; // M8 DYN.
;       O   DB20.DBX 302.6; // DNC/KÜHLMITTEL EIN
S   M 117.1;        // M7 MINIMALKÜHLUNG EIN
;       =   M 107.2;        // HM KÜHLMITTEL EIN
=   DB20.DBX 256.7; // M7 AUSLÖSEN
NETWORK
TITLE = KÜHLMITTEL PROGRAMMIERT
U   M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
U   DB20.DBX 257.0; // M8 AUSLÖSEN
U   DB20.DBX 193.0; // M8 DYN.
S   M 107.3;        // KÜHLMITTEL PROGRAMMIERT
NETWORK
TITLE = ABWAHL KÜHLMITTEL EIN
U   M 107.1;        // KÜHLMITTEL EIN
UN  M 107.2;        // HM KÜHLMITTEL EIN
U   M 107.7;        // FM TASTE KÜHLMITTEL
UN  M 107.3;        // KÜHLMITTEL PROGRAMMIERT
O;
;       U   DB20.DBX 225.0; // M8 STATISCH
U   DB20.DBX 193.1; // M9 DYN.
O   DB20.DBX 302.5; // DNC/KÜHLMITTEL AUS
O;
U   M 107.4;        // KÜHLMITTEL UNTERBRECHUNG
UN  M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
O   DB1.DBX 1370.0; // 1.SPS-SCHLEIFENDURCHLAUF
O   DB1.DBX 1440.0; // RESET AUSGELÖST
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
ON  M 110.0;        // AUX-ON
R   M 107.1;        // KÜHLMITTEL EIN
R   M 117.1;        // M7 MINIMALKÜHLUNG EIN
R   M 107.3;        // KÜHLMITTEL PROGRAMMIERT
=   DB20.DBX 257.1; // M9 AUSLÖSEN
NETWORK
TITLE = KÜHLMITTEL UNTERBRECHUNG
U   M 107.3;        // KÜHLMITTEL PROGRAMMIERT
UN  M 107.4;        // KÜHLMITTEL UNTERBRECHUNG
U   M 107.7;        // FM TASTE KÜHLMITTEL
S   M 107.4;        // KÜHLMITTEL UNTERBRECHUNG
=   M 107.5;        // HM KÜHLMITTEL UNTERBRECHUNG
U   M 107.4;        // KÜHLMITTEL UNTERBRECHUNG
UN  M 107.5;        // HM KÜHLMITTEL UNTERBRECHUNG
U   M 107.7;        // FM TASTE KÜHLMITTEL
ON  M 107.1;        // KÜHLMITTEL EIN
R   M 107.4;        // KÜHLMITTEL UNTERBRECHUNG
NETWORK
TITLE = KÜHLMITTEL FREIGABE
U(;
ON  M 110.1;        // MASCHINENTÜR OFFEN
O   DB20.DBX 294.6; // TASTE KÜHLMITTEL (PC)
);
UN  M 107.4;        // KÜHLMITTEL UNTERBROCHEN
U(;
ON  DB20.DBX 324.1; // KERN/ZUSTAND STOP
ON  M 55.7;         // FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
);
UN  M 34.1;         // M0/M1 AKTIV STATISCH
UN  DB20.DBX 324.2; // DRYRUN
UN  M 152.1         // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
=   M 107.0;        // KÜHLMITTEL FREIGABE
NETWORK
TITLE = KÜHLMITTEL LEISTUNG
U   M 107.1;        // KÜHLMITTEL EIN
U   M 107.0;        // KÜHLMITTEL FREIGABE
=   M 56.6;         // KÜHLMITTEL LEISTUNG
NETWORK
TITLE = MINIMALKÜHLUNG LEISTUNG
U   M 117.1;        // M7 MINIMALKÜHLUNG EIN
U   M 107.0;        // KÜHLMITTEL FREIGABE
=   M 55.3;         // MINIMALKÜHLUNG LEISTUNG
NETWORK
TITLE = SPS/OB-->KÜHLMITTEL EIN
U   M 107.1;        // KÜHLMITTEL EIN
=   DB20.DBX 310.5; // SPS/OB-->KÜHLMITTEL EIN
NETWORK
TITLE = SPS/OB-->KÜHLMITTEL SPRITZT
U   M 56.6;         // KÜHLMITTEL LEISTUNG
=   DB20.DBX 310.6; // SPS/OB-->KÜHLMITTEL SPRITZT
NETWORK
TITLE = KÜHLMITTEL/FC DNC-QUITTUNG
U   DB1.DBX 1366.0; // DNC-BETRIEB AKTIV
U(;
U   DB20.DBX 302.6; // DNC/KÜHLMITTEL EIN
UN  DB20.DBX 225.0; // M8 STATISCH
O;
U   DB20.DBX 302.5; // DNC/KÜHLMITTEL AUS
UN  DB20.DBX 225.1; // M9 STATISCH
);
S   DB20.DBX 318.3; // KÜHLMITTEL/FC DNC-QUITTUNG
END_FUNCTION
FUNCTION FC 27 : VOID
NAME: SPINDEL_HALT_START
BEGIN
NETWORK
TITLE = FM TASTE SPINDEL START (MSTT/PC)
UN  M 110.1;        // MASCHINENTÜR OFFEN
U   DB20.DBX 295.4; // TASTE SPINDEL START (PC)
UN  DB20.DBX 295.3; // TASTE SPINDEL HALT (PC)
FP  M 132.5;        // FM TASTE SPINDEL START
NETWORK
TITLE = FM TASTE SPINDEL HALT (MSTT/PC)
UN  M 114.3;        // ISTDREHZAHL KLEINER 20U/MIN
U   DB20.DBX 295.3; // TASTE SPINDEL HALT (PC)
UN  DB20.DBX 295.4; // TASTE SPINDEL START (PC)
FP  M 132.7;        // FM TASTE SPINDEL HALT
NETWORK
TITLE = SPINDEL HALT/START FREIGABE
U   M 104.2;        // SUM  SFG
UN  M 131.7;        // ACHSEN IN BEWEGUNG
UN  M 152.1         // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
=   M 132.0;        // SPINDEL HALT/START FREIGABE
NETWORK
TITLE = SPINDEL HALT AKTIV
U   M 132.0;        // SPINDEL HALT/START FREIGABE
U   M 132.7;        // FM TASTE SPINDEL HALT
U(;
ON  M 104.5;        // SUM  SPINDEL EIN/AUS
O   DB20.DBX 324.0; // PROGRAMM LÄUFT
);
UN  M 110.1;        // MASCHINENTÜR OFFEN
S   M 132.1;        // SPINDEL HALT AKTIV
U   M 132.5;        // FM TASTE SPINDEL START
U(;
ON  M 104.5;        // SUM SPINDEL EIN/AUS
O   DB20.DBX 324.0; // PROGRAMM LÄUFT
);
O   DB1.DBX 1440.0; // RESET AUSGELÖST
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   M 132.1;        // SPINDEL HALT AKTIV
NETWORK
TITLE = SPINDEL HALT AKTIV  SFG/AFG/EFG
U   M 132.1;        // SPINDEL HALT AKTIV
=   M 95.7;         // SPINDEL HALT AKTIV  SFG
U   M 132.1;        // SPINDEL HALT AKTIV
U   M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
=   M 91.7;         // SPINDEL HALT AKTIV  AFG/EFG
NETWORK
TITLE = ÜBERWACUNGSZEIT FÜR HA M3/M4
U   M 132.5;        // FM TASTE SPINDEL START
U   M 104.5;        // SUM  SPINDEL EIN/AUS
UN  DB20.DBX 324.0; // PROGRAMM LÄUFT
L   S5TIME#1S;      // 10X0,1S
SV  T 43;           // STARTEN T43 ALS VERL. IMPULS
NETWORK
TITLE = /FM TASTE SPINDEL START (MT/PC)
U   DB20.DBX 295.4; // TASTE SPINDEL START (PC)
UN  DB20.DBX 295.3; // TASTE SPINDEL HALT (PC)
FN  M 132.3;        // FM TASTE SPINDEL START
END_FUNCTION
FUNCTION FC 28 : VOID
NAME: VORSCHUB_HALT_START
BEGIN
NETWORK
TITLE = FM TASTE VORSCHUB START(MSTT/PC)
U   DB20.DBX 295.2; // TASTE VORSCHUB START (PC)
UN  DB20.DBX 295.1; // TASTE VORSCHUB HALT (PC)
FP  M 133.5;        // FM TASTE VORSCHUB START
NETWORK
TITLE = FM TASTE VORSCHUB HALT (MSTT/PC)
U   DB20.DBX 295.1; // TASTE VORSCHUB HALT (PC)
UN  DB20.DBX 295.2; // TASTE VORSCHUB START (PC)
FP  M 133.7;        // FM TASTE VORSCHUB HALT
NETWORK
TITLE = VORSCHUB HALT/START FREIGABE
U   M 104.0;        // SUM  AFG/EFG
UN  M 152.1         // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
=   M 133.0;        // VORSCHUB HALT/START FREIGABE
NETWORK
TITLE = VORSCHUB HALT AKTIV
O   M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
U(
U   M 133.0;        // VORSCHUB HALT/START FREIGABE
U   M 133.7;        // FM TASTE VORSCHUB HALT
UN  M 110.1;        // MASCHINENTÜR OFFEN
U   M 131.7;        // ACHSEN IN BEWEGUNG
)
S   M 133.1;        // VORSCHUB HALT AKTIV
U   M 133.5;        // FM TASTE VORSCHUB START
UN  M 132.1;        // SPINDEL HALT AKTIV
UN  M 110.1;        // MASCHINENTÜR OFFEN
O   DB1.DBX 1440.0; // RESET AUSGELÖST
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   M 133.1;        // VORSCHUB HALT AKTIV
NETWORK
TITLE = VORSCHUB HALT AKTIV  AFG/EFG
O   M 133.1;        // VORSCHUB HALT AKTIV
O   M 52.6;         // ROBOTIK VORSCHUB-STOP
=   M 91.6;         // VORSCHUB HALT AKTIV  AFG/EFG
END_FUNCTION
FUNCTION FC 29 : VOID
NAME: EINZELSTÜCK
BEGIN
NETWORK
TITLE = SPS/OB-->EINZELSTÜCK AKTIV
UN  DB10.DBX 1.0;   // SPS-MSD(B1571/BIT0)/DAUERLAUF
=   DB1.DBX 1390.3; // SPS/OB-->EINZELSTÜCK AKTIV
END_FUNCTION
FUNCTION FC 30 : VOID
NAME: PNEUM_SCHRAUBSTOCK
BEGIN
NETWORK
TITLE = FM TASTE SCHRAUBSTOCK ZU
U   DB20.DBX 294.3; // TASTE SCHRAUBSTOCK ZU (PC)
UN  DB20.DBX 294.4; // TASTE SCHRAUBSTOCK AUF (PC)
FP  M 138.7;        // FM TASTE SCHRAUBSTOCK ZU
NETWORK
TITLE = FM TASTE SCHRAUBSTOCK AUF
U   DB20.DBX 294.4; // TASTE SCHRAUBSTOCK AUF (PC)
UN  DB20.DBX 294.3; // TASTE SCHRAUBSTOCK ZU (PC)
FP  M 139.1;        // FM TASTE SCHRAUBSTOCK AUF
NETWORK
TITLE = FREIGABE SCHRAUBSTOCK ZU/AUF
U   M 110.0;        // AUX-ON
U   M 114.3;        // ISTDREHZAHL KLEINER 20U/MIN
;       U   M 55.7;         // FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
UN  M 131.7;        // ACHSEN IN BEWEGUNG
UN  M 152.1         // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
=   M 138.0;        // FREIGABE SCHRAUBSTOCK ZU/AUF
NETWORK
TITLE = HM SCHRAUBSTOCK ZU (M26)
U   DB20.DBX 324.0; // PROGRAMM LÄUFT
U   DB20.DBX 195.2; // M26 DYN.
S   M 139.5;        // HM SCHRAUBSTOCK ZU (M26)
NETWORK
TITLE = LEISTUNG SCHRAUBSTOCK ZU
U   M 138.0;        // FREIGABE SCHRAUBSTOCK ZU/AUF
U(;
U   M 138.7;        // FM TASTE SCHRAUBSTOCK ZU
UN  M 139.1;        // FM TASTE SCHRAUBSTOCK AUF
O   DB20.DBX 195.2; // M26 DYN.
O(;
O   M 169.1;        // ROBOTIK/FM SCHRAUBSTOCK ZU
O   DB20.DBX 302.2; // DNC/SCHRAUBSTOCK ZU
;       U   E 7.7;          // FREIGABE VON SCHUTZZAUN AKTIV
);
U(;
ON  DB20.DBX 324.0; // PROGRAMM LÄUFT
O   DB20.DBX 324.1; // KERN/STOP
);
O(;
U   M 139.5;        // HM SCHRAUBSTOCK ZU (M26)
UN  M 131.7;        // ACHSEN IN BEWEGUNG
);
);
S   M 56.3;         // PNEUM.SCHRAUBSTOCK SCHLIESSEN
R   M 56.4;         // PNEUM.SCHRAUBSTOCK ÖFFNEN
=   DB20.DBX 259.2; // M26 AUSLÖSEN
S   M 139.7;        // HM M26 STATISCH
R   M 139.6;        // HM M25 STATISCH
NETWORK
TITLE = RÜCKS. HM SCHRAUBSTOCK ZU (M26)
U   M 139.5;        // HM SCHRAUBSTOCK ZU (M26)
UN  M 131.7;        // ACHSEN IN BEWEGUNG
R   M 139.5;        // HM SCHRAUBSTOCK ZU (M26)
NETWORK
TITLE = HM SCHRAUBSTOCK AUF (M25)
U   DB20.DBX 324.0; // PROGRAMM LÄUFT
U   DB20.DBX 195.1; // M25 DYN.
S   M 139.4;        // HM SCHRAUBSTOCK AUF (M25)
NETWORK
TITLE = LEISTUNG SCHRAUBSTOCK AUF
U   M 138.0;        // FREIGABE SCHRAUBSTOCK ZU/AUF
U(;
U   M 139.1;        // FM TASTE SCHRAUBSTOCK AUF
UN  M 138.7;        // FM TASTE SCHRAUBSTOCK ZU
O   DB20.DBX 195.1; // M25 DYN.
O(;
O   M 169.3;        // ROBOTIK/FM SCHRAUBSTOCK AUF
O   DB20.DBX 302.1; // DNC/SCHRAUBSTOCK AUF
;       U   E 7.7;          // FREIGABE VON SCHUTZZAUN AKTIV
);
U(;
ON  DB20.DBX 324.0; // PROGRAMM LÄUFT
O   DB20.DBX 324.1; // KERN/STOP
);
O(;
U   M 139.4;        // HM SCHRAUBSTOCK AUF (M25)
UN  M 131.7;        // ACHSEN IN BEWEGUNG
);
);
S   M 56.4;         // PNEUM.SCHRAUBSTOCK ÖFFNEN
R   M 56.3;         // PNEUM.SCHRAUBSTOCK SCHLIESSEN
=   DB20.DBX 259.1; // M25 AUSLÖSEN
S   M 139.6;        // HM M25 STATISCH
R   M 139.7;        // HM M26 STATISCH
NETWORK
TITLE = RÜCK. HM SCHRAUBSTOCK AUF (M26)
U   M 139.4;        // HM SCHRAUBSTOCK AUF (M25)
UN  M 131.7;        // ACHSEN IN BEWEGUNG
R   M 139.4;        // HM SCHRAUBSTOCK AUF (M25)
NETWORK
TITLE = SCHRAUBSTOCK GESPANNT
U   M 56.3;         // PNEUM.SCHRAUBSTOCK SCHLIESSEN
U   E 5.1;          // DRUCKSCHALTER SCHRAUBSTOCK
=   M 138.5;        // SCHRAUBSTOCK GESPANNT
NETWORK
TITLE = SCHRAUBSTOCK ENTSPANNT
U   M 56.4;         // PNEUM.SCHRAUBSTOCK ÖFFNEN
UN  E 5.1;          // DRUCKSCHALTER SCHRAUBSTOCK
=   M 138.4;        // SCHRAUBSTOCK ENTSPANNT
NETWORK
TITLE = SCHRAUBSTOCKBEW. AKTIV  AFG/EFG
U   M 56.3;         // PNEUM.SCHRAUBSTOCK SCHLIESSEN
UN  E 5.1;          // DRUCKSCHALTER SCHRAUBSTOCK
O;
U   M 56.4;         // PNEUM.SCHRAUBSTOCK ÖFFNEN
U   E 5.1;          // DRUCKSCHALTER SCHRAUBSTOCK
O   M 139.5;        // HM SCHRAUBSTOCK ZU (M26)
O   M 139.4;        // HM SCHRAUBSTOCK AUF (M25)
=   M 91.5;         // SCHRAUBSTOCKBEW. AKTIV  AFG/EFG
NETWORK
TITLE = 6072  SCHRAUBSTOCK NICHT BEREIT
U   M 56.3;         // PNEUM.SCHRAUBSTOCK SCHLIESSEN
L   S5TIME#1S;      // 10X0,1S
SE  T 32;           // STARTEN T32 ALS EINSCHALTVERZ.
UN  E 5.1;          // DRUCKSCHALTER SCHRAUBSTOCK
L   S5TIME#200MS;   // 2X0,1S
SE  T 33;           // STARTEN T33 ALS EINSCHALTVERZ.
U   M 56.4;         // PNEUM.SCHRAUBSTOCK ÖFFNEN
L   S5TIME#3S;      // 10X0,1S 8++++++
SE  T 34;           // STARTEN T34 ALS EINSCHALTVERZ.
U   E 5.1;          // DRUCKSCHALTER SCHRAUBSTOCK
L   S5TIME#200MS;   // 2X0,1S
SE  T 35;           // STARTEN T35 ALS EINSCHALTVERZ.
U   T 32;           // SCHRAUBST. ZU/ÜBERW. SCHARF
U   T 33;           // DRUCKSCHALTER SCHRAUBST. (0,2S)
O;
U   T 34;           // SCHRAUBST. AUF/ÜBERW. SCHARF
U   T 35;           // DRUCKSCHALTER SCHRAUBST. (0,2S)
O;
UN  M 138.5;        // SCHRAUBSTOCK GESPANNT
U(;
O   DB20.DBX 224.3; // M3 STATISCH
O   DB20.DBX 224.4; // M4 STATISCH
);
S   DB2.DBX 9.0;    // 6072  SCHRAUBSTOCK NICHT BEREIT
U   DB2.DBX 9.0;    // 6072  SCHRAUBSTOCK NICHT BEREIT
;       U   M 55.7;         // FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
R   M 56.3;         // PNEUM.SCHRAUBSTOCK SCHLIESSEN
R   M 56.4;         // PNEUM.SCHRAUBSTOCK ÖFFNEN
UN  M 56.3;         // PNEUM.SCHRAUBSTOCK SCHLIESSEN
UN  M 56.4;         // PNEUM.SCHRAUBSTOCK ÖFFNEN
U(
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
)
R   DB2.DBX 9.0;    // 6072  SCHRAUBSTOCK NICHT BEREIT
NETWORK
TITLE = 6050  M25/M26 BEI LAUFENDEM HA
;       UN  M 55.7;         // FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
UN  M 114.3;        // ISTDREHZAHL KLEINER 20U/MIN
U   DB20.DBX 195.1; // M25 DYN.
S   DB2.DBX 6.2;    // 6050  M25 BEI LAUFENDEM HA
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   DB2.DBX 6.2;    // 6050  M25 BEI LAUFENDEM HA
NETWORK
TITLE = 7054  SCHRAUBSTOCK SCHLIESSEN
UN  M 138.5;        // SCHRAUBSTOCK GESPANNT
UN  DB3.DBX 5.2;    // 7042  MASCHINENTÜR INIT.
UN  DB3.DBX 2.4;    // 7020  SONDERBETRIEB AKTIV
UN  DB3.DBX 5.0;    // 7040  MASCHINENTÜR OFFEN
UN  DB3.DBX 2.0;    // 7016  HILFSANTRIEBE EINSCHALTEN
UN  DB3.DBX 2.1;    // 7017  REFERENZPUNKT ANFAHREN
UN  DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
=   DB3.DBX 6.6;    // 7054  SCHRAUBSTOCK SCHLIESSEN
NETWORK
TITLE = SPS/OB-->SCHRAUBSTOCK GESPANNT
U   M 138.5;        // SCHRAUBSTOCK GESPANNT
=   DB20.DBX 310.2; // SPS/OB-->SCHRAUBSTOCK GESPANNT
NETWORK
TITLE = SPS/OB-->SCHRAUBSTOCK ENTSPANNT
U   M 138.4;        // SCHRAUBSTOCK ENTSPANNT
=   DB20.DBX 310.1; // SPS/OB-->SCHRAUBSTOCK ENTSPANNT
NETWORK
TITLE = SCHRAUBSTOCK/FC DNC-QUITTUNG
U   DB1.DBX 1366.0; // DNC-BETRIEBN AKTIV
U(;
U   DB20.DBX 302.2; // DNC/SCHRAUBSTOCK ZU
UN  M 139.7;        // HM M26 STATISCH
O;
U   DB20.DBX 302.1; // DNC/SCHRAUBSTOCK AUF
UN  M 139.6;        // HM M25 STATISCH
);
S   DB20.DBX 318.1; // SCHRAUBSTOCK/FC DNC-QUITTUNG
END_FUNCTION
FUNCTION FC 31 : VOID
NAME: AUSBLASEINRICHTUNG
BEGIN
NETWORK
TITLE = ANWAHL AUSBLASEN EIN (M71)
U   DB20.DBX 233.0; // M72 STATISCH
U   DB20.DBX 200.7; // M71 DYN.
O   DB20.DBX 303.0; // DNC/AUSBLASEN EIN
S   M 140.1;        // AUSBLASEN EIN
=   DB20.DBX 264.7; // M71 AUSLÖSEN
NETWORK
TITLE = ABWAHL AUSBLASEN EIN (M72)
U   DB20.DBX 232.7; // M71 STATISCH
U   DB20.DBX 201.0; // M72 DYN.
O   DB20.DBX 302.7; // DNC/AUSBLASEN AUS
O   DB1.DBX 1370.0; // 1.SPS-SCHLEIFENDURCHLAUF
ON  M 110.0;        // AUX-ON
O   DB1.DBX 1440.0; // RESET AUSGELÖST
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
O   DB20.DBX 324.2; // DRYRUN
O   M 110.1;        // MASCHINENTÜR OFFEN
R   M 140.1;        // AUSBLASEN EIN
=   DB20.DBX 265.0; // M72 AUSLÖSEN
NETWORK
TITLE = LEISTUNG AUSBLASEN
U   M 140.1;        // AUSBLASEN EIN
=   M 55.5;         // AUSBLASMAGNETVENTIL FÜR SPANNMITTEL
NETWORK
TITLE = SPS/OB-->AUSBLASEN AKTIV
U   M 55.5;         // AUSBLASMAGNETVENTIL FÜR SPANNMITTEL
=   DB20.DBX 310.7; // SPS/OB-->AUSBLASEN AKTIV
NETWORK
TITLE = AUSBLASEN/FC DNC-QUITTUNG
U   DB20.DBX 303.0; // DNC/AUSBLASEN EIN
UN  DB20.DBX 264.7; // M71 AUSLÖSEN
O;
U   DB20.DBX 302.7; // DNC/AUSBLASEN AUS
UN  DB20.DBX 265.0; // M72 AUSLÖSEN
U   DB1.DBX 1366.0; // DNC-BETRIEB AKTIV
S   DB20.DBX 318.4; // AUSBLASEN/FC DNC-QUITTUNG
END_FUNCTION
FUNCTION FC 32: VOID
NAME: TUERAUTOMATIK
BEGIN
NETWORK  1
TITLE = /FM MASCHINENTÜR OFFEN
U   M 110.1;        // MASCHINENTÜR OFFEN
FN  M 144.5;        // /FM MASCHINENTÜR OFFEN
NETWORK  2
TITLE = FM ENDSCH. TÜR OFFEN
U   E 5.0;          // ENDSCH. TÜR OFFEN
FP  M 144.3;        // FM ENDSCH. TÜR OFFEN
NETWORK  3
TITLE = FREIGABE TÜR ZU/AUF
UN  DB2.DBX 0.0;    // 6000  NOT-AUS
UN  M 110.2;        // HM ALARM MASCHINENTÜR OFFEN
UN  M 113.0;        // SONDERBETRIEB AKTIV
U   M 110.0;        // AUX-ON
U   M 55.7;         // FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
=   M 143.0;        // FREIGABE TÜR ZU/AUF
NETWORK  4
TITLE = HM TASTE TÜR ZU/AUF
U   DB1.DBX 1370.0; // 1.SPS-SCHLEIFENDURCHLAUF
UN  E 5.0;          // ENDSCH. TÜR OFFEN
O   M 144.1;        // HM TÜRBEWEG. UNTERBROCHEN
S   M 143.1;        // HM TASTE TÜR ZU/AUF
NETWORK  5
TITLE = ZUSTIMMT. GEDRÜCKT/VERZÖGERT
U   M 51.2;         // ZUSTIMMTASTE GEDRÜCKT
U   M 143.0;        // FREIGABE TÜR ZU/AUF
L   S5T#100MS;      // 100MS
SE  T 36;           // STARTEN T41 ALS EINSCHALTVERZ.
NETWORK  6
TITLE = HM TIPPBETRIEB TÜR ZU
U   M 143.0;        // FREIGABE TÜR ZU/AUF
U   M 51.2;         // ZUSTIMMTASTE GEDRÜCKT
U(  ;
U   DB1.DBX 1374.0; // TASTE TÜR ZU (MSTT)
UN  DB1.DBX 1374.1; // TASTE TÜR AUF (MSTT)
O   ;
UN  M 143.1;        // HM TASTE TÜR ZU/AUF
U   DB1.DBX 1374.2; // TASTE TÜR ZU/AUF (PC)
)   ;
=   M 143.7;        // HM TIPPBETRIEB TÜR ZU
R   M 143.6;        // HM TIPPBETRIEB TÜR AUF
R   M 143.4;        // HM TÜR AUF STAT.
NETWORK  7
TITLE = HM TIPPBETRIEB TÜR AUF
U   M 143.0;        // FREIGABE TÜR ZU/AUF
U   T 36;           // ZUSTIMMT. GEDRÜCKT/VERZÖGERT
U(  ;
U   DB1.DBX 1374.1; // TASTE TÜR AUF (MSTT)
UN  DB1.DBX 1374.0; // TASTE TÜR ZU (MSTT)
O   ;
U   M 143.1;        // HM TASTE TÜR ZU/AUF
U   DB1.DBX 1374.2; // TASTE TÜR ZU/AUF (PC)
)   ;
=   M 143.6;        // HM TIPPBETRIEB TÜR AUF
R   M 143.7;        // HM TIPPBETRIEB TÜR ZU
R   M 143.5;        // HM TÜR ZU STAT.
NETWORK  8
TITLE = HM TÜR ZU STAT.
O(  ;
U   M 26.7          //
U   M 143.0;        // FREIGABE TÜR ZU/AUF
)   ;
O(
U   M 144.5;        // /FM MASCHINENTÜR OFFEN
U   M 143.0;        // FREIGABE TÜR ZU/AUF
)
O(
U   DB1.DBX 1370.0; // 1.SPS-SCHLEIFENDURCHLAUF
U   M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
)
S   M 143.5;        // HM TÜR ZU STAT.
R   M 143.4;        // HM TÜR AUF STAT.
R   M 143.6;        // HM TIPPBETRIEB TÜR AUF
S   M 143.1;        // HM TASTE TÜR ZU/AUF
NETWORK  9
TITLE = HM TÜR AUF STAT. (M0/M1/M2/M30)
O   DB20.DBX 348.1; // PROGRAMM LÄUFT WIRD ZURÜCKGESETZT (M2,M30)
O   M 34.1;         // HM M0/M1 DYNAMISCH
S   M 144.0;        // HM TÜR AUF STAT. (M0/M1/M2/M30)
NETWORK 10
TITLE = HM TÜR AUF STAT.
O   M 144.3;        // FM ENDSCH. TÜR OFFEN
O(  ;
O   M 170.3;        // ROBOTIK/FM TÜR AUF
U   M 143.0;        // FREIGABE TÜR ZU/AUF
UN  E 5.0;          // ENDSCH. TÜR OFFEN
)   ;
O   ;
U   M 143.0;        // FREIGABE TÜR ZU/AUF
U   M 144.0;        // HM TÜR AUF STAT. (M0/M1/M2/M30)
O   ;
U   DB1.DBX 1370.0; // 1.SPS-SCHLEIFENDURCHLAUF
U   E 5.0;          // ENDSCH. TÜR OFFEN
S   M 143.4;        // HM TÜR AUF STAT.
R   M 143.5;        // HM TÜR ZU STAT.
R   M 143.7;        // HM TIPPBETRIEB TÜR ZU
R   M 143.1;        // HM TASTE TÜR ZU/AUF
R   M 144.0;        // HM TÜR AUF STAT. (M0/M1/M2/M30)
S   M 56.2          // AUSGANGSMERKER TÜRVERRIEGELUNGSMAGNET
NETWORK 11
TITLE = LEISTUNG VERR.-MAGNET ENTRIEGELN
O   M 144.3;        // FM ENDSCH. TÜR OFFEN
O   M 56.0          // AUSGANGSMERKER MAGNETVENTIL TÜR SCHLIESSEN
O   DB1.DBX 1440.0  // RESET AUSGELÖST
O   DB2.DBX 0.0;    // 6000  NOT-AUS
U   M 56.2          // AUSGANGSMERKER TÜRVERRIEGELUNGSMAGNET
U   M 110.1;        // MASCHINENTÜR OFFEN
R   M 56.2          // AUSGANGSMERKER TÜRVERRIEGELUNGSMAGNET
NETWORK 12
TITLE = ABBRUCH TÜRBEWEGUNG
U   M 91.3;         // TÜRBEWEGUNG AKTIV  AFG/EFG
U(  ;
O   DB2.DBX 0.0;    // 6000  NOT-AUS
O   DB1.DBX 1440.0  // RESET AUSGELÖST
O   DB1.DBX 1370.3; // TASTE RESET
O   DB1.DBX 1382.2; // DNC/TÜR STOP
)   ;
R   M 143.5;        // HM TÜR ZU STAT.
R   M 143.4;        // HM TÜR AUF STAT.
R   M 144.0;        // HM TÜR AUF STAT. (M0/M1/M2/M30)
NETWORK 13
TITLE = HM TÜRBEW. UNTERBROCHEN
U   M 91.3;         // TÜRBEWEGUNG AKTIV  AFG/EFG
UN  M 143.7;        // HM TIPPBETRIEB TÜR ZU
UN  M 143.6;        // HM TIPPBETRIEB TÜR AUF
UN  M 143.5;        // HM TÜR ZU STAT.
UN  M 143.4;        // HM TÜR AUF STAT.
S   M 144.1;        // HM TÜRBEW. UNTERBROCHEN
O   E 5.0;          // ENDSCH. TÜR OFFEN
O   M 143.5;        // HM TÜR ZU STAT.
R   M 144.1;        // HM TÜRBEW. UNTERBROCHEN
NETWORK 14
TITLE = LEISTUNG TÜR ZU
O   M 143.7;        // HM TIPPBETRIEB TÜR ZU
O   M 143.5;        // HM TÜR ZU STAT.
=   M 56.0          // AUSGANGSMERKER MAGNETVENTIL TÜR SCHLIESSEN
FP  M 144.6;        // FM TÜR ZU
U   M 144.6;        // FM TÜR ZU
S   M 144.7;        // HM TÜR ZU
NETWORK 15
TITLE = LEISTUNG TÜR AUF
U   M 143.4;        // HM TÜR AUF STAT.
L   S5T#300MS;      // 300MS
SE  T 37;           // STARTEN T42 ALS EINSCHALTVERZ.
O   M 143.6;        // HM TIPPBETRIEB TÜR AUF
O   T 37;           // HM TÜR AUF STAT./VERZÖGERT
=   M 56.1          // AUSGANGSMERKER MAGNETVENTIL TÜR ÖFFNEN
NETWORK 16
TITLE = TÜR OFFEN
U   M 56.1          // AUSGANGSMERKER MAGNETVENTIL TÜR ÖFFNEN
U   E 5.0;           // ENDSCH. TÜR OFFEN
=   M 143.2;         // TÜR OFFEN
NETWORK
TITLE = HM TÜR ZU LÖSCHEN
U   M 144.7;        // HM TÜR ZU
U   M 56.0          // AUSGANGSMERKER MAGNETVENTIL TÜR SCHLIESSEN
U   M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
R   M 144.7;        // HM TÜR ZU
NETWORK 17
TITLE = TÜRBEWEGUNG AKTIV  AFG/EFG
U   M 144.7;        // HM TÜR ZU
U   M 56.0          // AUSGANGSMERKER MAGNETVENTIL TÜR SCHLIESSEN
U   M 110.1;        // MASCHINENTÜR OFFEN
O   ;
U   M 56.1          // AUSGANGSMERKER MAGNETVENTIL TÜR ÖFFNEN
UN  E 5.0;          // ENDSCH. TÜR OFFEN
=   M 91.3;         // TÜRBEWEGUNG AKTIV  AFG/EFG
NETWORK 18
TITLE = TÜR-ZEITÜBERSCHREITUNG(ALARM 6028)
U   M 91.3;         // TÜRBEWEGUNG AKTIV  AFG/EFG
L   S5T#7S;         // 7S
SE  T 39;           // STARTEN T37 ALS EINSCHALTVERZ.
U   T 39;           // TÜR AUF/ZEITÜBERWACHUNG
S   DB2.DBX 3.4;    // TÜR-ZEITÜBERSCHREITUNG(ALARM 6028)
R   M 56.0          // AUSGANGSMERKER MAGNETVENTIL TÜR SCHLIESSEN
R   M 56.1          // AUSGANGSMERKER MAGNETVENTIL TÜR ÖFFNEN
R   M 56.2          // AUSGANGSMERKER TÜRVERRIEGELUNGSMAGNET
O   DB1.DBX 1370.2; // QUITTIERT. GEDRÜCKT (MSTT/PC)
O   DB1.DBX 1370.3; // RESET-TASTE GEDRUECKT
R   DB2.DBX 3.4;    // TÜR-ZEITÜBERSCHREITUNG(ALARM 6028)
NETWORK 19
TITLE = SPS/OB-->TÜR OFFEN
U   M 143.2;        // TÜR OFFEN
=   DB1.DBX 1390.0; // SPS/RM-->TÜR OFFEN
NETWORK 20
TITLE = TÜR/FC DNC-QUITTUNG
U   DB1.DBX 1366.0; // DNC-BETRIEB AKTIV
U(  ;
U   DB1.DBX 1382.1; // DNC/TÜR ZU
UN  M 143.5;        // HM TÜR ZU STAT.
O   ;
U   DB1.DBX 1382.0; // DNC/TÜR AUF
UN  M 143.4;        // HM TÜR AUF STAT.
O   ;
U   DB1.DBX 1382.2; // DNC/TÜR STOP
U(  ;
O   M 143.7;        // HM TIPPBETRIEB TÜR ZU
O   M 143.6;        // HM TIPPBETRIEB TÜR AUF
O   M 143.5;        // HM TÜR ZU STAT.
O   M 143.4;        // HM TÜR AUF STAT.
)   ;
)   ;
S   DB1.DBX 1398.1; // TÜR/FC DNC-QUITTUNG
END_FUNCTION
FUNCTION FC 63: VOID
NAME: WARNLEUCHTE
BEGIN
NETWORK
TITLE = BLINKLICHT IMPULSDAUER
U   DB1.DBX 1370.0; // 1.SPS SCHLEIFENDURCHLAUF
SPBN   M001
L   DB10.DBW 50;    // LADE ZEIT AUS SPS-MSD
ITB;                // UMWANDELN EINER GANZZAHL IN EINEN BCD-WERT
T   MW 30;          // TRANSFERIERE IN MW30
SET;
R   M 31.4;         // ZEITRASTER 0,01S EINSTELLEN
R   M 31.5;         // ZEITRASTER 0,01S EINSTELLEN
M001:  NOP 0
UN  T 48;           // PAUSENDAUER
L   MW 30;          // LADE MW30
SV  T 47;           // STARTEN ALS VERLÄNGERTER IMPULS
NETWORK
TITLE = BLINKLICHT PAUSENDAUER
U   DB1.DBX 1370.0; // 1.SPS SCHLEIFENDURCHLAUF
SPBN   M002
L   DB10.DBW 52;    // LADE ZEIT AUS SPS-MSD
ITB;                // UMWANDELN EINER GANZZAHL IN EINEN BCD-WERT
T   MW 32;          // TRANSFERIERE IN MW32 (ZEITRASTER IST 0,01S)
SET;
R   M 33.4;         // ZEITRASTER 0,01S EINSTELLEN
R   M 33.5;         // ZEITRASTER 0,01S EINSTELLEN
M002:  NOP 0
UN  T 47;           // IMPULSDAUER
L   MW 32;          // LADE MW30
SV  T 48;           // STARTEN ALS VERLÄNGERTER IMPULS
;  NETWORK
;  TITLE =  ANSTEUERUNG FÜR DIE GRÜNE LAMPE AUTOMATIKANZEIGE
;
;       U   DB20.DBX 326.4; // BETRIEBSART AUTOMATIK
;       U   T 47;           // IMPULSDAUER
;       UN  DB1.DBX 1366.3; // MASCHINENALARM AKTIV
;       O
;       U   DB20.DBX 324.0; // PROGRAMM LÄUFT
;       UN  DB20.DBX 324.1; // STOP-ZUSTAND
;       UN  DB20.DBX 325.1; // STOP-ZUSTAND DURCH SINGLE
;       UN  DB1.DBX 1366.3; // MASCHINENALARM AKTIV
;       =   A  X.X           // GRÜNE WARNLEUCHTE AUTOMATIK
;
;  NETWORK
;  TITLE =  ANSTEUERUNG FÜR DIE WEISE LAMPE BELADUNG AKTIV ODER TEILEMANGEL
;
;       U   T 47;           // IMPULSDAUER
;       UN  DB1.DBX 1366.3; // MASCHINENALARM AKTIV
;       O
;       UN  DB1.DBX 1366.3; // MASCHINENALARM AKTIV
;       =   A  X.X           // GRÜNE WARNLEUCHTE BELADUNG AKTIV ODER TEILEMANGEL
;
;  NETWORK
;  TITLE =  ANSTEUERUNG FÜR DIE ROTE LAMPE ALARMANZEIGE
;
;       U   DB1.DBX 1366.3; // MASCHINENALARM AKTIV
;       U   T 47;           // IMPULSDAUER
;       =   A  X.X           // ROTE WARNLEUCHTE ALARM
;
END_FUNCTION
FUNCTION FC 40: VOID
NAME: ROBOTIK_INTERFACE
VERSION : 0.0
BEGIN
NETWORK
TITLE = 6008  FEHLENDER CAN-TEILN.
ON  DB1.DBX 1414.1; // 2.CAN-EINGANGSPORT (CAN-ADRESSE 1)
ON  DB1.DBX 1415.1; // 2.CAN-AUSGANGSPORT (CAN-ADRESSE 9)
UN  DB10.DBX 2.0;   // AC 95 AKTIVIEREN
=   DB2.DBX 1.0;    // 6008  FEHLENDER CAN-TEILN.
BEB
NETWORK
TITLE = Robotik Achsen stehen auf Referenzpunkt
L   DB1.DBD 70;     // REF-POSITION X
L   -0.5E-03;       // 0,5MM
+R  ;
L   DB1.DBD 0;      // IST POSITION X
<R  ;
=   M 168.0
L   DB1.DBD 74;     // REF-POSITION Y
L   -0.5E-03;       // 0,5MM
+R  ;
L   DB1.DBD 4;      // IST POSITION Y
<R  ;
=   M 168.1
L   DB1.DBD 78;     // REF-POSITION Z
L   -0.5E-03;       // 0,5MM
+R  ;
L   DB1.DBD 8;      // IST POSITION Z
<R  ;
=   M 168.2
U   M 168.0
U   M 168.1
U   M 168.2
U   DB1.DBX 134.0;  // REFERENZPUNKT X-ACHSE AKTIV
U   DB1.DBX 134.1;  // REFERENZPUNKT Y-ACHSE AKTIV
U   DB1.DBX 134.2;  // REFERENZPUNKT Z-ACHSE AKTIV
=   M 59.7          // ROBOTIK ACHSEN STEHEN AUF REF.PKT.
NETWORK
TITLE = ROBOTIK/FM AUX-ON
U   M 52.2;         // ROBOTIK/AUX-ON
FP  M 168.1;        // ROBOTIK/FM AUX-ON
NETWORK
TITLE = ROBOTIK/FM UMSCH. BA REF/AUTO
U   M 52.3;         // ROBOTIK AUTOMATIK/REFERENZBETRIEB UMSCHALTEN
FP  M 168.3;        // ROBOTIK/FM UMSCH. BA REF/AUTO
NETWORK
TITLE = REFERENZPUNKT ANFAHREN
U   M 52.4;         // ROBOTIK REFERENZPUNKT ANFAHREN STARTEN
FP  M 168.5;        // ROBOTIK/FM REF ACHSEN
U   M 168.5;        // ROBOTIK/REF ACHSEN
SPBN   X000;
SET
S   DB20.DBX 289.2; // BETRIEBSART REFERENZPUNKT ANFAHREN
S   DB20.DBX 0.0;   // BETRIEBSARTUMSCHALTUNG AKTIVIEREN
L   W#16#7;         // LADE HEX 7 (X,Y UND Z-ACHSE REFERENZIEREN)
T   DB20.DBB 8;     // REFERENZIEREN DER KANALACHSEN
S   DB20.DBX 1.1;   // ANFORDERUNG REFERENZPKT.ANFAHREN
X000: NOP  0;
NETWORK
TITLE = ROBOTIK/FM NC-START
U   M 52.5;         // ROBOTIK PROGRAMM START
FP  M 168.7;        // ROBOTIK/FM NC-START
NETWORK
TITLE = ROBOTIK/FM SPM ZU
U   M 53.0;         // ROBOTIK SPANNMITTEL SCHLIESSEN
UN  M 53.1;         // ROBOTIK SPANNMITTEL ÖFFNEN
FP  M 169.1;        // ROBOTIK/FM SPM ZU
NETWORK
TITLE = ROBOTIK/FM SPM AUF
U   M 53.1;         // ROBOTIK SPANNMITTEL ÖFFNEN
UN  M 53.0;         // ROBOTIK SPANNMITTEL SCHLIESSEN
FP  M 169.3;        // ROBOTIK/FM SPM AUF
NETWORK
TITLE = ROBOTIK/TÜR AUF
U   M 53.5;         // ROBOTIK MASCHINENTÜR ÖFFNEN
UN  M 51.2;         // ZUSTIMMTASTE GEDRÜCKT
FP  M 170.3;        // ROBOTIK/FM TÜR AUF
NETWORK
TITLE = ROBOTIK/NOT-AUS AKTIV
U   DB2.DBX 0.0;    // 6000  NOT-AUS AKTIV
=   M 59.3;         // ROBOTIK NICHT NOT-AUS
NETWORK
TITLE = ROBOTIK/MASCHINE READY
U   M 110.0;        // AUX-ON
U   M 110.1;        // MASCHINENTÜR OFFEN
U   DB20.DBX 324.4; // REFERENZPUNKT AKTIV
U   M 138.4;        // SPM ENTSPANNT
U   M 103.0;        // BETRIEBSART AUTOMATIK UND MDI
=   M 59.4;          // ROBOTIK MASCHINE BETRIEBSBEREIT
NETWORK
TITLE = ROBOTIK/BA REF-AUTO
U   M 103.1;        // BETRIEBSART REFERENZ
=   M 59.5;         // ROBOTIK MASCHINE IM REFERENZMODE
NETWORK
TITLE = ROBOTIK/PROGRAMMSTATUS
U   DB20.DBX 224.1; // M1 STATISCH
U   DB20.DBX 324.5; // BEDINGTER HALT AKTIV
O   DB20.DBX 224.0; // M0 STATISCH
O   DB20.DBX 224.2; // M2 STATISCH
O   DB20.DBX 227.6; // M30 STATISCH
=   M 59.6;         // ROBOTIK M0,M1,M2,ODER M30 AKTIV
NETWORK
TITLE = ROBOTIK/SPM GESPANNT
U   M 138.5;        // SCHRAUBSTOCK GESPANNT
=   M 60.0;         // ROBOTIK SCHRAUBSTOCK GESPANNT
NETWORK
TITLE = ROBOTIK/SPM ENTSPANNT
U   M 138.4;        // SCHRAUBSTOCK ENTSPANNT
=   M 60.1;          // ROBOTIK SCHRAUBSTOCK ENTSPANNT
NETWORK
TITLE = ROBOTIK/TÜR ZU
U   M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
=   M 60.6;         // ROBOTIK MASCHINENTÜR GESCHLOSSEN
NETWORK
TITLE = ROBOTIK/TÜR OFFEN
U   M 143.2;        // TÜR OFFEN
=   M 60.7;         // ROBOTIK MASCHINENTÜR OFFEN
NETWORK
TITLE = UMSCH. BA REF/AUTO
UN  M 168.3;        // ROBOTIK/FM UMSCH. BA REF/AUTO
BEB;
UN  M 59.5;         // ROBOTIK MASCHINE IM REFERENZMODE
S   DB20.DBX 289.2; // FC BETRIEBSART REFERENZ
S   DB20.DBX 0.0;   // BETRIEBSARTENUMSCHALTUNG
BEB;
U   M 59.5;         // ROBOTIK MASCHINE IM REFERENZMODE
S   DB20.DBX 288.4; // FC BETRIEBSART AUTOMATIK
S   DB20.DBX 0.0;   // BETRIEBSARTENUMSCHALTUNG
END_FUNCTION
FUNCTION FC 36 : VOID
NAME: TEILAPPARAT
BEGIN
NETWORK
TITLE = FM TASTE TA
U   DB20.DBX 294.1; // TASTE TA (PC)
FP  M 172.7;        // FM TASTE TA
NETWORK
TITLE = FREIGABE TA TEILEN
U   M 110.0;        // AUX-ON
UN  M 131.7;        // ACHSEN IN BEWEGUNG
UN  M 152.1         // WERKZEUGWENDEN ODER FREIFAHREN AKTIV
UN  M 173.4;        // TA TEILEN AKTIV
=   M 172.0;        // FREIGABE TA TEILEN
NETWORK
TITLE = HM TA TEILEN (M27)
U   DB20.DBX 324.0; // PROGRAMM LÄUFT
U   DB20.DBX 195.3; // M27 DYN.
S   M 172.2;        // HM TA TEILEN (M27)
NETWORK
TITLE = TA STARTBEFEHL
U   M 172.0;        // FREIGABE TA TEILEN
U(;
O   M 172.7;        // FM TASTE TA
O   DB20.DBX 195.3; // M27 DYN.
O   DB20.DBX 303.3; // DNC/TA TEILEN
U(;
ON  DB20.DBX 324.0; // PROGRAMM LÄUFT
O   DB20.DBX 324.1; // KERN/STOP
);
O(;
U   M 172.2;        // HM TA TEILEN (M27)
UN  M 131.7;        // ACHSEN IN BEWEGUNG
);
);
=   M 172.1;        // TA TEILEN STARTBEFEHL
=   DB20.DBX 259.3; // M27 AUSLÖSEN
R   M 173.0;        // TA FERTIG UND VERRIEGELT
S   M 173.4;        // TA TEILEN AKTIV
NETWORK
TITLE = RÜCKS. HM TEILEN (M27)
U   M 172.2;        // HM TA TEILEN (M27)
UN  M 131.7;        // ACHSEN IN BEWEGUNG
R   M 172.2;        // HM TA TEILEN (M27)
NETWORK
TITLE = TA SCHRITT 1
U   M 172.1;        // TA TEILEN STARTBEFEHL
S   M 173.1;        // TA SCHRITT 1
NETWORK
TITLE = TA SCHRITT 2
U   M 173.1;        // TA SCHRITT 1
UN  E 4.1;          // BERO/TA TEILEN FERTIG
R   M 173.1;        // TA SCHRITT 1
S   M 173.2;        // TA SCHRITT 2
NETWORK
TITLE = TA SCHRITT 3
L   DB10.DBW 8;     // LADE ZEIT AUS SPS-MSD
ITB;                // UMWANDELN EINER GANZZAHL IN EINEN BCD-WERT
T   MW 80;          // TRANSFERIERE IN MW80
SET
=   M 81.4          // SETZE ZEITRASTER 0,1S
U   M 173.2;        // TA SCHRITT 2
L   MW 80;          // LADE MW80
SE  T 40;           // STARTEN T40 ALS EINSCHALTVERZ.
U   T 40;           // VERZÖGERUNGSZEIT ABGELAUFEN
R   M 173.2;        // TA SCHRITT 2
S   M 173.3;        // TA SCHRITT 3
NETWORK
TITLE = TA TEILEN FERTIG
O   M 173.3;        // TA SCHRITT 3
O   DB1.DBX 1370.0;         // 1.SPS-SCHLEIFENDURCHLAUF
U   E 4.1;          // BERO/TA TEILEN FERTIG
R   M 173.3;        // TA SCHRITT 3
R   M 173.4;        // TA TEILEN AKTIV
S   M 173.0;        // TA FERTIG UND VERRIEGELT
NETWORK
TITLE = TA TEILEN AKTIV  AFG/EFG
O   M 173.4;        // TA TEILEN AKTIV
O   M 172.2;        // HM TA TEILEN (M27)
=   M 91.2;         // TA TEILEN AKTIV  AFG/EFG
NETWORK
TITLE = 6073  TA NICHT BEREIT
U   M 173.0;        // TA FERTIG UND VERRIEGELT
UN  E 4.1;          // BERO/TA TEILEN FERTIG
O;
UN  M 173.0;        // TA FERTIG UND VERRIEGELT
U(;
O   DB20.DBX 224.3; // M3 STATISCH
O   DB20.DBX 224.4; // M4 STATISCH
);
S   DB2.DBX  9.1;   // 6073  TA NICHT BEREIT
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   DB2.DBX 9.1;    // 6073  TA NICHT BEREIT
NETWORK
TITLE = 6074  TA ZEITÜBERWACHUNG
U   M 173.1;        // TA SCHRITT 1
L   S5TIME#1S;      // 10X0,1S
SE  T 41;           // STARTEN T41 ALS EINSCHALTVERZ.
U   M 173.3;        // TA SCHRITT 3
L   S5TIME#1S500MS; // 15X0,1S
SE  T 42;           // STARTEN T42 ALS EINSCHALTVERZ.
O   T 41;           // VERZÖGERUNGSZ. ABGEL./TA 1
O   T 42;           // VERZÖGERUNGSZ. ABGEL./TA 3
S   DB2.DBX 9.2;    // 6074  TA ZEITÜBERWACHUNG
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   DB2.DBX 9.2;    // 6074  TA ZEITÜBERWACHUNG
NETWORK
TITLE = 6075  M27 BEI AKTIVEM HA
UN  M 55.7;         // FREIGABE ZUM TÜRENTRIEGELN (N=0 VON SPS)
U   DB20.DBX 195.3; // M27 DYN.
S   DB2.DBX 9.3;    // 6075  M27 BEI AKTIVEM HA
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   DB2.DBX 9.3;    // 6075  M27 BEI AKTIVEM HA
NETWORK
TITLE = TA ABBRUCHBEDINGUNGEN
U   M 173.4;        // TA TEILEN AKTIV
U(;
ON  M 110.0;        // AUX-ON
O   DB1.DBX 1440.0; // RESET AUSGELÖST
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
);
=   M 173.5;        // SUM ABBRECHEN
NETWORK
TITLE = FM SUM ABBRECHEN
U   M 173.5;        // SUM ABBRECHEN
FP  M 173.7;        // FM SUM ABBRECHEN
NETWORK
TITLE = TA ABBRUCH
U   M 173.7;        // FM SUM ABBRECHEN
R   M 173.0;        // TA FERTIG UND VERRIEGELT
R   M 173.1;        // TA SCHRITT 1
R   M 173.2;        // TA SCHRITT 2
R   M 173.3;        // TA SCHRITT 3
R   M 173.4;        // TA TEILEN AKTIV
NETWORK
TITLE = LEISTUNG TA
O   M 173.1;        // TA SCHRITT 1
O   M 173.2;        // TA SCHRITT 2
NETWORK
TITLE = 7051  TEILAPPARAT NICHT VERRIEGELT
UN  M 173.4;        // TA TEILEN AKTIV
UN  M 173.0;        // TA FERTIG UND VERRIEGELT
UN  DB3.DBX 5.2;    // 7042  MASCHINENTÜR INIT.
UN  DB3.DBX 2.4;    // 7020  SONDERBETRIEB AKTIV
UN  DB3.DBX 5.0;    // 7040  MASCHINENTÜR OFFEN
UN  DB3.DBX 2.0;    // 7016  HILFSANTRIEBE EINSCHALTEN
UN  DB3.DBX 2.1;    // 7017  REFERENZPUNKT ANFAHREN
UN  DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
=   DB3.DBX 6.3;    // 7051  TEILAPPARAT NICHT VERRIEGELT
NETWORK
TITLE = SPS/OB-->TA FERTIG UND VERR.
U   M 173.0;        // TA FERTIG UND VERRIEGELT
=   DB20.DBX 311.0; // SPS/OB-->TA FERTIG UND VERR.
NETWORK
TITLE = TA/FC DNC-QUITTUNG
U   DB1.DBX 1366.0; // DNC-BETRIEB AKTIV
U   DB20.DBX 303.3; // DNC/TEILAPPARAPT TEILEN
UN  M 172.1;        // TA TEILEN STARTBEFEHL
S   DB20.DBX 318.5; // TA/FC DNC-QUITTUNG
END_FUNCTION
FUNCTION FC 37 : VOID
NAME: RUNDACHSE WALTER
BEGIN
NETWORK
TITLE = ÜBERWACHUNG RUNDACHSE BETRIEBSBEREIT
U   M 55.0;         // SCHÜTZ HAUPTANTRIEBSSTELLER
L   S5TIME#2S500MS; // 25X0,1S
SE  T 45;            // STARTEN T8 ALS EINSCHALTVERZ.
NETWORK
TITLE = 6071  RUNDACHSE NICHT BEREIT
UN  M 51.3;         // RUNDACHSE/SERVO-READY
L   S5TIME#200MS;   // 2X0,1S
SE  T 46;           // STARTEN T9 ALS EINSCHALTVERZ.
U   T 45;           // HA ÜBERWACHUNG SCHARF 8************
U   T 46;           // HA/SERVO-READY (0,2S)
S   DB2.DBX 8.7;    // 6071 RUNDACHSE NICHT BEREIT
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   DB2.DBX 8.7;    // 6071 RUNDACHSE NICHT BEREIT
NETWORK
TITLE = RUNDACHSE LENZESTELLER STOERUNG QUITTIEREN
U   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
UN  M 51.3;         // RUNDACHSE/SERVO-READY
L   S5TIME#1S;      // 1S
SV  T 44            // 1 SEK.IMPULS VON RESETTASTE (LENZESTELLER STÖRUNG QUITTIEREN!)
NETWORK
TITLE = ANFORDERUNG REFPKT A,X,Y,Z,ZUGLEICH ANFAHREN
U   M 121.3;        // REFPKT X,Y,Z,ZUGLEICH ANFAHREN
U   M 120.6;        // FREIGABE REFERENZIEREN
S   M 124.1         // HM REFERENZIEREN VON ACHSE A ERWÜNSCHT
R   DB20.DBX 9.2;   // REFERENZIEREN VON KANALACHSE A
NETWORK
TITLE = DURCHFÜHRUNG REFPKT A,X,Y,Z,ZUGLEICH ANFAHREN
U   M 124.1         // HM REFERENZIEREN VON ACHSE A ERWÜNSCHT
U   M 120.7;        // FM REFERENZPUNKT Z-ACHSE AKTIV
S   M 124.2         // HM REFERENZIEREN VON ACHSE A DURCHFÜHREN
R   M 124.1         // HM REFERENZIEREN VON ACHSE A ERWÜNSCHT
NETWORK
TITLE = DURCHFÜHRUNG REFPKT A ANFAHREN
U   DB20.DBX 9.2;   // REFERENZIEREN VON KANALACHSE A
U   M 120.6;        // FREIGABE REFERENZIEREN
UN  M 121.3;        // REFPKT X,Y,Z,ZUGLEICH ANFAHREN
S   M 124.2         // HM REFERENZIEREN VON ACHSE A DURCHFÜHREN
R   DB20.DBX 9.2;   // REFERENZIEREN VON KANALACHSE A
NETWORK
TITLE = RUNDACHSE KLEMMUNG LÖSEN
UN  DB20.DBX 843.2; // A ACHSE IPO BEFEHL AKTIV
UN  DB1.DBX 1370.0; // 1.SPS SCHLEIFENDURCHLAUF
O   DB20.DBX 193.3; // M11 DYN.KLEMMUNG LÖSEN
U   M 50.3;         // FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
R   M 54.6;         // RUNDACHSE KLEMMEN
S   M 54.7;         // RUNDACHSE FREIGEBEN
=   DB20.DBX 257.3; // M11 RÜCKMELDEN
U   DB20.DBX 193.3; // M11 DYN.KLEMMUNG LÖSEN
S   M 123.1         // HM M11 DYN.KLEMMUNG LÖSEN
NETWORK
TITLE = EINLESEFREIGABE WÄHREND DER KLEMMPHASE WEGNEHMEN
U   DB20.DBX 257.3; // M11 RÜCKMELDEN
UN  M 123.1         // HM M11 DYN.KLEMMUNG LÖSEN
U   DB20.DBX 340.3; // EINLESEFREIGABE
S   M 124.6         // EINLESEFREIGABE WEGNEHMEN (VON RUNDACHSE)
NETWORK
TITLE = REGLERFREIGABE FÜR LENZEFU
O   M 54.7;         // RUNDACHSE FREIGEBEN
O   T 44;           // 1 SEK.IMPULS VON RESETTASTE (LENZESTELLER STÖRUNG QUITTIEREN!)
=   M 54.5;         // REGLERFREIGABE FÜR LENZE HAUPTANTRIEB
O   M 54.7;         // RUNDACHSE FREIGEBEN
L   S5T#400MS;      // T6,T10 UND T21 GLEICHE ZEIT EINSTELLEN
SI  T 10;           // STARTEN T 10 ALS VERL. IMPULS
U   T 10;           // T 10
=   M 124.4         // HM T 10 AFG/EFG
U   M 54.5;         // REGLERFREIGABE FÜR LENZE HAUPTANTRIEB
L   S5T#400MS;      // T6,T10 UND T21 GLEICHE ZEIT EINSTELLEN
SE  T 21;           // STARTEN T21
SET
=   DB1.DBX 1460.4  // REGLERFREIGABE ABSOLUTE ACHSE 4  (RUNDACHSE MIT ACC)
=   DB1.DBX 1460.7  // REGLERFREIGABE ABSOLUTE ACHSE 7  (RUNDACHSE MIT AC95)
U   M 124.2         // HM REFERENZIEREN VON ACHSE A ERWÜNSCHT
UN  T 10;           // STARTEN T24 ALS VERL. IMPULS
SPBN M100;
=   DB20.DBX 1.1;   // REFERENZPKT.ANFAHREN (UMLENKUNG)
=   DB20.DBX 9.2;   // REFERENZIEREN VON KANALACHSE A
R   M 124.2         // HM REFERENZIEREN VON ACHSE A ERWÜNSCHT
S   M 124.3         // HM2 REFERENZIEREN VON ACHSE A ERWÜNSCHT
M100: NOP 0;
U   DB20.DBX 193.2; // M10 DYN.KLEMMUNG EIN
R   M 123.1         // HM M11 DYN.KLEMMUNG LÖSEN
UN  M 123.1         // HM M11 DYN.KLEMMUNG LÖSEN
U   DB20.DBX 843.2  // A Achse IPO Befehl aktiv
U   DB20.DBX 546.4  // Genauhalt fein für Achse 4
L   S5TIME#400MS;
SE  T 20;           // Genauhalt fein für Achse 4
U   T 20;           // Genauhalt fein für Achse 4
R   M 124.6         // EINLESEFREIGABE WEGNEHMEN (VON RUNDACHSE)
U   T 20;           // Genauhalt fein für Achse 4
FP  M 123.0         // Genauhalt fein für Achse 4
U   DB1.DBX 134.7   // Achse 10 ist referenziert
FP  M 124.7         // FM Achse 10 ist referenziert
NETWORK
TITLE = RUNDACHSE KLEMMEN
O   M 124.7         // FM Achse 10 ist referenziert
O   M 123.0         // FM Genauhalt fein für S2 Achse
O   DB1.DBX 1440.0  // RESET AUSGELÖST
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
O   DB1.DBX 1370.0; // 1.SPS SCHLEIFENDURCHLAUF
ON  M 50.3;         // FREIGABEKREIS AUF AUSGABEMODUL DURCHGESCHALTET
S   M 54.6;         // RUNDACHSE KLEMMEN
R   M 54.7;         // RUNDACHSE FREIGEBEN
=   DB20.DBX 257.2; // M10 RÜCKMELDEN
R   M 123.1         // HM M11 DYN.KLEMMUNG LÖSEN
R   M 124.3         // HM2 REFERENZIEREN VON ACHSE A ERWÜNSCHT
NETWORK
TITLE = ÜBERWACHUNG DRUCKSCHALTER RUNDACHSE KLEMMEN
U   M 54.6;         // RUNDACHSE KLEMMEN
L   S5TIME#1S;
SE  T 5;            // STARTEN T5 ALS EINSCHALTVERZ.
U   T 5;            // STARTEN T5 ALS EINSCHALTVERZ.
UN  M 51.4;         // DRUCKSCHALTER RUNDACHSE
S   DB2.DBX 8.6;    // 6070 Druckschalter Klemmung TANI fehlt
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   DB2.DBX 8.6;    // 6070 Druckschalter Klemmung TANI fehlt
NETWORK
TITLE = ÜBERWACHUNG DRUCKSCHALTER RUNDACHSE FREIGEBEN
U   M 54.7;         // RUNDACHSE FREIGEBEN
L   S5TIME#400MS;   // T6,T10 UND T21 GLEICHE ZEIT EINSTELLEN
SE  T 6;            // STARTEN T6 ALS EINSCHALTVERZ.
U   T 6;            // STARTEN T6 ALS EINSCHALTVERZ.
U   M 51.4;         // DRUCKSCHALTER RUNDACHSE
S   DB2.DBX 8.5;    // 6069 Klemmung TANI nicht offen
O   DB1.DBX 1370.2; // QUITTIERTASTE GEDRÜCKT
O   DB1.DBX 1370.3; // RESETTASTE GEDRÜCKT
R   DB2.DBX 8.5;    // 6069 Klemmung TANI nicht offen
END_FUNCTION
FUNCTION FC 62: VOID
NAME: LED ANSTEUERUNG
BEGIN
NETWORK
TITLE = LAMPENTEST
;       U   DB20.DBX 294.7  // 8*************
;       S   DB20.DBX 846.0  // SKIP
;       S   DB20.DBX 846.1  // DRYRUN
;       S   DB20.DBX 847.0  // TÜR SCHLIESSEN
;       S   DB20.DBX 847.1  // TÜR TÜR ÖFFNEN
;       S   DB20.DBX 847.3  // 1X TASTE
;       S   DB20.DBX 847.4  // OPT.STOP (M1)
;       S   DB20.DBX 848.4  // FUTTER
;       S   DB20.DBX 848.6  // RESET
;       S   DB20.DBX 848.7  // EINZELSATZ
;       S   DB20.DBX 849.6  // PINOLE ZURÜCK
;       S   DB20.DBX 849.7  // PINOLE VOR
;       S   DB20.DBX 850.0  // WERKZEUGWENDEN
;       S   DB20.DBX 850.4  // REFERENZPUNKT ANFAHREN
;       S   DB20.DBX 851.1  // KÜHLMITTEL
;       S   DB20.DBX 851.4  // PROGRAMM HALT
;       S   DB20.DBX 851.5  // PROGRAMM START
;       S   DB20.DBX 851.6  // VORSCHUB HALT
;       S   DB20.DBX 852.0  // VORSCHUB START
;       S   DB20.DBX 852.1  // SPINDEL STOPP
;       S   DB20.DBX 852.3  // SPINDEL START
;       S   DB20.DBX 852.4  // AUX OFF
;       S   DB20.DBX 852.6  // AUX ON
;ROBOTIK TEST
;
;       R   DB20.DBX 846.0  // SKIP
;       R   DB20.DBX 846.1  // DRYRUN
;       R   DB20.DBX 847.0  // TÜR SCHLIESSEN
;       R   DB20.DBX 847.1  // TÜR ÖFFNEN
;       R   DB20.DBX 847.3  // 1X TASTE
;       R   DB20.DBX 847.4  // OPT.STOP (M1)
;       R   DB20.DBX 848.4  // FUTTER
;       R   DB20.DBX 848.6  // RESET
;       R   DB20.DBX 848.7  // EINZELSATZ
;       R   DB20.DBX 849.6  // PINOLE ZURÜCK
;       R   DB20.DBX 849.7  // PINOLE VOR
;       R   DB20.DBX 850.0  // WERKZEUGWENDEN
;       R   DB20.DBX 850.4  // REFERENZPUNKT ANFAHREN
;       R   DB20.DBX 851.1  // KÜHLMITTEL
;       R   DB20.DBX 851.4  // PROGRAMM HALT
;       R   DB20.DBX 851.5  // PROGRAMM START
;       R   DB20.DBX 851.6  // VORSCHUB HALT
;       R   DB20.DBX 852.0  // VORSCHUB START
;       R   DB20.DBX 852.1  // SPINDEL STOPP
;       R   DB20.DBX 852.3  // SPINDEL START
;       R   DB20.DBX 852.4  // AUX OFF
;       R   DB20.DBX 852.6  // AUX ON
;       U   T 47;           // BLINKIMPULS
;       =   DB20.DBX 851.0
;
;
;       U   T 48;           // STARTEN ALS VERLÄNGERTER IMPULS
;       =   DB20.DBX 850.6
NETWORK
TITLE =
;
;
NETWORK
TITLE = KÜHLMITTEL
U   M 56.6;         // KÜHLMITTEL LEISTUNG
=   DB20.DBX 851.1  // LED KÜHLMITTEL
NETWORK
TITLE = DRYRUN AKTIV
;       U   DB20.DBX 324.2  // DRYRUN aktiv
U   M 94.2;         // DRYRUN  SFG
=   DB20.DBX 846.1  // LED DRYRUN
NETWORK
TITLE = AUSBLENDSATZ SKIP
U   DB20.DBX 324.6  // Ausblendsatz (SKIP) aktiv
=   DB20.DBX 846.0  // LED SKIP
NETWORK
TITLE = Optionaler Halt M1 aktiv
U   DB20.DBX 324.5  // Optionaler Halt M1 aktiv
=   DB20.DBX 847.4  // LED OPT.STOP (M1)
NETWORK
TITLE =  EINZELSATZ
U   DB20.DBX 324.7  // Einzelsatz (SINGLE) aktiv
=   DB20.DBX 848.7  // LED EINZELSATZ
NETWORK
TITLE =  AUX ON LEUCHTEN, AUX OFF BLINKEN
U   T 47;           // STARTEN ALS VERLÄNGERTER IMPULS
O   M 110.0;        // AUX-ON
=   DB20.DBX 852.6  // LED AUX ON
NETWORK
TITLE =  REFERENZPUNKT ANFAHREN
U   T 47;           // STARTEN ALS VERLÄNGERTER IMPULS
U   M 110.0;        // AUX-ON
O   M 121.3;        // REFPKT.X,Z,ZUGLEICH ANFAHREN
UN  DB20.DBX 324.4; // REFERENZPUNKT AKTIV
UN  DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
U   M 55.2;         // AUSGANGSMERKER LEISTUNG ACHSEN/SANFTANLAUF
=   DB20.DBX 850.4  // LED REFERENZPUNKT ANFAHREN
NETWORK
TITLE =  WERKZEUGWENDEN AKTIV
U   DB3.DBX 2.6;    // 7022  WERKZEUGWENDER INITIALISIEREN
U   T 47;           // STARTEN ALS VERLÄNGERTER IMPULS
O   M 152.0;        // WERKZEUGWENDEN AKTIV
=   DB20.DBX 850.0  // LED WERKZEUGWENDEN
NETWORK
TITLE =  SPINDEL HALT AKTIV
U   M 132.1;        // SPINDEL HALT AKTIV
U   T 47;           // STARTEN ALS VERLÄNGERTER IMPULS
=   DB20.DBX 852.3  // LED SPINDEL START
NETWORK
TITLE =  VORSCHUB HALT AKTIV
U   M 133.1;        // VORSCHUB HALT AKTIV
U   T 47;           // STARTEN ALS VERLÄNGERTER IMPULS
=   DB20.DBX 852.0  // LED VORSCHUB START
NETWORK
TITLE = LED PROGRAMM HALT AKTIV
U   DB20.DBX 324.0; // Programm läuft
U   DB20.DBX 324.1; // STOP-ZUSTAND
U   T 47;           // STARTEN ALS VERLÄNGERTER IMPULS
=   DB20.DBX 851.5  // PROGRAMM START
NETWORK
TITLE = SCHRAUBSTOCK GESPANNT
O   M 138.5;        // SCHRAUBSTOCK GESPANNT
O   T 47;           // STARTEN ALS VERLÄNGERTER IMPULS
U   DB10.DBX 75.1;  // PNEUM. SCHRAUBSTOCK AKTIVIEREN
=   DB20.DBX 849.6  // LED SCHRAUBSTOCK GESPANNT
NETWORK
TITLE = TÜR GESCHLOSSEN TÜRAUTOMATIK
O   T 47;           // STARTEN ALS VERLÄNGERTER IMPULS
O   M 50.0;         // TÜR ZU VON TÜRMODUL Y4A043000 X5:4 FG1
U   DB10.DBX 75.0;  // TÜRAUTOMATIK AKTIVIEREN
=   DB20.DBX 847.0  // TÜR SCHLIESSEN
NETWORK
TITLE =  PROGRAMM BEENDEN UND LED LÖSCHEN
U   DB1.DBX 1440.1; // PROGRAMM BEENDEN
U   M 110.0;        // AUX-ON
R   DB1.DBX 1440.1; // PROGRAMM BEENDEN
U   DB1.DBX 1440.1; // PROGRAMM BEENDEN
UN  M 110.0;        // AUX-ON
SPBN   M001
L   W#16#0;         // LADE KONSTANTE HEX 0
T   DB20.DBW 846    // LED IM BEDIENPULT LÖSCHEN
T   DB20.DBW 848    // LED IM BEDIENPULT LÖSCHEN
T   DB20.DBW 850    // LED IM BEDIENPULT LÖSCHEN
T   DB20.DBW 852    // LED IM BEDIENPULT LÖSCHEN
M001:  NOP 0
END_FUNCTION
FUNCTION FC 21: VOID
NAME: FUSZTASTER FÜR PNEUMATISCHES SPANNMITTEL
BEGIN
NETWORK
TITLE = FUSZTASTER FÜR PNEUMATISCHES SPANNMITTEL SCHLIESZEN
U   E  3.1;         // FUSZTASTER SPANNMITTEL ZU
FP  M 24.1;         // FM FUSZTASTER SPANNMITTEL ZU
U   M 24.1;         // FM FUSZTASTER SPANNMITTEL ZU
UN  E  3.2;         // FUSZTASTER SPANNMITTEL AUF
U   M 138.0;        // FREIGABE SPANNMITTEL ZU/AUF
S   M 139.5;        // HM FUTTER ZU (M26)
NETWORK
TITLE = FUSZTASTER FÜR PNEUMATISCHES SPANNMITTEL ÖFFNEN
U   E  3.2;         // FUSZTASTER SPANNMITTEL AUF
FP  M 24.2;         // FM FUSZTASTER SPANNMITTEL AUF
U   M 24.2;         // FM FUSZTASTER SPANNMITTEL AUF
UN  E  3.1;         // FUSZTASTER SPANNMITTEL ZU
U   M 138.0;        // FREIGABE SPANNMITTEL ZU/AUF
S   M 139.4;        // HM SPANNMITTEL AUF (M25)
END_FUNCTION
ORGANIZATION_BLOCK OB 1
NAME: ORGANISATIONSBAUSTEIN
BEGIN
ON  DB1.DBX 1414.0; // 1.CAN-EINGANGSPORT (CAN-ADRESSE 0)
ON  DB1.DBX 1415.0; // 1.CAN-AUSGANGSPORT (CAN-ADRESSE 8)
UN  DB10.DBX 2.0;   // AC 95 AKTIVIEREN
=   DB2.DBX 1.0;    // 6008  FEHLENDER CAN-TEILN.
BEB
CALL   FC 34;         // ZUWEISEN DER EINGÄNGE AC 95 - ACC
CALL   FC 20;          // INITIALISIERUNGEN UND ÜBERWACHUNGEN
U   DB10.DBX 75.0;  // SPS-MSD /TÜRAUTOMATIK
U   DB1.DBX 1426.1; // ROBOTIK SCHNITTSTELLE AKTIVIERT MIT DISKETTE
U   DB10.DBX 75.7;  // ROBOTIK SCHNITTSTELLE AKTIVIERT IN MSD
CC   FC 61 ;         // AUSWERTUNG DER ZWEIKANALIGEN TÜRSTEUERUNG UND TÜRÜBERWACHUNG
U   DB1.DBX 1426.1; // ROBOTIK SCHNITTSTELLE AKTIVIERT MIT DISKETTE
U   DB10.DBX 75.7;  // ROBOTIKSCHNITTSTELLE AKTIVIEREN
CC   FC 40;          // ROBOTIK-INTERFACE
CALL   FC 16;          // RESET
CALL   FC 25;          // BEI_PROGRAMM_ENDE_RESET_ODER_NEUSTART
CALL   FC 17;          // NC_START_UND_NC_STOP_VON_M0_ODER_M1
CALL   FC 21;          // FUSZTASTER FÜR PNEUMATISCHES SPANNMITTEL
CALL   FC 24;          // HA LEISTUNG
CALL   FC 10;          // HA STEUERUNG
CALL   FC 11;          // ACHSEN LEISTUNG
U   DB10.DBX 75.3;  // AUSBLASEN AKTIVIEREN
CC   FC 31;          // AUSBLASEINRICHTUNG
U   DB10.DBX 75.0;  // TÜRAUTOMATIK AKTIVIEREN
CC   FC 32;          // TÜRAUTOMATIK
U   DB10.DBX 76.0;  // AC95 RUNDACHSE AKTIVIEREN
UN  DB10.DBX 2.0;   // ACC AKTIVIEREN
O(
O   DB10.DBX 100.2  // ACC RUNDACHSE AKTIVIEREN 5000  UPM
O   DB10.DBX 100.3  // ACC RUNDACHSE AKTIVIEREN 10000 UPM
UN  DB10.DBX 100.0
UN  DB10.DBX 100.1
UN  DB10.DBX 100.4  // ACC 4.5.ACHSE RIES AKTIVIEREN 5000  UPM
UN  DB10.DBX 100.5  // ACC 4.5.ACHSE RIES AKTIVIEREN 10000 UPM
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
)
=   M 35.0          // HM RUNDACHSE AKTIVIERT
O   DB10.DBX 100.4  // ACC 4.5.ACHSE RIES AKTIVIEREN 5000  UPM
O   DB10.DBX 100.5  // ACC 4.5.ACHSE RIES AKTIVIEREN 10000 UPM
UN  DB10.DBX 100.0
UN  DB10.DBX 100.1
UN  DB10.DBX 100.2  // ACC RUNDACHSE AKTIVIEREN 5000  UPM
UN  DB10.DBX 100.3  // ACC RUNDACHSE AKTIVIEREN 10000 UPM
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
=   M 36.0          // HM 4.5.ACHSE RIES AKTIVIERT
UN  DB10.DBX 75.6;  // TEILAPPARAT AKTIVIEREN
U   DB10.DBX 75.1;  // PNEUM. SCHRAUBSTOCK AKTIVIEREN
CC   FC 30;          // PNEUM. SCHRAUBSTOCK
UN  DB10.DBX 75.1;  // PNEUM. SCHRAUBSTOCK AKTIVIEREN
U   DB10.DBX 75.6;  // TEILAPPARAT AKTIVIEREN
CC   FC 36;          // TEILAPPARAT
UN  DB10.DBX 75.6;  // TEILAPPARAT AKTIVIEREN
U   M 35.0          // HM RUNDACHSE AKTIVIERT
CC   FC 37;          // RUNDACHSE
UN  DB10.DBX 75.6;  // TEILAPPARAT AKTIVIEREN
U   M 36.0          // HM 4.5.ACHSE RIES AKTIVIERT
CC   FC 38;          // RUNDACHSE 4.5.RIES
CALL   FC 22           // AUTOMATISCH IN BA REF UMSCHALTEN
CALL   FC 14;          // AUX-ON
CALL   FC 19;          // SONDERBETRIEB
CALL   FC 13;          // REF ACHSEN
CALL   FC 12;          // JOG ACHSEN
CALL   FC 23;          // INC ACHSEN
CALL   FC 27;          // SPINDEL HALT/START
CALL   FC 28;          // VORSCHUB HALT/START
CALL   FC 1;           // SCHMIERMITTEL
CALL   FC 2;           // STÜCKZÄHLER
CALL   FC 26;          // KÜHLMITTEL (M8/M9)
CALL   FC 29;          // EINZELSTÜCK
CALL   FC 15;          // NC-STARTVERR. UND BETRIEBSARTEN
U   DB10.DBX 75.5;  // WERKZEUGWENDER AKTIVIEREN
CC   FC 0;           // WERKZEUGWENDER
CALL   FC 63 ;         // WARNLEUCHTE
CALL   FC 18;          // PLC-NC ÜBERGABE UND EFG,AFG,SFG
CALL   FC 55;          // WERKZEUGWENDER EINSTELLARBEITEN
CALL   FC 62 ;         // LED ANSTEUERUNG
CALL   FC 35;          // ZUWEISEN DER AUSGÄNGE AC95 - ACC
U   DB10.DBX 2.0;   // ACC AKTIVIEREN
CC   FC 65 ;         // HANDRAD
U   DB25.DBX 332.0; // NC-SATZ FERTIG
R   DB25.DBX 332.0; // NC-SATZ FERTIG
;B100=1  ;Bit 0  MIL155_.msd      5000Upm
;B100=2  ;Bit 1  MIL155a.msd     10000Upm
;B100=4  ;Bit 2  MIL155b.msd      5000Upm mit Walter 4.Achse
;B100=8  ;Bit 3  MIL155c.msd     10000Upm mit Walter 4.Achse
;B100=16 ;Bit 4  MIL155d.msd      5000Upm mit Ries 4.5.Achse
;B100=32 ;Bit 5  MIL155e.msd     10000Upm mit Ries 4.5.Achse
END_ORGANIZATION_BLOCK
